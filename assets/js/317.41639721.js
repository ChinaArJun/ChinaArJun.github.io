(window.webpackJsonp=window.webpackJsonp||[]).push([[317],{895:function(t,v,_){"use strict";_.r(v);var r=_(44),e=Object(r.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"_4-1-grpcåŠç›¸å…³ä»‹ç»"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-grpcåŠç›¸å…³ä»‹ç»"}},[t._v("#")]),t._v(" 4.1 gRPCåŠç›¸å…³ä»‹ç»")]),t._v(" "),_("p",[t._v("é¡¹ç›®åœ°å€ï¼šhttps://github.com/EDDYCJY/go-grpc-example")]),t._v(" "),_("p",[t._v("ä½œä¸ºå¼€ç¯‡ç« ï¼Œå°†ä¼šä»‹ç» gRPC ç›¸å…³çš„ä¸€äº›çŸ¥è¯†ã€‚ç®€å•æ¥è®² gRPC æ˜¯ä¸€ä¸ª åŸºäº HTTP/2 åè®®è®¾è®¡çš„ RPC æ¡†æ¶ï¼Œå®ƒé‡‡ç”¨äº† Protobuf ä½œä¸º IDL")]),t._v(" "),_("p",[t._v("ä½ æ˜¯å¦æœ‰è¿‡ç–‘æƒ‘ï¼Œå®ƒä»¬éƒ½æ˜¯äº›ä»€ä¹ˆï¼Ÿæœ¬æ–‡å°†ä¼šä»‹ç»ä¸€äº›å¸¸ç”¨çš„çŸ¥è¯†å’Œæ¦‚å¿µï¼Œæ›´è¯¦ç»†çš„ä¼šç»™å‡ºæ‰‹å†Œåœ°å€å»æ·±å…¥")]),t._v(" "),_("h2",{attrs:{id:"ä¸€ã€rpc"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€rpc"}},[t._v("#")]),t._v(" ä¸€ã€RPC")]),t._v(" "),_("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯-rpc"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯-rpc"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯ RPC")]),t._v(" "),_("p",[t._v("RPC ä»£æŒ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRemote Procedure Callï¼‰ï¼Œå®ƒçš„è°ƒç”¨åŒ…å«äº†ä¼ è¾“åè®®å’Œç¼–ç ï¼ˆå¯¹è±¡åºåˆ—å·ï¼‰åè®®ç­‰ç­‰ã€‚å…è®¸è¿è¡Œäºä¸€å°è®¡ç®—æœºçš„ç¨‹åºè°ƒç”¨å¦ä¸€å°è®¡ç®—æœºçš„å­ç¨‹åºï¼Œè€Œå¼€å‘äººå‘˜æ— éœ€é¢å¤–åœ°ä¸ºè¿™ä¸ªäº¤äº’ä½œç”¨ç¼–ç¨‹")]),t._v(" "),_("h4",{attrs:{id:"å®é™…åœºæ™¯ï¼š"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å®é™…åœºæ™¯ï¼š"}},[t._v("#")]),t._v(" å®é™…åœºæ™¯ï¼š")]),t._v(" "),_("p",[t._v("æœ‰ä¸¤å°æœåŠ¡å™¨ï¼Œåˆ†åˆ«æ˜¯Aã€Bã€‚åœ¨ A ä¸Šçš„åº”ç”¨ C æƒ³è¦è°ƒç”¨ B æœåŠ¡å™¨ä¸Šçš„åº”ç”¨ Dï¼Œå®ƒä»¬å¯ä»¥ç›´æ¥æœ¬åœ°è°ƒç”¨å—ï¼Ÿ"),_("br"),t._v("\nç­”æ¡ˆæ˜¯ä¸èƒ½çš„ï¼Œä½†èµ° RPC çš„è¯ï¼Œååˆ†æ–¹ä¾¿ã€‚å› æ­¤å¸¸æœ‰äººç§°ä½¿ç”¨ RPCï¼Œå°±è·Ÿæœ¬åœ°è°ƒç”¨ä¸€ä¸ªå‡½æ•°ä¸€æ ·ç®€å•")]),t._v(" "),_("h3",{attrs:{id:"rpc-æ¡†æ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#rpc-æ¡†æ¶"}},[t._v("#")]),t._v(" RPC æ¡†æ¶")]),t._v(" "),_("p",[t._v("æˆ‘è®¤ä¸ºï¼Œä¸€ä¸ªå®Œæ•´çš„ RPC æ¡†æ¶ï¼Œåº”åŒ…å«è´Ÿè½½å‡è¡¡ã€æœåŠ¡æ³¨å†Œå’Œå‘ç°ã€æœåŠ¡æ²»ç†ç­‰åŠŸèƒ½ï¼Œå¹¶å…·æœ‰å¯æ‹“å±•æ€§ä¾¿äºæµé‡ç›‘æ§ç³»ç»Ÿç­‰æ¥å…¥"),_("br"),t._v("\né‚£ä¹ˆå®ƒæ‰ç®—å®Œæ•´çš„ï¼Œå½“ç„¶äº†ã€‚æœ‰äº›è¾ƒå•ä¸€çš„ RPC æ¡†æ¶ï¼Œé€šè¿‡ç»„åˆå¤šç»„ä»¶ä¹Ÿèƒ½è¾¾åˆ°è¿™ä¸ªæ ‡å‡†")]),t._v(" "),_("p",[t._v("ä½ è®¤ä¸ºå‘¢ï¼Ÿ")]),t._v(" "),_("h3",{attrs:{id:"å¸¸è§-rpc-æ¡†æ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§-rpc-æ¡†æ¶"}},[t._v("#")]),t._v(" å¸¸è§ RPC æ¡†æ¶")]),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://grpc.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("gRPC"),_("OutboundLink")],1)]),t._v(" "),_("li",[_("a",{attrs:{href:"https://github.com/apache/thrift",target:"_blank",rel:"noopener noreferrer"}},[t._v("Thrift"),_("OutboundLink")],1)]),t._v(" "),_("li",[_("a",{attrs:{href:"https://github.com/smallnest/rpcx",target:"_blank",rel:"noopener noreferrer"}},[t._v("Rpcx"),_("OutboundLink")],1)]),t._v(" "),_("li",[_("a",{attrs:{href:"https://github.com/apache/incubator-dubbo",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dubbo"),_("OutboundLink")],1)])]),t._v(" "),_("h3",{attrs:{id:"æ¯”è¾ƒä¸€ä¸‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ¯”è¾ƒä¸€ä¸‹"}},[t._v("#")]),t._v(" æ¯”è¾ƒä¸€ä¸‹")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("\\")]),t._v(" "),_("th",[t._v("è·¨è¯­è¨€")]),t._v(" "),_("th",[t._v("å¤š IDL")]),t._v(" "),_("th",[t._v("æœåŠ¡æ²»ç†")]),t._v(" "),_("th",[t._v("æ³¨å†Œä¸­å¿ƒ")]),t._v(" "),_("th",[t._v("æœåŠ¡ç®¡ç†")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("gRPC")]),t._v(" "),_("td",[t._v("âˆš")]),t._v(" "),_("td",[t._v("Ã—")]),t._v(" "),_("td",[t._v("Ã—")]),t._v(" "),_("td",[t._v("Ã—")]),t._v(" "),_("td",[t._v("Ã—")])]),t._v(" "),_("tr",[_("td",[t._v("Thrift")]),t._v(" "),_("td",[t._v("âˆš")]),t._v(" "),_("td",[t._v("Ã—")]),t._v(" "),_("td",[t._v("Ã—")]),t._v(" "),_("td",[t._v("Ã—")]),t._v(" "),_("td",[t._v("Ã—")])]),t._v(" "),_("tr",[_("td",[t._v("Rpcx")]),t._v(" "),_("td",[t._v("Ã—")]),t._v(" "),_("td",[t._v("âˆš")]),t._v(" "),_("td",[t._v("âˆš")]),t._v(" "),_("td",[t._v("âˆš")]),t._v(" "),_("td",[t._v("âˆš")])]),t._v(" "),_("tr",[_("td",[t._v("Dubbo")]),t._v(" "),_("td",[t._v("Ã—")]),t._v(" "),_("td",[t._v("âˆš")]),t._v(" "),_("td",[t._v("âˆš")]),t._v(" "),_("td",[t._v("âˆš")]),t._v(" "),_("td",[t._v("âˆš")])])])]),t._v(" "),_("h3",{attrs:{id:"ä¸ºä»€ä¹ˆè¦-rpc"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦-rpc"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè¦ RPC")]),t._v(" "),_("p",[t._v("ç®€å•ã€é€šç”¨ã€å®‰å…¨ã€æ•ˆç‡")]),t._v(" "),_("h3",{attrs:{id:"rpc-å¯ä»¥åŸºäº-http-å—"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#rpc-å¯ä»¥åŸºäº-http-å—"}},[t._v("#")]),t._v(" RPC å¯ä»¥åŸºäº HTTP å—")]),t._v(" "),_("p",[t._v("RPC æ˜¯ä»£æŒ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œæ˜¯å¯ä»¥åŸºäº HTTP åè®®çš„")]),t._v(" "),_("p",[t._v("è‚¯å®šä¼šæœ‰äººè¯´æ•ˆç‡ä¼˜åŠ¿ï¼Œæˆ‘å¯ä»¥å‘Šè¯‰ä½ ï¼Œé‚£æ˜¯åŸºäº HTTP/1.1 æ¥è®²çš„ï¼ŒHTTP/2 ä¼˜åŒ–äº†è®¸å¤šé—®é¢˜ï¼ˆå½“ç„¶ä¹Ÿå­˜åœ¨æ–°çš„é—®é¢˜ï¼‰ï¼Œæ‰€ä»¥ä½ çœ‹åˆ°äº†æœ¬æ–‡çš„ä¸»é¢˜ gRPC")]),t._v(" "),_("h2",{attrs:{id:"äºŒã€protobuf"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€protobuf"}},[t._v("#")]),t._v(" äºŒã€Protobuf")]),t._v(" "),_("h3",{attrs:{id:"ä»‹ç»"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä»‹ç»"}},[t._v("#")]),t._v(" ä»‹ç»")]),t._v(" "),_("p",[t._v("Protocol Buffers æ˜¯ä¸€ç§ä¸è¯­è¨€ã€å¹³å°æ— å…³ï¼Œå¯æ‰©å±•çš„åºåˆ—åŒ–ç»“æ„åŒ–æ•°æ®çš„æ–¹æ³•ï¼Œå¸¸ç”¨äºé€šä¿¡åè®®ï¼Œæ•°æ®å­˜å‚¨ç­‰ç­‰ã€‚ç›¸è¾ƒäº JSONã€XMLï¼Œå®ƒæ›´å°ã€æ›´å¿«ã€æ›´ç®€å•ï¼Œå› æ­¤ä¹Ÿæ›´å—å¼€å‘äººå‘˜çš„é’çœ¯")]),t._v(" "),_("h3",{attrs:{id:"è¯­æ³•"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#è¯­æ³•"}},[t._v("#")]),t._v(" è¯­æ³•")]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v('syntax = "proto3";\n\nservice SearchService {\n    rpc Search (SearchRequest) returns (SearchResponse);\n}\n\nmessage SearchRequest {\n  string query = 1;\n  int32 page_number = 2;\n  int32 result_per_page = 3;\n}\n\nmessage SearchResponse {\n    ...\n}\n')])])]),_("p",[t._v("1ã€ç¬¬ä¸€è¡Œï¼ˆéç©ºçš„éæ³¨é‡Šè¡Œï¼‰å£°æ˜ä½¿ç”¨ "),_("code",[t._v("proto3")]),t._v(" è¯­æ³•ã€‚å¦‚æœä¸å£°æ˜ï¼Œå°†é»˜è®¤ä½¿ç”¨ "),_("code",[t._v("proto2")]),t._v(" è¯­æ³•ã€‚åŒæ—¶æˆ‘å»ºè®®ç”¨ v2 è¿˜æ˜¯ v3ï¼Œéƒ½åº”å½“å£°æ˜å…¶ä½¿ç”¨çš„ç‰ˆæœ¬")]),t._v(" "),_("p",[t._v("2ã€å®šä¹‰ "),_("code",[t._v("SearchService")]),t._v(" RPC æœåŠ¡ï¼Œå…¶åŒ…å« RPC æ–¹æ³• "),_("code",[t._v("Search")]),t._v("ï¼Œå…¥å‚ä¸º "),_("code",[t._v("SearchRequest")]),t._v(" æ¶ˆæ¯ï¼Œå‡ºå‚ä¸º "),_("code",[t._v("SearchResponse")]),t._v(" æ¶ˆæ¯")]),t._v(" "),_("p",[t._v("3ã€å®šä¹‰ "),_("code",[t._v("SearchRequest")]),t._v("ã€"),_("code",[t._v("SearchResponse")]),t._v(" æ¶ˆæ¯ï¼Œå‰è€…å®šä¹‰äº†ä¸‰ä¸ªå­—æ®µï¼Œæ¯ä¸€ä¸ªå­—æ®µåŒ…å«ä¸‰ä¸ªå±æ€§ï¼šç±»å‹ã€å­—æ®µåç§°ã€å­—æ®µç¼–å·")]),t._v(" "),_("p",[t._v("4ã€Protobuf ç¼–è¯‘å™¨ä¼šæ ¹æ®é€‰æ‹©çš„è¯­è¨€ä¸åŒï¼Œç”Ÿæˆç›¸åº”è¯­è¨€çš„ Service Interface Code  å’Œ Stubs")]),t._v(" "),_("p",[t._v("æœ€åï¼Œè¿™é‡Œåªæ˜¯ç®€å•çš„è¯­æ³•ä»‹ç»ï¼Œè¯¦ç»†çš„è¯·å³æ‹ "),_("a",{attrs:{href:"https://developers.google.com/protocol-buffers/docs/proto3",target:"_blank",rel:"noopener noreferrer"}},[t._v("\nLanguage Guide (proto3)"),_("OutboundLink")],1)]),t._v(" "),_("h3",{attrs:{id:"æ•°æ®ç±»å‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ•°æ®ç±»å‹"}},[t._v("#")]),t._v(" æ•°æ®ç±»å‹")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v(".proto Type")]),t._v(" "),_("th",[t._v("C++ Type")]),t._v(" "),_("th",[t._v("Java Type")]),t._v(" "),_("th",[t._v("Go Type")]),t._v(" "),_("th",[t._v("PHP Type")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("double")]),t._v(" "),_("td",[t._v("double")]),t._v(" "),_("td",[t._v("double")]),t._v(" "),_("td",[t._v("float64")]),t._v(" "),_("td",[t._v("float")])]),t._v(" "),_("tr",[_("td",[t._v("float")]),t._v(" "),_("td",[t._v("float")]),t._v(" "),_("td",[t._v("float")]),t._v(" "),_("td",[t._v("float32")]),t._v(" "),_("td",[t._v("float")])]),t._v(" "),_("tr",[_("td",[t._v("int32")]),t._v(" "),_("td",[t._v("int32")]),t._v(" "),_("td",[t._v("int")]),t._v(" "),_("td",[t._v("int32")]),t._v(" "),_("td",[t._v("integer")])]),t._v(" "),_("tr",[_("td",[t._v("int64")]),t._v(" "),_("td",[t._v("int64")]),t._v(" "),_("td",[t._v("long")]),t._v(" "),_("td",[t._v("int64")]),t._v(" "),_("td",[t._v("integer/string")])]),t._v(" "),_("tr",[_("td",[t._v("uint32")]),t._v(" "),_("td",[t._v("uint32")]),t._v(" "),_("td",[t._v("int")]),t._v(" "),_("td",[t._v("uint32")]),t._v(" "),_("td",[t._v("integer")])]),t._v(" "),_("tr",[_("td",[t._v("uint64")]),t._v(" "),_("td",[t._v("uint64")]),t._v(" "),_("td",[t._v("long")]),t._v(" "),_("td",[t._v("uint64")]),t._v(" "),_("td",[t._v("integer/string")])]),t._v(" "),_("tr",[_("td",[t._v("sint32")]),t._v(" "),_("td",[t._v("int32")]),t._v(" "),_("td",[t._v("int")]),t._v(" "),_("td",[t._v("int32")]),t._v(" "),_("td",[t._v("integer")])]),t._v(" "),_("tr",[_("td",[t._v("sint64")]),t._v(" "),_("td",[t._v("int64")]),t._v(" "),_("td",[t._v("long")]),t._v(" "),_("td",[t._v("int64")]),t._v(" "),_("td",[t._v("integer/string")])]),t._v(" "),_("tr",[_("td",[t._v("fixed32")]),t._v(" "),_("td",[t._v("uint32")]),t._v(" "),_("td",[t._v("int")]),t._v(" "),_("td",[t._v("uint32")]),t._v(" "),_("td",[t._v("integer")])]),t._v(" "),_("tr",[_("td",[t._v("fixed64")]),t._v(" "),_("td",[t._v("uint64")]),t._v(" "),_("td",[t._v("long")]),t._v(" "),_("td",[t._v("uint64")]),t._v(" "),_("td",[t._v("integer/string")])]),t._v(" "),_("tr",[_("td",[t._v("sfixed32")]),t._v(" "),_("td",[t._v("int32")]),t._v(" "),_("td",[t._v("int")]),t._v(" "),_("td",[t._v("int32")]),t._v(" "),_("td",[t._v("integer")])]),t._v(" "),_("tr",[_("td",[t._v("sfixed64")]),t._v(" "),_("td",[t._v("int64")]),t._v(" "),_("td",[t._v("long")]),t._v(" "),_("td",[t._v("int64")]),t._v(" "),_("td",[t._v("integer/string")])]),t._v(" "),_("tr",[_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("boolean")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("boolean")])]),t._v(" "),_("tr",[_("td",[t._v("string")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("String")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("string")])]),t._v(" "),_("tr",[_("td",[t._v("bytes")]),t._v(" "),_("td",[t._v("string")]),t._v(" "),_("td",[t._v("ByteString")]),t._v(" "),_("td",[t._v("[]byte")]),t._v(" "),_("td",[t._v("string")])])])]),t._v(" "),_("h3",{attrs:{id:"v2-å’Œ-v3-ä¸»è¦åŒºåˆ«"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#v2-å’Œ-v3-ä¸»è¦åŒºåˆ«"}},[t._v("#")]),t._v(" v2 å’Œ v3 ä¸»è¦åŒºåˆ«")]),t._v(" "),_("ul",[_("li",[t._v("åˆ é™¤åŸå§‹å€¼å­—æ®µçš„å­—æ®µå­˜åœ¨é€»è¾‘")]),t._v(" "),_("li",[t._v("åˆ é™¤ required å­—æ®µ")]),t._v(" "),_("li",[t._v("åˆ é™¤ optional å­—æ®µï¼Œé»˜è®¤å°±æ˜¯")]),t._v(" "),_("li",[t._v("åˆ é™¤ default å­—æ®µ")]),t._v(" "),_("li",[t._v("åˆ é™¤æ‰©å±•ç‰¹æ€§ï¼Œæ–°å¢ Any ç±»å‹æ¥æ›¿ä»£å®ƒ")]),t._v(" "),_("li",[t._v("åˆ é™¤ unknown å­—æ®µçš„æ”¯æŒ")]),t._v(" "),_("li",[t._v("æ–°å¢ "),_("a",{attrs:{href:"https://developers.google.com/protocol-buffers/docs/proto3#json",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSON Mapping"),_("OutboundLink")],1)]),t._v(" "),_("li",[t._v("æ–°å¢ Map ç±»å‹çš„æ”¯æŒ")]),t._v(" "),_("li",[t._v("ä¿®å¤ enum çš„ unknown ç±»å‹")]),t._v(" "),_("li",[t._v("repeated é»˜è®¤ä½¿ç”¨ packed ç¼–ç ")]),t._v(" "),_("li",[t._v("å¼•å…¥äº†æ–°çš„è¯­è¨€å®ç°ï¼ˆCï¼ƒï¼ŒJavaScriptï¼ŒRubyï¼ŒObjective-Cï¼‰")])]),t._v(" "),_("p",[t._v("ä»¥ä¸Šæ˜¯æ—¥å¸¸æ¶‰åŠçš„å¸¸è§åŠŸèƒ½ï¼Œå¦‚æœè¿˜æƒ³è¯¦ç»†äº†è§£å¯é˜…è¯» "),_("a",{attrs:{href:"https://github.com/protocolbuffers/protobuf/releases?after=v3.2.1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Protobuf Version 3.0.0"),_("OutboundLink")],1)]),t._v(" "),_("h3",{attrs:{id:"ç›¸è¾ƒ-protobufï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨xmlï¼Ÿ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ç›¸è¾ƒ-protobufï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨xmlï¼Ÿ"}},[t._v("#")]),t._v(" ç›¸è¾ƒ Protobufï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨XMLï¼Ÿ")]),t._v(" "),_("ul",[_("li",[t._v("æ›´ç®€å•")]),t._v(" "),_("li",[t._v("æ•°æ®æè¿°æ–‡ä»¶åªéœ€åŸæ¥çš„1/10è‡³1/3")]),t._v(" "),_("li",[t._v("è§£æé€Ÿåº¦æ˜¯åŸæ¥çš„20å€è‡³100å€")]),t._v(" "),_("li",[t._v("å‡å°‘äº†äºŒä¹‰æ€§")]),t._v(" "),_("li",[t._v("ç”Ÿæˆäº†æ›´æ˜“ä½¿ç”¨çš„æ•°æ®è®¿é—®ç±»")])]),t._v(" "),_("h2",{attrs:{id:"ä¸‰ã€grpc"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€grpc"}},[t._v("#")]),t._v(" ä¸‰ã€gRPC")]),t._v(" "),_("h3",{attrs:{id:"ä»‹ç»-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä»‹ç»-2"}},[t._v("#")]),t._v(" ä»‹ç»")]),t._v(" "),_("p",[t._v("gRPC æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€å¼€æºå’Œé€šç”¨çš„ RPC æ¡†æ¶ï¼Œé¢å‘ç§»åŠ¨å’Œ HTTP/2 è®¾è®¡")]),t._v(" "),_("h4",{attrs:{id:"å¤šè¯­è¨€"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å¤šè¯­è¨€"}},[t._v("#")]),t._v(" å¤šè¯­è¨€")]),t._v(" "),_("ul",[_("li",[t._v("C++")]),t._v(" "),_("li",[t._v("C#")]),t._v(" "),_("li",[t._v("Dart")]),t._v(" "),_("li",[t._v("Go")]),t._v(" "),_("li",[t._v("Java")]),t._v(" "),_("li",[t._v("Node.js")]),t._v(" "),_("li",[t._v("Objective-C")]),t._v(" "),_("li",[t._v("PHP")]),t._v(" "),_("li",[t._v("Python")]),t._v(" "),_("li",[t._v("Ruby")])]),t._v(" "),_("h4",{attrs:{id:"ç‰¹ç‚¹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ç‰¹ç‚¹"}},[t._v("#")]),t._v(" ç‰¹ç‚¹")]),t._v(" "),_("p",[t._v("1ã€HTTP/2")]),t._v(" "),_("p",[t._v("2ã€Protobuf")]),t._v(" "),_("p",[t._v("3ã€å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯åŸºäºåŒä¸€ä»½ IDL")]),t._v(" "),_("p",[t._v("4ã€ç§»åŠ¨ç½‘ç»œçš„è‰¯å¥½æ”¯æŒ")]),t._v(" "),_("p",[t._v("5ã€æ”¯æŒå¤šè¯­è¨€")]),t._v(" "),_("h3",{attrs:{id:"æ¦‚è§ˆ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚è§ˆ"}},[t._v("#")]),t._v(" æ¦‚è§ˆ")]),t._v(" "),_("p",[_("img",{attrs:{src:"https://image.eddycjy.com/7dcac5be0a34636c699025368242d3f3.png",alt:"image"}})]),t._v(" "),_("h3",{attrs:{id:"è®²è§£"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#è®²è§£"}},[t._v("#")]),t._v(" è®²è§£")]),t._v(" "),_("p",[t._v("1ã€å®¢æˆ·ç«¯ï¼ˆgRPC Subï¼‰è°ƒç”¨ A æ–¹æ³•ï¼Œå‘èµ· RPC è°ƒç”¨")]),t._v(" "),_("p",[t._v("2ã€å¯¹è¯·æ±‚ä¿¡æ¯ä½¿ç”¨ Protobuf è¿›è¡Œå¯¹è±¡åºåˆ—åŒ–å‹ç¼©ï¼ˆIDLï¼‰")]),t._v(" "),_("p",[t._v("3ã€æœåŠ¡ç«¯ï¼ˆgRPC Serverï¼‰æ¥æ”¶åˆ°è¯·æ±‚åï¼Œè§£ç è¯·æ±‚ä½“ï¼Œè¿›è¡Œä¸šåŠ¡é€»è¾‘å¤„ç†å¹¶è¿”å›")]),t._v(" "),_("p",[t._v("4ã€å¯¹å“åº”ç»“æœä½¿ç”¨ Protobuf è¿›è¡Œå¯¹è±¡åºåˆ—åŒ–å‹ç¼©ï¼ˆIDLï¼‰")]),t._v(" "),_("p",[t._v("5ã€å®¢æˆ·ç«¯æ¥å—åˆ°æœåŠ¡ç«¯å“åº”ï¼Œè§£ç è¯·æ±‚ä½“ã€‚å›è°ƒè¢«è°ƒç”¨çš„ A æ–¹æ³•ï¼Œå”¤é†’æ­£åœ¨ç­‰å¾…å“åº”ï¼ˆé˜»å¡ï¼‰çš„å®¢æˆ·ç«¯è°ƒç”¨å¹¶è¿”å›å“åº”ç»“æœ")]),t._v(" "),_("h3",{attrs:{id:"ç¤ºä¾‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ç¤ºä¾‹"}},[t._v("#")]),t._v(" ç¤ºä¾‹")]),t._v(" "),_("p",[t._v("åœ¨è¿™ä¸€å°èŠ‚ï¼Œå°†ç®€å•çš„ç»™å¤§å®¶å±•ç¤º gRPC çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç¤ºä¾‹ä»£ç ï¼Œå¸Œæœ›å¤§å®¶å…ˆæœ‰ä¸€ä¸ªåŸºç¡€çš„å°è±¡ï¼Œå°†ä¼šåœ¨ä¸‹ä¸€ç« èŠ‚è¯¦ç»†ä»‹ç» ğŸ¤”")]),t._v(" "),_("h4",{attrs:{id:"æ„å»ºå’Œå¯åŠ¨æœåŠ¡ç«¯"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ„å»ºå’Œå¯åŠ¨æœåŠ¡ç«¯"}},[t._v("#")]),t._v(" æ„å»ºå’Œå¯åŠ¨æœåŠ¡ç«¯")]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v('lis, err := net.Listen("tcp", fmt.Sprintf(":%d", *port))\nif err != nil {\n        log.Fatalf("failed to listen: %v", err)\n}\n\ngrpcServer := grpc.NewServer()\n...\npb.RegisterSearchServer(grpcServer, &SearchServer{})\ngrpcServer.Serve(lis)\n')])])]),_("p",[t._v("1ã€ç›‘å¬æŒ‡å®š TCP ç«¯å£ï¼Œç”¨äºæ¥å—å®¢æˆ·ç«¯è¯·æ±‚")]),t._v(" "),_("p",[t._v("2ã€åˆ›å»º gRPC Server çš„å®ä¾‹å¯¹è±¡")]),t._v(" "),_("p",[t._v("3ã€gRPC Server å†…éƒ¨æœåŠ¡å’Œè·¯ç”±çš„æ³¨å†Œ")]),t._v(" "),_("p",[t._v("4ã€Serve() è°ƒç”¨æœåŠ¡å™¨ä»¥æ‰§è¡Œé˜»å¡ç­‰å¾…ï¼Œç›´åˆ°è¿›ç¨‹è¢«ç»ˆæ­¢æˆ–è¢« Stop() è°ƒç”¨")]),t._v(" "),_("h4",{attrs:{id:"åˆ›å»ºå®¢æˆ·ç«¯"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#åˆ›å»ºå®¢æˆ·ç«¯"}},[t._v("#")]),t._v(" åˆ›å»ºå®¢æˆ·ç«¯")]),t._v(" "),_("div",{staticClass:"language- extra-class"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v('var opts []grpc.DialOption\n...\nconn, err := grpc.Dial(*serverAddr, opts...)\nif err != nil {\n    log.Fatalf("fail to dial: %v", err)\n}\n\ndefer conn.Close()\nclient := pb.NewSearchClient(conn)\n...\n')])])]),_("p",[t._v("1ã€åˆ›å»º gRPC Channel ä¸ gRPC Server è¿›è¡Œé€šä¿¡ï¼ˆéœ€æœåŠ¡å™¨åœ°å€å’Œç«¯å£ä½œä¸ºå‚æ•°ï¼‰")]),t._v(" "),_("p",[t._v("2ã€è®¾ç½® DialOptions å‡­è¯ï¼ˆä¾‹å¦‚ï¼ŒTLSï¼ŒGCEå‡­æ®ï¼ŒJWTå‡­è¯ï¼‰")]),t._v(" "),_("p",[t._v("3ã€åˆ›å»º Search Client Stub")]),t._v(" "),_("p",[t._v("4ã€è°ƒç”¨å¯¹åº”çš„æœåŠ¡æ–¹æ³•")]),t._v(" "),_("h2",{attrs:{id:"æ€è€ƒé¢˜"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ€è€ƒé¢˜"}},[t._v("#")]),t._v(" æ€è€ƒé¢˜")]),t._v(" "),_("p",[t._v("1ã€ä»€ä¹ˆåœºæ™¯ä¸‹ä¸é€‚åˆä½¿ç”¨ Protobufï¼Œè€Œé€‚åˆä½¿ç”¨ JSONã€XMLï¼Ÿ")]),t._v(" "),_("p",[t._v("2ã€Protobuf ä¸€èŠ‚ä¸­æåˆ°çš„ packed ç¼–ç ï¼Œæ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),_("h2",{attrs:{id:"æ€»ç»“"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),_("p",[t._v("åœ¨å¼€ç¯‡å†…å®¹ä¸­ï¼Œæˆ‘åˆ©ç”¨äº†å°½é‡ç®€çŸ­çš„æè¿°ç»™ä½ ä»‹ç»äº†æ¥ä¸‹æ¥æ‰€å¿…é¡»ã€å¿…è¦çš„çŸ¥è¯†ç‚¹\nå¸Œæœ›ä½ èƒ½å¤Ÿæœ‰æ‰€æ”¶è·ï¼Œå»ºè®®èƒ½åˆ°æˆ‘ç»™çš„å‚è€ƒèµ„æ–™å¤„è¿›è¡Œæ·±å…¥å­¦ä¹ ï¼Œæ˜¯æœ€å¥½çš„äº†")]),t._v(" "),_("h2",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[t._v("#")]),t._v(" å‚è€ƒèµ„æ–™")]),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://developers.google.com/protocol-buffers/docs/proto3",target:"_blank",rel:"noopener noreferrer"}},[t._v("Protocol Buffers"),_("OutboundLink")],1)]),t._v(" "),_("li",[_("a",{attrs:{href:"https://grpc.io/docs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("gRPC"),_("OutboundLink")],1)])])])}),[],!1,null,null,null);v.default=e.exports}}]);