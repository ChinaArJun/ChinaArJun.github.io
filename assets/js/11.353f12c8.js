(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{369:function(t,e,s){t.exports=s.p+"assets/img/netlify-new-site.7ad2416c.jpg"},370:function(t,e,s){t.exports=s.p+"assets/img/netlify-2.b768805e.jpg"},371:function(t,e,s){t.exports=s.p+"assets/img/netlify-step2.9698742e.jpg"},372:function(t,e,s){t.exports=s.p+"assets/img/netlify-repo-access.6276bd5f.jpg"},373:function(t,e,s){t.exports=s.p+"assets/img/netlify-build-options.460fb64a.jpg"},374:function(t,e,s){t.exports=s.p+"assets/img/netlify-ok.32efe5f6.png"},375:function(t,e,s){t.exports=s.p+"assets/img/netlify-custom-domain.f4500126.jpg"},654:function(t,e,s){"use strict";s.r(e);var a=s(44),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"使用-netlify-托管你的前端应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-netlify-托管你的前端应用"}},[t._v("#")]),t._v(" 使用 netlify 托管你的前端应用")]),t._v(" "),a("p",[t._v("我前几天的一篇文章 "),a("a",{attrs:{href:"https://blog.zhequtao.com/op/if-you-want-a-blog",target:"_blank",rel:"noopener noreferrer"}},[t._v("如果你想搭建一个博客"),a("OutboundLink")],1),t._v("，其中提到了使用 "),a("code",[t._v("netlify")]),t._v(" 做博客托管服务。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.netlify.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("netlify"),a("OutboundLink")],1),t._v(" 可以为你的静态资源做托管，就是说它可以托管你的前端应用，就像 "),a("code",[t._v("github page")]),t._v(" 那样。不过，它不又只像 "),a("code",[t._v("github page")]),t._v(" 那么功能单一，它可以做更多的事情")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("CI/CD")]),t._v(": 当你 push 代码到仓库的特定分支会自动部署")]),t._v(" "),a("li",[a("code",[t._v("http headers")]),t._v(": 你可以定制资源的 "),a("code",[t._v("http header")]),t._v("，从而可以做"),a("strong",[t._v("缓存优化")]),t._v("等")]),t._v(" "),a("li",[a("code",[t._v("http redirect/rewrite")]),t._v(": 如果一个 "),a("code",[t._v("nginx")]),t._v("，这样可以配置 "),a("code",[t._v("/api")]),t._v("，解决跨域问题")]),t._v(" "),a("li",[a("code",[t._v("二级域名")]),t._v(": 你如果没有自己的域名，可以使用它的任意二级域名-只要没有被占用，这比 "),a("code",[t._v("github page")]),t._v(" 多仓库只能用 "),a("code",[t._v("/path")]),t._v(" 要好很多")]),t._v(" "),a("li",[a("code",[t._v("CDN")]),t._v(": 把你的静态资源推到 CDN，虽然是国外的")]),t._v(" "),a("li",[a("code",[t._v("https")]),t._v(": 为你准备证书，当然使用的是 "),a("code",[t._v("lets encrypt")])]),t._v(" "),a("li",[a("code",[t._v("Prerender")]),t._v(": 结合 "),a("code",[t._v("SPA")]),t._v("，做预渲染")])]),t._v(" "),a("p",[a("strong",[t._v("它做的是整个前端部署工作流的事情，而且很多事情都是自动完成的。")])]),t._v(" "),a("p",[t._v("年初(2019/03) 我写过一篇文章: "),a("a",{attrs:{href:"https://blog.zhequtao.com/op/deploy-fe-with-docker",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何使用 docker 高效部署前端应用"),a("OutboundLink")],1),t._v("。其中讲了如何使用一个 "),a("code",[t._v("nginx")]),t._v(" 镜像优化构建前端静态资源的过程，而这只是前端部署工作流的一小部分，这种方案更加适合小型公司。")]),t._v(" "),a("p",[t._v("而在大型公司，基础设施更加健全，对于前端部署很有可能有一个部署平台，如同 "),a("code",[t._v("netlify")]),t._v(" 一样："),a("strong",[t._v("你根本不需要构建镜像，你只需要写一个极其简单的配置文件。")])]),t._v(" "),a("p",[t._v("本篇文章讲解如何结合 "),a("code",[t._v("netlify")]),t._v(" 去部署你 "),a("code",[t._v("github")]),t._v(" 上的前端应用。将以我的个人仓库 "),a("a",{attrs:{href:"https://github.com/ChinaArJun/cheat-sheets",target:"_blank",rel:"noopener noreferrer"}},[t._v("cheat-sheets"),a("OutboundLink")],1),t._v(" 部署到 "),a("a",{attrs:{href:"https://cheatsheeets.netlify.com/git",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cheatsheeets.netlify.com/git"),a("OutboundLink")],1),t._v(" 作为示例进行演示。")]),t._v(" "),a("blockquote",[a("p",[t._v("当然 "),a("code",[t._v("gitlab")]),t._v(" 也可以结合 "),a("code",[t._v("netlify")]),t._v(" 使用")])]),t._v(" "),a("ul",[a("li",[t._v("本文地址: "),a("a",{attrs:{href:"https://shanue.tech/op/deploy-fe-with-netlify",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 netlify 部署你的前端应用"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("系列文章: "),a("a",{attrs:{href:"https://blog.zhequtao.com/op",target:"_blank",rel:"noopener noreferrer"}},[t._v("个人服务器运维指南"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"新建站点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建站点"}},[t._v("#")]),t._v(" 新建站点")]),t._v(" "),a("h3",{attrs:{id:"新建站点-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建站点-2"}},[t._v("#")]),t._v(" 新建站点")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("github")]),t._v(" 授权登录 "),a("a",{attrs:{href:"https://www.netlify.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("netlify"),a("OutboundLink")],1),t._v("。在主页点击 "),a("code",[t._v("New site from git")]),t._v(" 按钮，新建站点")]),t._v(" "),a("p",[a("img",{attrs:{src:s(369),alt:"新建站点"}})]),t._v(" "),a("h3",{attrs:{id:"选择一个仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选择一个仓库"}},[t._v("#")]),t._v(" 选择一个仓库")]),t._v(" "),a("p",[a("img",{attrs:{src:s(370),alt:"from github"}})]),t._v(" "),a("p",[a("img",{attrs:{src:s(371),alt:"配置 netlify"}})]),t._v(" "),a("p",[a("img",{attrs:{src:s(372),alt:"选择一个仓库"}})]),t._v(" "),a("h3",{attrs:{id:"构建选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建选项"}},[t._v("#")]),t._v(" 构建选项")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("build command")]),t._v(": 如何生成静态文件，一般会是 "),a("code",[t._v("npm run build")])]),t._v(" "),a("li",[a("code",[t._v("publish directory")]),t._v(": 静态文件目录，一般会是 "),a("code",[t._v("public/dist")]),t._v(" 等")])]),t._v(" "),a("p",[t._v("另外也可以作为配置文件，参考下一节")]),t._v(" "),a("p",[a("img",{attrs:{src:s(373),alt:"选择一个仓库"}})]),t._v(" "),a("h3",{attrs:{id:"部署成功"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署成功"}},[t._v("#")]),t._v(" 部署成功")]),t._v(" "),a("p",[a("img",{attrs:{src:s(374),alt:"部署成功"}})]),t._v(" "),a("h3",{attrs:{id:"配置二级域名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置二级域名"}},[t._v("#")]),t._v(" 配置二级域名")]),t._v(" "),a("p",[a("img",{attrs:{src:s(375),alt:"配置二级域名"}})]),t._v(" "),a("p",[t._v("此时通过 "),a("a",{attrs:{href:"https://cheatsheeets.netlify.com/git",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cheatsheeets.netlify.com/git"),a("OutboundLink")],1),t._v(" 访问页面，成功部署")]),t._v(" "),a("h2",{attrs:{id:"配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[t._v("#")]),t._v(" 配置文件")]),t._v(" "),a("p",[t._v("配置文件可以配置你的 http 的 "),a("code",[t._v("header")]),t._v("，"),a("code",[t._v("rewrite")]),t._v("，"),a("code",[t._v("redirect")]),t._v(" 等，可以参考 "),a("a",{attrs:{href:"https://docs.netlify.com/configure-builds/file-based-configuration/#headers",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("以下我是的博客 "),a("a",{attrs:{href:"https://github.com/arjun/blog",target:"_blank",rel:"noopener noreferrer"}},[t._v("ChinaArJun/blog"),a("OutboundLink")],1),t._v(" 的配置文件")]),t._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("base")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("publish")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".vuepress/dist"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("command")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run build"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/*"')]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers.values")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("cache-control")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max-age=7200"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/assets/*"')]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers.values")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("cache-control")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max-age=31536000"')]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("build.publish")]),t._v(": 静态文件目录")]),t._v(" "),a("li",[a("code",[t._v("build.command")]),t._v(": 如何生成文件的命令")])]),t._v(" "),a("p",[t._v("另外，我把 "),a("code",[t._v("/assets/*")]),t._v(" 做了永久缓存，因为里边都是带了 hash 值的静态文件")]),t._v(" "),a("h2",{attrs:{id:"配置-api-解决跨域问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-api-解决跨域问题"}},[t._v("#")]),t._v(" 配置 api 解决跨域问题")]),t._v(" "),a("p",[t._v("另外，如果你的前端应用需要配置代理服务器，比如 "),a("code",[t._v("/api")]),t._v(" 与 "),a("code",[t._v("/graphql")]),t._v("，可以设置 "),a("code",[t._v("redirects")]),t._v("。算是替代了一部分 "),a("code",[t._v("nginx")]),t._v(" 的功能")]),t._v(" "),a("div",{staticClass:"language-toml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-toml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("redirects")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/graphql/"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("to")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://graphql.blog.zhequtao.com"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("status")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("force")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("headers")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token key property"}},[t._v("X-From")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Netlify"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[t._v("#")]),t._v(" 小结")]),t._v(" "),a("p",[t._v("如果你有个人博客，个人作品或者应用，那么你可以试一下 "),a("code",[t._v("netlify")]),t._v("。由于服务器在国外，他可能有些慢，不过你可以试试国内厂商的 CDN")]),t._v(" "),a("h2",{attrs:{id:"相关文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关文章"}},[t._v("#")]),t._v(" 相关文章")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.zhequtao.com/op/deploy-fe-with-docker",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何使用 docker 高效部署前端应用"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://blog.zhequtao.com/op/if-you-want-a-blog",target:"_blank",rel:"noopener noreferrer"}},[t._v("如果你只想搭建一个博客"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=r.exports}}]);