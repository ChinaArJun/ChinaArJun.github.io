(window.webpackJsonp=window.webpackJsonp||[]).push([[560],{1157:function(n,t,e){"use strict";e.r(t);var a=e(44),r=Object(a.a)({},(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("p",[e("code",[n._v("Go")]),n._v(" 语言并没有设计诸如虚函数、纯虚函数、继承、多重继承等概念，但它通过接口却非常优雅地支持了面向对象的特性。")]),n._v(" "),e("p",[n._v("多态是一种运行期的行为，它有以下几个特点：")]),n._v(" "),e("blockquote",[e("ol",[e("li",[n._v("一种类型具有多种类型的能力")]),n._v(" "),e("li",[n._v("允许不同的对象对同一消息做出灵活的反应")]),n._v(" "),e("li",[n._v("以一种通用的方式对待个使用的对象")]),n._v(" "),e("li",[n._v("非动态语言必须通过继承和接口的方式来实现")])])]),n._v(" "),e("p",[n._v("看一个实现了多态的代码例子：")]),n._v(" "),e("div",{staticClass:"language-golang extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v('package main\n\nimport "fmt"\n\nfunc main() {\n\tqcrao := Student{age: 18}\n\twhatJob(&qcrao)\n\n\tgrowUp(&qcrao)\n\tfmt.Println(qcrao)\n\n\tstefno := Programmer{age: 100}\n\twhatJob(stefno)\n\n\tgrowUp(stefno)\n\tfmt.Println(stefno)\n}\n\nfunc whatJob(p Person) {\n\tp.job()\n}\n\nfunc growUp(p Person) {\n\tp.growUp()\n}\n\ntype Person interface {\n\tjob()\n\tgrowUp()\n}\n\ntype Student struct {\n\tage int\n}\n\nfunc (p Student) job() {\n\tfmt.Println("I am a student.")\n\treturn\n}\n\nfunc (p *Student) growUp() {\n\tp.age += 1\n\treturn\n}\n\ntype Programmer struct {\n\tage int\n}\n\nfunc (p Programmer) job() {\n\tfmt.Println("I am a programmer.")\n\treturn\n}\n\nfunc (p Programmer) growUp() {\n\t// 程序员老得太快 ^_^\n\tp.age += 10\n\treturn\n}\n')])])]),e("p",[n._v("代码里先定义了 1 个 "),e("code",[n._v("Person")]),n._v(" 接口，包含两个函数：")]),n._v(" "),e("div",{staticClass:"language-golang extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("job()\ngrowUp()\n")])])]),e("p",[n._v("然后，又定义了 2 个结构体，"),e("code",[n._v("Student")]),n._v(" 和 "),e("code",[n._v("Programmer")]),n._v("，同时，类型 "),e("code",[n._v("*Student")]),n._v("、"),e("code",[n._v("Programmer")]),n._v(" 实现了 "),e("code",[n._v("Person")]),n._v(" 接口定义的两个函数。注意，"),e("code",[n._v("*Student")]),n._v(" 类型实现了接口， "),e("code",[n._v("Student")]),n._v(" 类型却没有。")]),n._v(" "),e("p",[n._v("之后，我又定义了函数参数是 "),e("code",[n._v("Person")]),n._v(" 接口的两个函数：")]),n._v(" "),e("div",{staticClass:"language-golang extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("func whatJob(p Person)\nfunc growUp(p Person)\n")])])]),e("p",[e("code",[n._v("main")]),n._v(" 函数里先生成 "),e("code",[n._v("Student")]),n._v(" 和 "),e("code",[n._v("Programmer")]),n._v(" 的对象，再将它们分别传入到函数 "),e("code",[n._v("whatJob")]),n._v(" 和 "),e("code",[n._v("growUp")]),n._v("。函数中，直接调用接口函数，实际执行的时候是看最终传入的实体类型是什么，调用的是实体类型实现的函数。于是，不同对象针对同一消息就有多种表现，"),e("code",[n._v("多态")]),n._v("就实现了。")]),n._v(" "),e("p",[n._v("更深入一点来说的话，在函数 "),e("code",[n._v("whatJob()")]),n._v(" 或者 "),e("code",[n._v("growUp()")]),n._v(" 内部，接口 "),e("code",[n._v("person")]),n._v(" 绑定了实体类型 "),e("code",[n._v("*Student")]),n._v(" 或者 "),e("code",[n._v("Programmer")]),n._v("。根据前面分析的 "),e("code",[n._v("iface")]),n._v(" 源码，这里会直接调用 "),e("code",[n._v("fun")]),n._v(" 里保存的函数，类似于： "),e("code",[n._v("s.tab->fun[0]")]),n._v("，而因为 "),e("code",[n._v("fun")]),n._v(" 数组里保存的是实体类型实现的函数，所以当函数传入不同的实体类型时，调用的实际上是不同的函数实现，从而实现多态。")]),n._v(" "),e("p",[n._v("运行一下代码：")]),n._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[n._v("I am a student.\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("19")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\nI am a programmer.\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("100")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])])]),e("h1",{attrs:{id:"参考资料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[n._v("#")]),n._v(" 参考资料")]),n._v(" "),e("p",[n._v("【各种面向对象的名词】https://cyent.github.io/golang/other/oo/")]),n._v(" "),e("p",[n._v("【多态与鸭子类型】https://www.jb51.net/article/116025.htm")])])}),[],!1,null,null,null);t.default=r.exports}}]);