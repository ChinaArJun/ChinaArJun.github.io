(window.webpackJsonp=window.webpackJsonp||[]).push([[296],{874:function(t,e,n){"use strict";n.r(e);var a=n(44),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"ä¼˜åŒ–é…ç½®ç»“æ„åŠå®ç°å›¾ç‰‡ä¸Šä¼ "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–é…ç½®ç»“æ„åŠå®ç°å›¾ç‰‡ä¸Šä¼ "}},[t._v("#")]),t._v(" ä¼˜åŒ–é…ç½®ç»“æ„åŠå®ç°å›¾ç‰‡ä¸Šä¼ ")]),t._v(" "),n("p",[t._v("é¡¹ç›®åœ°å€ï¼šhttps://github.com/EDDYCJY/go-gin-example")]),t._v(" "),n("h2",{attrs:{id:"çŸ¥è¯†ç‚¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#çŸ¥è¯†ç‚¹"}},[t._v("#")]),t._v(" çŸ¥è¯†ç‚¹")]),t._v(" "),n("ul",[n("li",[t._v("é‡æ„ã€è°ƒæ•´ç»“æ„")])]),t._v(" "),n("h2",{attrs:{id:"æœ¬æ–‡ç›®æ ‡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœ¬æ–‡ç›®æ ‡"}},[t._v("#")]),t._v(" æœ¬æ–‡ç›®æ ‡")]),t._v(" "),n("p",[t._v("è¿™ä¸ªåº”ç”¨ç¨‹åºè·‘äº†é‚£ä¹ˆä¹…äº†ï¼Œè¶Šæ¥è¶Šå¤§ï¼Œè¶Šæ¥è¶Šå£®ï¼Œä»¿ä½›æˆ‘ä»¬çš„äº§å“ä¸€æ ·ï¼Œç°åœ¨å®ƒéœ€è¦è¿›è¡Œå°èŒƒå›´é‡æ„äº†ï¼Œä»¥ä¾¿äºåç»­çš„ä½¿ç”¨ï¼Œè¿™éå¸¸é‡è¦ã€‚")]),t._v(" "),n("h2",{attrs:{id:"å‰è¨€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[t._v("#")]),t._v(" å‰è¨€")]),t._v(" "),n("p",[t._v("ä¸€å¤©ï¼Œäº§å“ç»ç†çªç„¶è·Ÿä½ è¯´æ–‡ç« åˆ—è¡¨ï¼Œæ²¡æœ‰å°é¢å›¾ï¼Œä¸å¤Ÿç¾è§‚ï¼Œï¼ï¼‰&ï¿¥*ï¼&ï¼‰#&ï¿¥*ï¼åŠ ä¸€ä¸ªå§ï¼Œå‡ åˆ†é’Ÿçš„äº‹")]),t._v(" "),n("p",[t._v("ä½ æ‰“å¼€ä½ çš„ç¨‹åºï¼Œåˆ†æäº†ä¸€æ³¢å†™äº†ä¸ªæ¸…å•ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("ä¼˜åŒ–é…ç½®ç»“æ„ï¼ˆå› ä¸ºé…ç½®é¡¹è¶Šæ¥è¶Šå¤šï¼‰")]),t._v(" "),n("li",[t._v("æŠ½ç¦» åŸ logging çš„ File ä¾¿äºå…¬ç”¨ï¼ˆloggingã€upload å„ä¿æœ‰ä¸€ä»½å¹¶ä¸åˆé€‚ï¼‰")]),t._v(" "),n("li",[t._v("å®ç°ä¸Šä¼ å›¾ç‰‡æ¥å£ï¼ˆéœ€é™åˆ¶æ–‡ä»¶æ ¼å¼ã€å¤§å°ï¼‰")]),t._v(" "),n("li",[t._v("ä¿®æ”¹æ–‡ç« æ¥å£ï¼ˆéœ€æ”¯æŒå°é¢åœ°å€å‚æ•°ï¼‰")]),t._v(" "),n("li",[t._v("å¢åŠ  blog_article ï¼ˆæ–‡ç« ï¼‰çš„æ•°æ®åº“å­—æ®µ")]),t._v(" "),n("li",[t._v("å®ç° http.FileServer")])]),t._v(" "),n("p",[t._v("å—¯ï¼Œä½ å‘ç°è¦è¾ƒä¼˜çš„è¯ï¼Œéœ€è¦è°ƒæ•´éƒ¨åˆ†çš„åº”ç”¨ç¨‹åºç»“æ„ï¼Œå› ä¸ºåŠŸèƒ½è¶Šæ¥è¶Šå¤šï¼ŒåŸæœ¬çš„è®¾è®¡ä¹Ÿè¦è·Ÿä¸ŠèŠ‚å¥")]),t._v(" "),n("p",[t._v("ä¹Ÿå°±æ˜¯åœ¨é€‚å½“çš„æ—¶å€™ï¼ŒåŠæ—¶ä¼˜åŒ–")]),t._v(" "),n("h2",{attrs:{id:"ä¼˜åŒ–é…ç½®ç»“æ„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–é…ç½®ç»“æ„"}},[t._v("#")]),t._v(" ä¼˜åŒ–é…ç½®ç»“æ„")]),t._v(" "),n("h3",{attrs:{id:"ä¸€ã€è®²è§£"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€è®²è§£"}},[t._v("#")]),t._v(" ä¸€ã€è®²è§£")]),t._v(" "),n("p",[t._v("åœ¨å…ˆå‰ç« èŠ‚ä¸­ï¼Œé‡‡ç”¨äº†ç›´æ¥è¯»å– KEY çš„æ–¹å¼å»å­˜å‚¨é…ç½®é¡¹ï¼Œè€Œæœ¬æ¬¡éœ€æ±‚ä¸­ï¼Œéœ€è¦å¢åŠ å›¾ç‰‡çš„é…ç½®é¡¹ï¼Œæ€»ä½“å°±æœ‰äº›å†—ä½™äº†")]),t._v(" "),n("p",[t._v("æˆ‘ä»¬é‡‡ç”¨ä»¥ä¸‹è§£å†³æ–¹æ³•ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("æ˜ å°„ç»“æ„ä½“ï¼šä½¿ç”¨ MapTo æ¥è®¾ç½®é…ç½®å‚æ•°")]),t._v(" "),n("li",[t._v("é…ç½®ç»Ÿç®¡ï¼šæ‰€æœ‰çš„é…ç½®é¡¹ç»Ÿç®¡åˆ° setting ä¸­")])]),t._v(" "),n("h4",{attrs:{id:"æ˜ å°„ç»“æ„ä½“ï¼ˆç¤ºä¾‹ï¼‰"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ˜ å°„ç»“æ„ä½“ï¼ˆç¤ºä¾‹ï¼‰"}},[t._v("#")]),t._v(" æ˜ å°„ç»“æ„ä½“ï¼ˆç¤ºä¾‹ï¼‰")]),t._v(" "),n("p",[t._v("åœ¨ go-ini ä¸­å¯ä»¥é‡‡ç”¨ MapTo çš„æ–¹å¼æ¥æ˜ å°„ç»“æ„ä½“ï¼Œä¾‹å¦‚ï¼š")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Server "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tRunMode "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n\tHttpPort "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v("\n\tReadTimeout time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Duration\n\tWriteTimeout time"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Duration\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" ServerSetting "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("Server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    Cfg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" ini"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Load")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conf/app.ini"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tlog"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fatalf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"Fail to parse 'conf/app.ini': %v\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\n\terr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Cfg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Section")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"server"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("MapTo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ServerSetting"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tlog"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fatalf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Cfg.MapTo ServerSetting err: %v"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå¯ä»¥æ³¨æ„ ServerSetting å–äº†åœ°å€ï¼Œä¸ºä»€ä¹ˆ MapTo å¿…é¡»åœ°å€å…¥å‚å‘¢ï¼Ÿ")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// MapTo maps section to given struct.\nfunc (s *Section) MapTo(v interface{}) error {\n\ttyp := reflect.TypeOf(v)\n\tval := reflect.ValueOf(v)\n\tif typ.Kind() == reflect.Ptr {\n\t\ttyp = typ.Elem()\n\t\tval = val.Elem()\n\t} else {\n\t\treturn errors.New("cannot map to non-pointer struct")\n\t}\n\n\treturn s.mapTo(val, false)\n}\n')])])]),n("p",[t._v("åœ¨ MapTo ä¸­ "),n("code",[t._v("typ.Kind() == reflect.Ptr")]),t._v(" çº¦æŸäº†å¿…é¡»ä½¿ç”¨æŒ‡é’ˆï¼Œå¦åˆ™ä¼šè¿”å› "),n("code",[t._v("cannot map to non-pointer struct")]),t._v(" çš„é”™è¯¯ã€‚è¿™ä¸ªæ˜¯è¡¨é¢åŸå› ")]),t._v(" "),n("p",[t._v("æ›´å¾€å†…æ¢ç©¶ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ "),n("code",[t._v("field.Set")]),t._v(" çš„åŸå› ï¼Œå½“æ‰§è¡Œ "),n("code",[t._v("val := reflect.ValueOf(v)")]),t._v(" ï¼Œå‡½æ•°é€šè¿‡ä¼ é€’ "),n("code",[t._v("v")]),t._v(" æ‹·è´åˆ›å»ºäº† "),n("code",[t._v("val")]),t._v("ï¼Œä½†æ˜¯ "),n("code",[t._v("val")]),t._v(" çš„æ”¹å˜å¹¶ä¸èƒ½æ›´æ”¹åŸå§‹çš„ "),n("code",[t._v("v")]),t._v("ï¼Œè¦æƒ³ "),n("code",[t._v("val")]),t._v(" çš„æ›´æ”¹èƒ½ä½œç”¨åˆ° "),n("code",[t._v("v")]),t._v("ï¼Œåˆ™å¿…é¡»ä¼ é€’ "),n("code",[t._v("v")]),t._v(" çš„åœ°å€")]),t._v(" "),n("p",[t._v("æ˜¾ç„¶ go-ini é‡Œä¹Ÿæ˜¯åŒ…å«ä¿®æ”¹åŸå§‹å€¼è¿™ä¸€é¡¹åŠŸèƒ½çš„ï¼Œä½ è§‰å¾—æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ")]),t._v(" "),n("h4",{attrs:{id:"é…ç½®ç»Ÿç®¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®ç»Ÿç®¡"}},[t._v("#")]),t._v(" é…ç½®ç»Ÿç®¡")]),t._v(" "),n("p",[t._v("åœ¨å…ˆå‰çš„ç‰ˆæœ¬ä¸­ï¼Œmodels å’Œ file çš„é…ç½®æ˜¯åœ¨è‡ªå·±çš„æ–‡ä»¶ä¸­è§£æçš„ï¼Œè€Œå…¶ä»–åœ¨ setting.go ä¸­ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†å…¶åœ¨ setting ä¸­ç»Ÿä¸€æ¥ç®¡")]),t._v(" "),n("p",[t._v("ä½ å¯èƒ½ä¼šæƒ³ï¼Œç›´æ¥æŠŠä¸¤è€…çš„é…ç½®é¡¹å¤åˆ¶ç²˜è´´åˆ° setting.go çš„ init ä¸­ï¼Œä¸€ä¸‹å­å°±å®Œäº‹äº†ï¼Œæé‚£ä¹ˆéº»çƒ¦ï¼Ÿ")]),t._v(" "),n("p",[t._v("ä½†ä½ åœ¨æƒ³æƒ³ï¼Œå…ˆå‰çš„ä»£ç ä¸­å­˜åœ¨å¤šä¸ª init å‡½æ•°ï¼Œæ‰§è¡Œé¡ºåºå­˜åœ¨é—®é¢˜ï¼Œæ— æ³•è¾¾åˆ°æˆ‘ä»¬çš„è¦æ±‚ï¼Œä½ å¯ä»¥è¯•è¯•")]),t._v(" "),n("p",[t._v("ï¼ˆæ­¤å¤„æ˜¯ä¸€ä¸ªåŸºç¡€çŸ¥è¯†ç‚¹ï¼‰")]),t._v(" "),n("p",[t._v("åœ¨ Go ä¸­ï¼Œå½“å­˜åœ¨å¤šä¸ª init å‡½æ•°æ—¶ï¼Œæ‰§è¡Œé¡ºåºä¸ºï¼š")]),t._v(" "),n("ul",[n("li",[t._v("ç›¸åŒåŒ…ä¸‹çš„ init å‡½æ•°ï¼šæŒ‰ç…§æºæ–‡ä»¶ç¼–è¯‘é¡ºåºå†³å®šæ‰§è¡Œé¡ºåºï¼ˆé»˜è®¤æŒ‰æ–‡ä»¶åæ’åºï¼‰")]),t._v(" "),n("li",[t._v("ä¸åŒåŒ…ä¸‹çš„ init å‡½æ•°ï¼šæŒ‰ç…§åŒ…å¯¼å…¥çš„ä¾èµ–å…³ç³»å†³å®šå…ˆåé¡ºåº")])]),t._v(" "),n("p",[t._v("æ‰€ä»¥è¦é¿å…å¤š init çš„æƒ…å†µï¼Œ"),n("strong",[t._v("å°½é‡ç”±ç¨‹åºæŠŠæ§åˆå§‹åŒ–çš„å…ˆåé¡ºåº")])]),t._v(" "),n("h3",{attrs:{id:"äºŒã€è½å®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€è½å®"}},[t._v("#")]),t._v(" äºŒã€è½å®")]),t._v(" "),n("h4",{attrs:{id:"ä¿®æ”¹é…ç½®æ–‡ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¿®æ”¹é…ç½®æ–‡ä»¶"}},[t._v("#")]),t._v(" ä¿®æ”¹é…ç½®æ–‡ä»¶")]),t._v(" "),n("p",[t._v("æ‰“å¼€ conf/app.ini å°†é…ç½®æ–‡ä»¶ä¿®æ”¹ä¸ºå¤§é©¼å³°å‘½åï¼Œå¦å¤–æˆ‘ä»¬å¢åŠ äº† 5 ä¸ªé…ç½®é¡¹ç”¨äºä¸Šä¼ å›¾ç‰‡çš„åŠŸèƒ½ï¼Œ4 ä¸ªæ–‡ä»¶æ—¥å¿—æ–¹é¢çš„é…ç½®é¡¹")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[app]\nPageSize = 10\nJwtSecret = 233\n\nRuntimeRootPath = runtime/\n\nImagePrefixUrl = http://127.0.0.1:8000\nImageSavePath = upload/images/\n# MB\nImageMaxSize = 5\nImageAllowExts = .jpg,.jpeg,.png\n\nLogSavePath = logs/\nLogSaveName = log\nLogFileExt = log\nTimeFormat = 20060102\n\n[server]\n#debug or release\nRunMode = debug\nHttpPort = 8000\nReadTimeout = 60\nWriteTimeout = 60\n\n[database]\nType = mysql\nUser = root\nPassword = rootroot\nHost = 127.0.0.1:3306\nName = blog\nTablePrefix = blog_\n")])])]),n("h4",{attrs:{id:"ä¼˜åŒ–é…ç½®è¯»å–åŠè®¾ç½®åˆå§‹åŒ–é¡ºåº"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¼˜åŒ–é…ç½®è¯»å–åŠè®¾ç½®åˆå§‹åŒ–é¡ºåº"}},[t._v("#")]),t._v(" ä¼˜åŒ–é…ç½®è¯»å–åŠè®¾ç½®åˆå§‹åŒ–é¡ºåº")]),t._v(" "),n("h5",{attrs:{id:"ç¬¬ä¸€æ­¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸€æ­¥"}},[t._v("#")]),t._v(" ç¬¬ä¸€æ­¥")]),t._v(" "),n("p",[t._v("å°†æ•£è½åœ¨å…¶ä»–æ–‡ä»¶é‡Œçš„é…ç½®éƒ½åˆ æ‰ï¼Œ"),n("strong",[t._v("ç»Ÿä¸€åœ¨ setting ä¸­å¤„ç†")]),t._v("ä»¥åŠ"),n("strong",[t._v("ä¿®æ”¹ init å‡½æ•°ä¸º Setup æ–¹æ³•")])]),t._v(" "),n("p",[t._v("æ‰“å¼€ pkg/setting/setting.go æ–‡ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('package setting\n\nimport (\n\t"log"\n\t"time"\n\n\t"github.com/go-ini/ini"\n)\n\ntype App struct {\n\tJwtSecret string\n\tPageSize int\n\tRuntimeRootPath string\n\n\tImagePrefixUrl string\n\tImageSavePath string\n\tImageMaxSize int\n\tImageAllowExts []string\n\n\tLogSavePath string\n\tLogSaveName string\n\tLogFileExt string\n\tTimeFormat string\n}\n\nvar AppSetting = &App{}\n\ntype Server struct {\n\tRunMode string\n\tHttpPort int\n\tReadTimeout time.Duration\n\tWriteTimeout time.Duration\n}\n\nvar ServerSetting = &Server{}\n\ntype Database struct {\n\tType string\n\tUser string\n\tPassword string\n\tHost string\n\tName string\n\tTablePrefix string\n}\n\nvar DatabaseSetting = &Database{}\n\nfunc Setup() {\n\tCfg, err := ini.Load("conf/app.ini")\n\tif err != nil {\n\t\tlog.Fatalf("Fail to parse \'conf/app.ini\': %v", err)\n\t}\n\n\terr = Cfg.Section("app").MapTo(AppSetting)\n\tif err != nil {\n\t\tlog.Fatalf("Cfg.MapTo AppSetting err: %v", err)\n\t}\n\n\tAppSetting.ImageMaxSize = AppSetting.ImageMaxSize * 1024 * 1024\n\n\terr = Cfg.Section("server").MapTo(ServerSetting)\n\tif err != nil {\n\t\tlog.Fatalf("Cfg.MapTo ServerSetting err: %v", err)\n\t}\n\n\tServerSetting.ReadTimeout = ServerSetting.ReadTimeout * time.Second\n\tServerSetting.WriteTimeout = ServerSetting.ReadTimeout * time.Second\n\n\terr = Cfg.Section("database").MapTo(DatabaseSetting)\n\tif err != nil {\n\t\tlog.Fatalf("Cfg.MapTo DatabaseSetting err: %v", err)\n\t}\n}\n')])])]),n("p",[t._v("åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åšäº†å¦‚ä¸‹å‡ ä»¶äº‹ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("ç¼–å†™ä¸é…ç½®é¡¹ä¿æŒä¸€è‡´çš„ç»“æ„ä½“ï¼ˆAppã€Serverã€Databaseï¼‰")]),t._v(" "),n("li",[t._v("ä½¿ç”¨ MapTo å°†é…ç½®é¡¹æ˜ å°„åˆ°ç»“æ„ä½“ä¸Š")]),t._v(" "),n("li",[t._v("å¯¹ä¸€äº›éœ€ç‰¹æ®Šè®¾ç½®çš„é…ç½®é¡¹è¿›è¡Œå†èµ‹å€¼")])]),t._v(" "),n("p",[n("strong",[t._v("éœ€è¦ä½ å»åšçš„äº‹ï¼š")])]),t._v(" "),n("ul",[n("li",[t._v("å°† "),n("a",{attrs:{href:"https://github.com/EDDYCJY/go-gin-example/blob/a338ddec103c9506b4c7ed16d9f5386040d99b4b/models/models.go#L23",target:"_blank",rel:"noopener noreferrer"}},[t._v("models.go"),n("OutboundLink")],1),t._v("ã€"),n("a",{attrs:{href:"https://github.com/EDDYCJY/go-gin-example/blob/a338ddec103c9506b4c7ed16d9f5386040d99b4b/pkg/setting/setting.go#L23",target:"_blank",rel:"noopener noreferrer"}},[t._v("setting.go"),n("OutboundLink")],1),t._v("ã€"),n("a",{attrs:{href:"https://github.com/EDDYCJY/go-gin-example/blob/a338ddec103c9506b4c7ed16d9f5386040d99b4b/pkg/logging/log.go#L32-L37",target:"_blank",rel:"noopener noreferrer"}},[t._v("pkg/logging/log.go"),n("OutboundLink")],1),t._v(" çš„ init å‡½æ•°ä¿®æ”¹ä¸º Setup æ–¹æ³•")]),t._v(" "),n("li",[t._v("å°† "),n("a",{attrs:{href:"https://github.com/EDDYCJY/go-gin-example/blob/a338ddec103c9506b4c7ed16d9f5386040d99b4b/models/models.go#L23-L39",target:"_blank",rel:"noopener noreferrer"}},[t._v("models/models.go"),n("OutboundLink")],1),t._v(" ç‹¬ç«‹è¯»å–çš„ DB é…ç½®é¡¹åˆ é™¤ï¼Œæ”¹ä¸ºç»Ÿä¸€è¯»å– setting")]),t._v(" "),n("li",[t._v("å°† "),n("a",{attrs:{href:"https://github.com/EDDYCJY/go-gin-example/blob/a338ddec103c9506b4c7ed16d9f5386040d99b4b/pkg/logging/file.go#L10-L15",target:"_blank",rel:"noopener noreferrer"}},[t._v("pkg/logging/file"),n("OutboundLink")],1),t._v(" ç‹¬ç«‹çš„ LOG é…ç½®é¡¹åˆ é™¤ï¼Œæ”¹ä¸ºç»Ÿä¸€è¯»å– setting")])]),t._v(" "),n("p",[t._v("è¿™å‡ é¡¹æ¯”è¾ƒåŸºç¡€ï¼Œå¹¶æ²¡æœ‰è´´å‡ºæ¥ï¼Œæˆ‘å¸Œæœ›ä½ å¯ä»¥è‡ªå·±åŠ¨æ‰‹ï¼Œæœ‰é—®é¢˜çš„è¯å¯å³æ‹ "),n("a",{attrs:{href:"https://github.com/EDDYCJY/go-gin-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("é¡¹ç›®åœ°å€"),n("OutboundLink")],1)]),t._v(" "),n("h5",{attrs:{id:"ç¬¬äºŒæ­¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬äºŒæ­¥"}},[t._v("#")]),t._v(" ç¬¬äºŒæ­¥")]),t._v(" "),n("p",[t._v("åœ¨è¿™ä¸€æ­¥æˆ‘ä»¬è¦è®¾ç½®åˆå§‹åŒ–çš„æµç¨‹ï¼Œæ‰“å¼€ main.go æ–‡ä»¶ï¼Œä¿®æ”¹å†…å®¹ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('func main() {\n\tsetting.Setup()\n\tmodels.Setup()\n\tlogging.Setup()\n\n\tendless.DefaultReadTimeOut = setting.ServerSetting.ReadTimeout\n\tendless.DefaultWriteTimeOut = setting.ServerSetting.WriteTimeout\n\tendless.DefaultMaxHeaderBytes = 1 << 20\n\tendPoint := fmt.Sprintf(":%d", setting.ServerSetting.HttpPort)\n\n\tserver := endless.NewServer(endPoint, routers.InitRouter())\n\tserver.BeforeBegin = func(add string) {\n\t\tlog.Printf("Actual pid is %d", syscall.Getpid())\n\t}\n\n\terr := server.ListenAndServe()\n\tif err != nil {\n\t\tlog.Printf("Server err: %v", err)\n\t}\n}\n')])])]),n("p",[t._v("ä¿®æ”¹å®Œæ¯•åï¼Œå°±æˆåŠŸå°†å¤šæ¨¡å—çš„åˆå§‹åŒ–å‡½æ•°æ”¾åˆ°å¯åŠ¨æµç¨‹ä¸­äº†ï¼ˆå…ˆåé¡ºåºä¹Ÿå¯ä»¥æ§åˆ¶ï¼‰")]),t._v(" "),n("h5",{attrs:{id:"éªŒè¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éªŒè¯"}},[t._v("#")]),t._v(" éªŒè¯")]),t._v(" "),n("p",[t._v("åœ¨è¿™é‡Œä¸ºæ­¢ï¼Œé’ˆå¯¹æœ¬éœ€æ±‚çš„é…ç½®ä¼˜åŒ–å°±å®Œæ¯•äº†ï¼Œä½ éœ€è¦æ‰§è¡Œ "),n("code",[t._v("go run main.go")]),t._v(" éªŒè¯ä¸€ä¸‹ä½ çš„åŠŸèƒ½æ˜¯å¦æ­£å¸¸å“¦")]),t._v(" "),n("p",[t._v("é¡ºå¸¦ç•™ä¸ªåŸºç¡€é—®é¢˜ï¼Œå¤§å®¶å¯ä»¥æ€è€ƒä¸‹")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("ServerSetting.ReadTimeout = ServerSetting.ReadTimeout * time.Second\nServerSetting.WriteTimeout = ServerSetting.ReadTimeout * time.Second\n")])])]),n("p",[t._v("è‹¥å°† setting.go æ–‡ä»¶ä¸­çš„è¿™ä¸¤è¡Œåˆ é™¤ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ")]),t._v(" "),n("h2",{attrs:{id:"æŠ½ç¦»-file"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æŠ½ç¦»-file"}},[t._v("#")]),t._v(" æŠ½ç¦» File")]),t._v(" "),n("p",[t._v("åœ¨å…ˆå‰ç‰ˆæœ¬ä¸­ï¼Œåœ¨ "),n("a",{attrs:{href:"https://github.com/EDDYCJY/go-gin-example/blob/a338ddec103c9506b4c7ed16d9f5386040d99b4b/pkg/logging/file.go",target:"_blank",rel:"noopener noreferrer"}},[t._v("logging/file.go"),n("OutboundLink")],1),t._v(" ä¸­ä½¿ç”¨åˆ°äº† os çš„ä¸€äº›æ–¹æ³•ï¼Œæˆ‘ä»¬é€šè¿‡å‰æœŸè§„åˆ’å‘ç°ï¼Œè¿™éƒ¨åˆ†åœ¨ä¸Šä¼ å›¾ç‰‡åŠŸèƒ½ä¸­å¯ä»¥å¤ç”¨")]),t._v(" "),n("h3",{attrs:{id:"ç¬¬ä¸€æ­¥-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸€æ­¥-2"}},[t._v("#")]),t._v(" ç¬¬ä¸€æ­¥")]),t._v(" "),n("p",[t._v("åœ¨ pkg ç›®å½•ä¸‹æ–°å»º file/file.go ï¼Œå†™å…¥æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('package file\n\nimport (\n\t"os"\n\t"path"\n\t"mime/multipart"\n\t"io/ioutil"\n)\n\nfunc GetSize(f multipart.File) (int, error) {\n\tcontent, err := ioutil.ReadAll(f)\n\n\treturn len(content), err\n}\n\nfunc GetExt(fileName string) string {\n\treturn path.Ext(fileName)\n}\n\nfunc CheckExist(src string) bool {\n\t_, err := os.Stat(src)\n\n\treturn os.IsNotExist(err)\n}\n\nfunc CheckPermission(src string) bool {\n\t_, err := os.Stat(src)\n\n\treturn os.IsPermission(err)\n}\n\nfunc IsNotExistMkDir(src string) error {\n\tif notExist := CheckNotExist(src); notExist == true {\n\t\tif err := MkDir(src); err != nil {\n\t\t\treturn err\n\t\t}\n\t}\n\n\treturn nil\n}\n\nfunc MkDir(src string) error {\n\terr := os.MkdirAll(src, os.ModePerm)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\treturn nil\n}\n\nfunc Open(name string, flag int, perm os.FileMode) (*os.File, error) {\n\tf, err := os.OpenFile(name, flag, perm)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\treturn f, nil\n}\n')])])]),n("p",[t._v("åœ¨è¿™é‡Œæˆ‘ä»¬ä¸€å…±å°è£…äº† 7ä¸ª æ–¹æ³•")]),t._v(" "),n("ul",[n("li",[t._v("GetSizeï¼šè·å–æ–‡ä»¶å¤§å°")]),t._v(" "),n("li",[t._v("GetExtï¼šè·å–æ–‡ä»¶åç¼€")]),t._v(" "),n("li",[t._v("CheckExistï¼šæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨")]),t._v(" "),n("li",[t._v("CheckPermissionï¼šæ£€æŸ¥æ–‡ä»¶æƒé™")]),t._v(" "),n("li",[t._v("IsNotExistMkDirï¼šå¦‚æœä¸å­˜åœ¨åˆ™æ–°å»ºæ–‡ä»¶å¤¹")]),t._v(" "),n("li",[t._v("MkDirï¼šæ–°å»ºæ–‡ä»¶å¤¹")]),t._v(" "),n("li",[t._v("Openï¼šæ‰“å¼€æ–‡ä»¶")])]),t._v(" "),n("p",[t._v("åœ¨è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº† "),n("code",[t._v("mime/multipart")]),t._v(" åŒ…ï¼Œå®ƒä¸»è¦å®ç°äº† MIME çš„ multipart è§£æï¼Œä¸»è¦é€‚ç”¨äº "),n("a",{attrs:{href:"https://tools.ietf.org/html/rfc2388",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP"),n("OutboundLink")],1),t._v(" å’Œå¸¸è§æµè§ˆå™¨ç”Ÿæˆçš„ multipart ä¸»ä½“")]),t._v(" "),n("p",[t._v("multipart åˆæ˜¯ä»€ä¹ˆï¼Œ"),n("a",{attrs:{href:"https://tools.ietf.org/html/rfc2388",target:"_blank",rel:"noopener noreferrer"}},[t._v("rfc2388"),n("OutboundLink")],1),t._v(" çš„ multipart/form-data äº†è§£ä¸€ä¸‹")]),t._v(" "),n("h3",{attrs:{id:"ç¬¬äºŒæ­¥-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬äºŒæ­¥-2"}},[t._v("#")]),t._v(" ç¬¬äºŒæ­¥")]),t._v(" "),n("p",[t._v("æˆ‘ä»¬åœ¨ç¬¬ä¸€æ­¥å·²ç»å°† file é‡æ–°å°è£…äº†ä¸€å±‚ï¼Œåœ¨è¿™ä¸€æ­¥æˆ‘ä»¬å°†åŸå…ˆ logging åŒ…çš„æ–¹æ³•éƒ½ä¿®æ”¹æ‰")]),t._v(" "),n("p",[t._v("1ã€æ‰“å¼€ pkg/logging/file.go æ–‡ä»¶ï¼Œä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('package logging\n\nimport (\n\t"fmt"\n\t"os"\n\t"time"\n\n\t"github.com/EDDYCJY/go-gin-example/pkg/setting"\n\t"github.com/EDDYCJY/go-gin-example/pkg/file"\n)\n\nfunc getLogFilePath() string {\n\treturn fmt.Sprintf("%s%s", setting.AppSetting.RuntimeRootPath, setting.AppSetting.LogSavePath)\n}\n\nfunc getLogFileName() string {\n\treturn fmt.Sprintf("%s%s.%s",\n\t\tsetting.AppSetting.LogSaveName,\n\t\ttime.Now().Format(setting.AppSetting.TimeFormat),\n\t\tsetting.AppSetting.LogFileExt,\n\t)\n}\n\nfunc openLogFile(fileName, filePath string) (*os.File, error) {\n\tdir, err := os.Getwd()\n\tif err != nil {\n\t\treturn nil, fmt.Errorf("os.Getwd err: %v", err)\n\t}\n\n\tsrc := dir + "/" + filePath\n\tperm := file.CheckPermission(src)\n\tif perm == true {\n\t\treturn nil, fmt.Errorf("file.CheckPermission Permission denied src: %s", src)\n\t}\n\n\terr = file.IsNotExistMkDir(src)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf("file.IsNotExistMkDir src: %s, err: %v", src, err)\n\t}\n\n\tf, err := file.Open(src + fileName, os.O_APPEND|os.O_CREATE|os.O_WRONLY, 0644)\n\tif err != nil {\n\t\treturn nil, fmt.Errorf("Fail to OpenFile :%v", err)\n\t}\n\n\treturn f, nil\n}\n')])])]),n("p",[t._v("æˆ‘ä»¬å°†å¼•ç”¨éƒ½æ”¹ä¸ºäº† file/file.go åŒ…é‡Œçš„æ–¹æ³•")]),t._v(" "),n("p",[t._v("2ã€æ‰“å¼€ pkg/logging/log.go æ–‡ä»¶ï¼Œä¿®æ”¹æ–‡ä»¶å†…å®¹:")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("package logging\n\n...\n\nfunc Setup() {\n\tvar err error\n\tfilePath := getLogFilePath()\n\tfileName := getLogFileName()\n\tF, err = openLogFile(fileName, filePath)\n\tif err != nil {\n\t\tlog.Fatalln(err)\n\t}\n\n\tlogger = log.New(F, DefaultPrefix, log.LstdFlags)\n}\n\n...\n")])])]),n("p",[t._v("ç”±äºåŸæ–¹æ³•å½¢å‚æ”¹å˜äº†ï¼Œå› æ­¤ openLogFile ä¹Ÿéœ€è¦è°ƒæ•´")]),t._v(" "),n("h2",{attrs:{id:"å®ç°ä¸Šä¼ å›¾ç‰‡æ¥å£"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ç°ä¸Šä¼ å›¾ç‰‡æ¥å£"}},[t._v("#")]),t._v(" å®ç°ä¸Šä¼ å›¾ç‰‡æ¥å£")]),t._v(" "),n("p",[t._v("è¿™ä¸€å°èŠ‚ï¼Œæˆ‘ä»¬å¼€å§‹å®ç°ä¸Šæ¬¡å›¾ç‰‡ç›¸å…³çš„ä¸€äº›æ–¹æ³•å’ŒåŠŸèƒ½")]),t._v(" "),n("p",[t._v("é¦–å…ˆéœ€è¦åœ¨ blog_article ä¸­å¢åŠ å­—æ®µ "),n("code",[t._v("cover_image_url")]),t._v("ï¼Œæ ¼å¼ä¸º "),n("code",[t._v("varchar(255) DEFAULT '' COMMENT 'å°é¢å›¾ç‰‡åœ°å€'")])]),t._v(" "),n("h3",{attrs:{id:"ç¬¬é›¶æ­¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬é›¶æ­¥"}},[t._v("#")]),t._v(" ç¬¬é›¶æ­¥")]),t._v(" "),n("p",[t._v("ä¸€èˆ¬ä¸ä¼šç›´æ¥å°†ä¸Šä¼ çš„å›¾ç‰‡åæš´éœ²å‡ºæ¥ï¼Œå› æ­¤æˆ‘ä»¬å¯¹å›¾ç‰‡åè¿›è¡Œ MD5 æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœ")]),t._v(" "),n("p",[t._v("åœ¨ util ç›®å½•ä¸‹æ–°å»º md5.goï¼Œå†™å…¥æ–‡ä»¶å†…å®¹ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('package util\n\nimport (\n\t"crypto/md5"\n\t"encoding/hex"\n)\n\nfunc EncodeMD5(value string) string {\n\tm := md5.New()\n\tm.Write([]byte(value))\n\n\treturn hex.EncodeToString(m.Sum(nil))\n}\n\n')])])]),n("h3",{attrs:{id:"ç¬¬ä¸€æ­¥-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸€æ­¥-3"}},[t._v("#")]),t._v(" ç¬¬ä¸€æ­¥")]),t._v(" "),n("p",[t._v("åœ¨å…ˆå‰æˆ‘ä»¬å·²ç»æŠŠåº•å±‚æ–¹æ³•ç»™å°è£…å¥½äº†ï¼Œå®è´¨è¿™ä¸€æ­¥ä¸ºå°è£… image çš„å¤„ç†é€»è¾‘")]),t._v(" "),n("p",[t._v("åœ¨ pkg ç›®å½•ä¸‹æ–°å»º upload/image.go æ–‡ä»¶ï¼Œå†™å…¥æ–‡ä»¶å†…å®¹ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('package upload\n\nimport (\n\t"os"\n\t"path"\n\t"log"\n\t"fmt"\n\t"strings"\n\t"mime/multipart"\n\n\t"github.com/EDDYCJY/go-gin-example/pkg/file"\n\t"github.com/EDDYCJY/go-gin-example/pkg/setting"\n\t"github.com/EDDYCJY/go-gin-example/pkg/logging"\n\t"github.com/EDDYCJY/go-gin-example/pkg/util"\n)\n\nfunc GetImageFullUrl(name string) string {\n\treturn setting.AppSetting.ImagePrefixUrl + "/" + GetImagePath() + name\n}\n\nfunc GetImageName(name string) string {\n\text := path.Ext(name)\n\tfileName := strings.TrimSuffix(name, ext)\n\tfileName = util.EncodeMD5(fileName)\n\n\treturn fileName + ext\n}\n\nfunc GetImagePath() string {\n\treturn setting.AppSetting.ImageSavePath\n}\n\nfunc GetImageFullPath() string {\n\treturn setting.AppSetting.RuntimeRootPath + GetImagePath()\n}\n\nfunc CheckImageExt(fileName string) bool {\n\text := file.GetExt(fileName)\n\tfor _, allowExt := range setting.AppSetting.ImageAllowExts {\n\t\tif strings.ToUpper(allowExt) == strings.ToUpper(ext) {\n\t\t\treturn true\n\t\t}\n\t}\n\n\treturn false\n}\n\nfunc CheckImageSize(f multipart.File) bool {\n\tsize, err := file.GetSize(f)\n\tif err != nil {\n\t\tlog.Println(err)\n\t\tlogging.Warn(err)\n\t\treturn false\n\t}\n\n\treturn size <= setting.AppSetting.ImageMaxSize\n}\n\nfunc CheckImage(src string) error {\n\tdir, err := os.Getwd()\n\tif err != nil {\n\t\treturn fmt.Errorf("os.Getwd err: %v", err)\n\t}\n\n\terr = file.IsNotExistMkDir(dir + "/" + src)\n\tif err != nil {\n\t\treturn fmt.Errorf("file.IsNotExistMkDir err: %v", err)\n\t}\n\n\tperm := file.CheckPermission(src)\n\tif perm == true {\n\t\treturn fmt.Errorf("file.CheckPermission Permission denied src: %s", src)\n\t}\n\n\treturn nil\n}\n')])])]),n("p",[t._v("åœ¨è¿™é‡Œæˆ‘ä»¬å®ç°äº† 7 ä¸ªæ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("GetImageFullUrlï¼šè·å–å›¾ç‰‡å®Œæ•´è®¿é—®URL")]),t._v(" "),n("li",[t._v("GetImageNameï¼šè·å–å›¾ç‰‡åç§°")]),t._v(" "),n("li",[t._v("GetImagePathï¼šè·å–å›¾ç‰‡è·¯å¾„")]),t._v(" "),n("li",[t._v("GetImageFullPathï¼šè·å–å›¾ç‰‡å®Œæ•´è·¯å¾„")]),t._v(" "),n("li",[t._v("CheckImageExtï¼šæ£€æŸ¥å›¾ç‰‡åç¼€")]),t._v(" "),n("li",[t._v("CheckImageSizeï¼šæ£€æŸ¥å›¾ç‰‡å¤§å°")]),t._v(" "),n("li",[t._v("CheckImageï¼šæ£€æŸ¥å›¾ç‰‡")])]),t._v(" "),n("p",[t._v("è¿™é‡ŒåŸºæœ¬æ˜¯å¯¹åº•å±‚ä»£ç çš„äºŒæ¬¡å°è£…ï¼Œä¸ºäº†æ›´çµæ´»çš„å¤„ç†ä¸€äº›å›¾ç‰‡ç‰¹æœ‰çš„é€»è¾‘ï¼Œå¹¶ä¸”æ–¹ä¾¿ä¿®æ”¹ï¼Œä¸ç›´æ¥å¯¹å¤–æš´éœ²ä¸‹å±‚")]),t._v(" "),n("h3",{attrs:{id:"ç¬¬äºŒæ­¥-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬äºŒæ­¥-3"}},[t._v("#")]),t._v(" ç¬¬äºŒæ­¥")]),t._v(" "),n("p",[t._v("è¿™ä¸€æ­¥å°†ç¼–å†™ä¸Šä¼ å›¾ç‰‡çš„ä¸šåŠ¡é€»è¾‘ï¼Œåœ¨ routers/api ç›®å½•ä¸‹ æ–°å»º upload.go æ–‡ä»¶ï¼Œå†™å…¥æ–‡ä»¶å†…å®¹:")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('package api\n\nimport (\n\t"net/http"\n\n\t"github.com/gin-gonic/gin"\n\n\t"github.com/EDDYCJY/go-gin-example/pkg/e"\n\t"github.com/EDDYCJY/go-gin-example/pkg/logging"\n\t"github.com/EDDYCJY/go-gin-example/pkg/upload"\n)\n\nfunc UploadImage(c *gin.Context) {\n\tcode := e.SUCCESS\n\tdata := make(map[string]string)\n\n\tfile, image, err := c.Request.FormFile("image")\n\tif err != nil {\n\t\tlogging.Warn(err)\n\t\tcode = e.ERROR\n\t\tc.JSON(http.StatusOK, gin.H{\n\t\t\t"code": code,\n\t\t\t"msg":  e.GetMsg(code),\n\t\t\t"data": data,\n\t\t})\n\t}\n\n\tif image == nil {\n\t\tcode = e.INVALID_PARAMS\n\t} else {\n\t\timageName := upload.GetImageName(image.Filename)\n\t\tfullPath := upload.GetImageFullPath()\n\t\tsavePath := upload.GetImagePath()\n\n\t\tsrc := fullPath + imageName\n\t\tif ! upload.CheckImageExt(imageName) || ! upload.CheckImageSize(file) {\n\t\t\tcode = e.ERROR_UPLOAD_CHECK_IMAGE_FORMAT\n\t\t} else {\n\t\t\terr := upload.CheckImage(fullPath)\n\t\t\tif err != nil {\n\t\t\t\tlogging.Warn(err)\n\t\t\t\tcode = e.ERROR_UPLOAD_CHECK_IMAGE_FAIL\n\t\t\t} else if err := c.SaveUploadedFile(image, src); err != nil {\n\t\t\t\tlogging.Warn(err)\n\t\t\t\tcode = e.ERROR_UPLOAD_SAVE_IMAGE_FAIL\n\t\t\t} else {\n\t\t\t\tdata["image_url"] = upload.GetImageFullUrl(imageName)\n\t\t\t\tdata["image_save_url"] = savePath + imageName\n\t\t\t}\n\t\t}\n\t}\n\n\tc.JSON(http.StatusOK, gin.H{\n\t\t"code": code,\n\t\t"msg":  e.GetMsg(code),\n\t\t"data": data,\n\t})\n}\n')])])]),n("p",[t._v("æ‰€æ¶‰åŠçš„é”™è¯¯ç ï¼ˆéœ€åœ¨ pkg/e/code.goã€msg.go æ·»åŠ ï¼‰ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("// ä¿å­˜å›¾ç‰‡å¤±è´¥\nERROR_UPLOAD_SAVE_IMAGE_FAIL = 30001\n// æ£€æŸ¥å›¾ç‰‡å¤±è´¥\nERROR_UPLOAD_CHECK_IMAGE_FAIL = 30002\n// æ ¡éªŒå›¾ç‰‡é”™è¯¯ï¼Œå›¾ç‰‡æ ¼å¼æˆ–å¤§å°æœ‰é—®é¢˜\nERROR_UPLOAD_CHECK_IMAGE_FORMAT = 30003\n")])])]),n("p",[t._v("åœ¨è¿™ä¸€å¤§æ®µçš„ä¸šåŠ¡é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬åšäº†å¦‚ä¸‹äº‹æƒ…ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("c.Request.FormFileï¼šè·å–ä¸Šä¼ çš„å›¾ç‰‡ï¼ˆè¿”å›æä¾›çš„è¡¨å•é”®çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼‰")]),t._v(" "),n("li",[t._v("CheckImageExtã€CheckImageSizeæ£€æŸ¥å›¾ç‰‡å¤§å°ï¼Œæ£€æŸ¥å›¾ç‰‡åç¼€")]),t._v(" "),n("li",[t._v("CheckImageï¼šæ£€æŸ¥ä¸Šä¼ å›¾ç‰‡æ‰€éœ€ï¼ˆæƒé™ã€æ–‡ä»¶å¤¹ï¼‰")]),t._v(" "),n("li",[t._v("SaveUploadedFileï¼šä¿å­˜å›¾ç‰‡")])]),t._v(" "),n("p",[t._v("æ€»çš„æ¥è¯´ï¼Œå°±æ˜¯ å…¥å‚ -> æ£€æŸ¥ -ã€‹ ä¿å­˜ çš„åº”ç”¨æµç¨‹")]),t._v(" "),n("h3",{attrs:{id:"ç¬¬ä¸‰æ­¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸‰æ­¥"}},[t._v("#")]),t._v(" ç¬¬ä¸‰æ­¥")]),t._v(" "),n("p",[t._v("æ‰“å¼€ routers/router.go æ–‡ä»¶ï¼Œå¢åŠ è·¯ç”± "),n("code",[t._v('r.POST("/upload", api.UploadImage)')]),t._v(" ï¼Œå¦‚ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('func InitRouter() *gin.Engine {\n\tr := gin.New()\n    ...\n\tr.GET("/auth", api.GetAuth)\n\tr.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerFiles.Handler))\n\tr.POST("/upload", api.UploadImage)\n\n\tapiv1 := r.Group("/api/v1")\n\tapiv1.Use(jwt.JWT())\n\t{\n\t\t...\n\t}\n\n\treturn r\n}\n')])])]),n("h3",{attrs:{id:"éªŒè¯-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éªŒè¯-2"}},[t._v("#")]),t._v(" éªŒè¯")]),t._v(" "),n("p",[t._v("æœ€åæˆ‘ä»¬è¯·æ±‚ä¸€ä¸‹ä¸Šä¼ å›¾ç‰‡çš„æ¥å£ï¼Œæµ‹è¯•æ‰€ç¼–å†™çš„åŠŸèƒ½")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.imgur.com/NjdkvxS.jpg",alt:"image"}})]),t._v(" "),n("p",[t._v("æ£€æŸ¥ç›®å½•ä¸‹æ˜¯å¦å«æ–‡ä»¶ï¼ˆæ³¨æ„æƒé™é—®é¢˜ï¼‰")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("$ pwd\n$GOPATH/src/github.com/EDDYCJY/go-gin-example/runtime/upload/images\n\n$ ll\n... 96a3be3cf272e017046d1b2674a52bd3.jpg\n... c39fa784216313cf2faa7c98739fc367.jpeg\n")])])]),n("p",[t._v("åœ¨è¿™é‡Œæˆ‘ä»¬ä¸€å…±è¿”å›äº† 2 ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å®Œæ•´çš„è®¿é—® URLï¼Œå¦ä¸€ä¸ªä¸ºä¿å­˜è·¯å¾„")]),t._v(" "),n("h2",{attrs:{id:"å®ç°-http-fileserver"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ç°-http-fileserver"}},[t._v("#")]),t._v(" å®ç° http.FileServer")]),t._v(" "),n("p",[t._v("åœ¨å®Œæˆäº†ä¸Šä¸€å°èŠ‚åï¼Œæˆ‘ä»¬è¿˜éœ€è¦è®©å‰ç«¯èƒ½å¤Ÿè®¿é—®åˆ°å›¾ç‰‡ï¼Œä¸€èˆ¬æ˜¯å¦‚ä¸‹ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("CDN")]),t._v(" "),n("li",[t._v("http.FileSystem")])]),t._v(" "),n("p",[t._v("åœ¨å…¬å¸çš„è¯ï¼ŒCDN æˆ–è‡ªå»ºåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿå±…å¤šï¼Œä¹Ÿä¸éœ€è¦è¿‡å¤šå…³æ³¨ã€‚è€Œåœ¨å®è·µé‡Œçš„è¯è‚¯å®šæ˜¯æœ¬åœ°æ­å»ºäº†ï¼ŒGo æœ¬èº«å¯¹æ­¤å°±æœ‰å¾ˆå¥½çš„æ”¯æŒï¼Œè€Œ Gin æ›´æ˜¯å†å°è£…äº†ä¸€å±‚ï¼Œåªéœ€è¦åœ¨è·¯ç”±å¢åŠ ä¸€è¡Œä»£ç å³å¯")]),t._v(" "),n("h3",{attrs:{id:"r-staticfs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#r-staticfs"}},[t._v("#")]),t._v(" r.StaticFS")]),t._v(" "),n("p",[t._v("æ‰“å¼€ routers/router.go æ–‡ä»¶ï¼Œå¢åŠ è·¯ç”± "),n("code",[t._v('r.StaticFS("/upload/images", http.Dir(upload.GetImageFullPath()))')]),t._v("ï¼Œå¦‚ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('func InitRouter() *gin.Engine {\n    ...\n\tr.StaticFS("/upload/images", http.Dir(upload.GetImageFullPath()))\n\n\tr.GET("/auth", api.GetAuth)\n\tr.GET("/swagger/*any", ginSwagger.WrapHandler(swaggerFiles.Handler))\n\tr.POST("/upload", api.UploadImage)\n    ...\n}\n')])])]),n("h3",{attrs:{id:"å®ƒåšäº†ä»€ä¹ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ƒåšäº†ä»€ä¹ˆ"}},[t._v("#")]),t._v(" å®ƒåšäº†ä»€ä¹ˆ")]),t._v(" "),n("p",[t._v("å½“è®¿é—® $HOST/upload/images æ—¶ï¼Œå°†ä¼šè¯»å–åˆ° $GOPATH/src/github.com/EDDYCJY/go-gin-example/runtime/upload/images ä¸‹çš„æ–‡ä»¶")]),t._v(" "),n("p",[t._v("è€Œè¿™è¡Œä»£ç åˆåšäº†ä»€ä¹ˆäº‹å‘¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ–¹æ³•åŸå‹")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('// StaticFS works just like `Static()` but a custom `http.FileSystem` can be used instead.\n// Gin by default user: gin.Dir()\nfunc (group *RouterGroup) StaticFS(relativePath string, fs http.FileSystem) IRoutes {\n\tif strings.Contains(relativePath, ":") || strings.Contains(relativePath, "*") {\n\t\tpanic("URL parameters can not be used when serving a static folder")\n\t}\n\thandler := group.createStaticHandler(relativePath, fs)\n\turlPattern := path.Join(relativePath, "/*filepath")\n\n\t// Register GET and HEAD handlers\n\tgroup.GET(urlPattern, handler)\n\tgroup.HEAD(urlPattern, handler)\n\treturn group.returnObj()\n}\n')])])]),n("p",[t._v("é¦–å…ˆåœ¨æš´éœ²çš„ URL ä¸­ç¦æ­¢äº† * å’Œ : ç¬¦å·çš„ä½¿ç”¨ï¼Œé€šè¿‡ "),n("code",[t._v("createStaticHandler")]),t._v(" åˆ›å»ºäº†é™æ€æ–‡ä»¶æœåŠ¡ï¼Œå®è´¨æœ€ç»ˆè°ƒç”¨çš„è¿˜æ˜¯ "),n("code",[t._v("fileServer.ServeHTTP")]),t._v(" å’Œä¸€äº›å¤„ç†é€»è¾‘äº†")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("func (group *RouterGroup) createStaticHandler(relativePath string, fs http.FileSystem) HandlerFunc {\n\tabsolutePath := group.calculateAbsolutePath(relativePath)\n\tfileServer := http.StripPrefix(absolutePath, http.FileServer(fs))\n\t_, nolisting := fs.(*onlyfilesFS)\n\treturn func(c *Context) {\n\t\tif nolisting {\n\t\t\tc.Writer.WriteHeader(404)\n\t\t}\n\t\tfileServer.ServeHTTP(c.Writer, c.Request)\n\t}\n}\n")])])]),n("h4",{attrs:{id:"http-stripprefix"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-stripprefix"}},[t._v("#")]),t._v(" http.StripPrefix")]),t._v(" "),n("p",[t._v("æˆ‘ä»¬å¯ä»¥ç•™æ„ä¸‹ "),n("code",[t._v("fileServer := http.StripPrefix(absolutePath, http.FileServer(fs))")]),t._v(" è¿™æ®µè¯­å¥ï¼Œåœ¨é™æ€æ–‡ä»¶æœåŠ¡ä¸­å¾ˆå¸¸è§ï¼Œå®ƒæœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿ")]),t._v(" "),n("p",[n("code",[t._v("http.StripPrefix")]),t._v(" ä¸»è¦ä½œç”¨æ˜¯ä»è¯·æ±‚ URL çš„è·¯å¾„ä¸­åˆ é™¤ç»™å®šçš„å‰ç¼€ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ª "),n("code",[t._v("Handler")])]),t._v(" "),n("p",[t._v("é€šå¸¸ http.FileServer è¦ä¸ http.StripPrefix ç›¸ç»“åˆä½¿ç”¨ï¼Œå¦åˆ™å½“ä½ è¿è¡Œï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('http.Handle("/upload/images", http.FileServer(http.Dir("upload/images")))\n')])])]),n("p",[t._v("ä¼šæ— æ³•æ­£ç¡®çš„è®¿é—®åˆ°æ–‡ä»¶ç›®å½•ï¼Œå› ä¸º "),n("code",[t._v("/upload/images")]),t._v(" ä¹ŸåŒ…å«åœ¨äº† URL è·¯å¾„ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('http.Handle("/upload/images", http.StripPrefix("upload/images", http.FileServer(http.Dir("upload/images"))))\n')])])]),n("h4",{attrs:{id:"filepath"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#filepath"}},[t._v("#")]),t._v(" /*filepath")]),t._v(" "),n("p",[t._v("åˆ°ä¸‹é¢å¯ä»¥çœ‹åˆ° "),n("code",[t._v('urlPattern := path.Join(relativePath, "/*filepath")')]),t._v("ï¼Œ"),n("code",[t._v("/*filepath")]),t._v(" ä½ æ˜¯è°ï¼Œä½ åœ¨è¿™é‡Œæœ‰ä»€ä¹ˆç”¨ï¼Œä½ æ˜¯ Gin çš„äº§ç‰©å—?")]),t._v(" "),n("p",[t._v("é€šè¿‡è¯­ä¹‰å¯å¾—çŸ¥æ˜¯è·¯ç”±çš„å¤„ç†é€»è¾‘ï¼Œè€Œ Gin çš„è·¯ç”±æ˜¯åŸºäº httprouter çš„ï¼Œé€šè¿‡æŸ¥é˜…æ–‡æ¡£å¯å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Pattern: /src/*filepath\n\n /src/                     match\n /src/somefile.go          match\n /src/subdir/somefile.go   match\n")])])]),n("p",[n("code",[t._v("*filepath")]),t._v(" å°†åŒ¹é…æ‰€æœ‰æ–‡ä»¶è·¯å¾„ï¼Œå¹¶ä¸” "),n("code",[t._v("*filepath")]),t._v(" å¿…é¡»åœ¨ Pattern çš„æœ€å")]),t._v(" "),n("h3",{attrs:{id:"éªŒè¯-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éªŒè¯-3"}},[t._v("#")]),t._v(" éªŒè¯")]),t._v(" "),n("p",[t._v("é‡æ–°æ‰§è¡Œ "),n("code",[t._v("go run main.go")]),t._v(" ï¼Œå»è®¿é—®åˆšåˆšåœ¨ upload æ¥å£å¾—åˆ°çš„å›¾ç‰‡åœ°å€ï¼Œæ£€æŸ¥ http.FileSystem æ˜¯å¦æ­£å¸¸")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://i.imgur.com/zlNeiTt.jpg",alt:"image"}})]),t._v(" "),n("h2",{attrs:{id:"ä¿®æ”¹æ–‡ç« æ¥å£"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¿®æ”¹æ–‡ç« æ¥å£"}},[t._v("#")]),t._v(" ä¿®æ”¹æ–‡ç« æ¥å£")]),t._v(" "),n("p",[t._v("æ¥ä¸‹æ¥ï¼Œéœ€è¦ä½ ä¿®æ”¹ routers/api/v1/article.go çš„ AddArticleã€EditArticle ä¸¤ä¸ªæ¥å£")]),t._v(" "),n("ul",[n("li",[t._v("æ–°å¢ã€æ›´æ–°æ–‡ç« æ¥å£ï¼šæ”¯æŒå…¥å‚ cover_image_url")]),t._v(" "),n("li",[t._v("æ–°å¢ã€æ›´æ–°æ–‡ç« æ¥å£ï¼šå¢åŠ å¯¹ cover_image_url çš„éç©ºã€æœ€é•¿é•¿åº¦æ ¡éªŒ")])]),t._v(" "),n("p",[t._v("è¿™å—å‰é¢æ–‡ç« è®²è¿‡ï¼Œå¦‚æœæœ‰é—®é¢˜å¯ä»¥å‚è€ƒé¡¹ç›®çš„ä»£ç ğŸ‘Œ")]),t._v(" "),n("h2",{attrs:{id:"æ€»ç»“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),n("p",[t._v("åœ¨è¿™ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç®€å•çš„åˆ†æäº†ä¸‹éœ€æ±‚ï¼Œå¯¹åº”ç”¨åšå‡ºäº†ä¸€ä¸ªå°è§„åˆ’å¹¶å®æ–½")]),t._v(" "),n("p",[t._v("å®Œæˆäº†æ¸…å•ä¸­çš„åŠŸèƒ½ç‚¹å’Œä¼˜åŒ–ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ä¹Ÿæ˜¯å¸¸è§çš„åœºæ™¯ï¼Œå¸Œæœ›ä½ èƒ½å¤Ÿç»†ç»†å“å°å¹¶é’ˆå¯¹ä¸€äº›ç‚¹è¿›è¡Œæ·±å…¥å­¦ä¹ ")]),t._v(" "),n("h2",{attrs:{id:"å‚è€ƒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒ"}},[t._v("#")]),t._v(" å‚è€ƒ")]),t._v(" "),n("h3",{attrs:{id:"æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç "}},[t._v("#")]),t._v(" æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç ")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/EDDYCJY/go-gin-example",target:"_blank",rel:"noopener noreferrer"}},[t._v("go-gin-example"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"å…³äº"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å…³äº"}},[t._v("#")]),t._v(" å…³äº")]),t._v(" "),n("h3",{attrs:{id:"ä¿®æ”¹è®°å½•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¿®æ”¹è®°å½•"}},[t._v("#")]),t._v(" ä¿®æ”¹è®°å½•")]),t._v(" "),n("ul",[n("li",[t._v("ç¬¬ä¸€ç‰ˆï¼š2018å¹´02æœˆ16æ—¥å‘å¸ƒæ–‡ç« ")]),t._v(" "),n("li",[t._v("ç¬¬äºŒç‰ˆï¼š2019å¹´10æœˆ02æ—¥ä¿®æ”¹æ–‡ç« ")])]),t._v(" "),n("h2",{attrs:{id:"ï¼Ÿ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ï¼Ÿ"}},[t._v("#")]),t._v(" ï¼Ÿ")]),t._v(" "),n("p",[t._v("å¦‚æœæœ‰ä»»ä½•ç–‘é—®æˆ–é”™è¯¯ï¼Œæ¬¢è¿åœ¨ "),n("a",{attrs:{href:"https://github.com/EDDYCJY/blog",target:"_blank",rel:"noopener noreferrer"}},[t._v("issues"),n("OutboundLink")],1),t._v(" è¿›è¡Œæé—®æˆ–ç»™äºˆä¿®æ­£æ„è§ï¼Œå¦‚æœå–œæ¬¢æˆ–å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ Starï¼Œå¯¹ä½œè€…æ˜¯ä¸€ç§é¼“åŠ±å’Œæ¨è¿›ã€‚")]),t._v(" "),n("h3",{attrs:{id:"æˆ‘çš„å…¬ä¼—å·"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æˆ‘çš„å…¬ä¼—å·"}},[t._v("#")]),t._v(" æˆ‘çš„å…¬ä¼—å·")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://image.eddycjy.com/8d0b0c3a11e74efd5fdfd7910257e70b.jpg",alt:"image"}})])])}),[],!1,null,null,null);e.default=r.exports}}]);