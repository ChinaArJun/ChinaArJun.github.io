(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{394:function(e,n,a){e.exports=a.p+"assets/img/hyper1.ebebdd94.png"},395:function(e,n,a){e.exports=a.p+"assets/img/hyper3.19d74cf9.png"},730:function(e,n,a){"use strict";a.r(n);var r=a(44),t=Object(r.a)({},(function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h2",{attrs:{id:"_1-fabric环境搭建"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-fabric环境搭建"}},[e._v("#")]),e._v(" 1. Fabric环境搭建")]),e._v(" "),r("p",[e._v("准备工作")]),e._v(" "),r("blockquote",[r("ol",[r("li",[e._v("官方帮助文档：https://hyperledger-fabric.readthedocs.io/en/release-1.4/")]),e._v(" "),r("li",[e._v("安装 cURL(https://curl.haxx.se/download.html),"),r("code",[e._v("curl --version")]),e._v(" 查询版本")]),e._v(" "),r("li",[e._v("安装docker，"),r("code",[e._v("docker --version")]),e._v(" 查询版本")]),e._v(" "),r("li",[e._v("安装docker-compose,"),r("code",[e._v("docker-compose --version")]),e._v(" 查询版本")]),e._v(" "),r("li",[e._v("安装 go 语言环境，"),r("code",[e._v("go version")]),e._v(" 查询版本")]),e._v(" "),r("li",[e._v("安装node.js, "),r("code",[e._v("node -v")]),e._v(" 查询版本")]),e._v(" "),r("li",[e._v("Python 版本要求为 2.7，"),r("code",[e._v("python --version")]),e._v(" 查询版本")])])]),e._v(" "),r("h3",{attrs:{id:"_1-1-安装docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-安装docker"}},[e._v("#")]),e._v(" 1.1 安装docker")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("基础软件安装")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 安装基本软件")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" update\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" apt-transport-https ca-certificates "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("git")]),e._v(" software-properties-common lrzsz -y\n")])])])]),e._v(" "),r("li",[r("p",[e._v("添加阿里的docker镜像仓库")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 添加阿里的docker镜像仓库")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -fsSL https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" apt-key "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" -\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" add-apt-repository "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v('"deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/ubuntu '),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$(")]),e._v("lsb_release -cs"),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v(")")])]),e._v(' stable"')]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 更新软件源")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" update\n")])])])]),e._v(" "),r("li",[r("p",[e._v("安装docker")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 安装docker")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" docker-ce -y\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 查看安装的docker版本")]),e._v("\n$ docker version\n\tClient:\n         Version:           "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("18.06")]),e._v(".1-ce\n         API version:       "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.38")]),e._v("\n         Go version:        go1.10.3\n         Git commit:        e68fc7a\n         Built:             Tue Aug "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("21")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("17")]),e._v(":24:51 "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("2018")]),e._v("\n         OS/Arch:           linux/amd64\n         Experimental:      "),r("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\n    Got permission denied "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("while")]),e._v(" trying to connect to the Docker daemon socket at\n    unix:///var/run/docker.sock: Get\n    http://%2Fvar%2Frun%2Fdocker.sock/v1.38/version: \n    dial unix /var/run/docker.sock: connect: "),r("span",{pre:!0,attrs:{class:"token variable"}},[r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("`")]),e._v("permission denied"),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("`")])]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 当前用户直接操作docker时, 权限不够, 需要做下面的第4不操作")]),e._v("\n")])])])]),e._v(" "),r("li",[r("p",[e._v("将当前用户添加到docker组")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 将用户加入该 group 内。然后退出并重新登录就生效啦。")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" gpasswd -a "),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("${"),r("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("USER")]),e._v("}")]),e._v(" docker\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 重启docker服务")]),e._v("\n$ systemctl restart docker\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 当前用户切换到docker群组")]),e._v("\n$ newgrp - docker\n$ docker version\n\tClient:\n         Version:           "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("18.06")]),e._v(".1-ce\n         API version:       "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.38")]),e._v("\n         Go version:        go1.10.3\n         Git commit:        e68fc7a\n         Built:             Tue Aug "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("21")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("17")]),e._v(":24:51 "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("2018")]),e._v("\n         OS/Arch:           linux/amd64\n         Experimental:      "),r("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\n\n    Server:\n         Engine:\n         Version:          "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("18.06")]),e._v(".1-ce\n         API version:      "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.38")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("minimum version "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.12")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n         Go version:       go1.10.3\n         Git commit:       e68fc7a\n         Built:            Tue Aug "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("21")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("17")]),e._v(":23:15 "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("2018")]),e._v("\n         OS/Arch:          linux/amd64\n         Experimental:     "),r("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v("\n")])])])]),e._v(" "),r("li",[r("p",[e._v("安装docker-compose")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#安装依赖工具")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("apt-get")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" python-pip -y\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#安装编排工具")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" pip "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" docker-compose\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#查看版本")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" docker-compose version\n")])])])])]),e._v(" "),r("h3",{attrs:{id:"_1-2-安装go"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-安装go"}},[e._v("#")]),e._v(" 1.2 安装go")]),e._v(" "),r("div",{staticClass:"language-http extra-class"},[r("pre",{pre:!0,attrs:{class:"language-http"}},[r("code",[e._v("# 安装包下载地址:\n"),r("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("https:")]),e._v("//golang.org/dl/  - 翻墙\n"),r("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("https:")]),e._v("//studygolang.com/dl - 国内镜像源\n")])])]),r("p",[r("img",{attrs:{src:a(394),alt:"1536569707498"}})]),e._v(" "),r("p",[e._v("如果没有进行安装包下载, 课直接使用如下命令(目前最新版本):")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 1. 使用wget工具下载安装包")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("wget")]),e._v(" https://dl.google.com/go/go1.11.linux-amd64.tar.gz\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 2. 解压tar包到/usr/local")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" zxvf go1.11.linux-amd64.tar.gz -C /usr/local\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 3. 创建Go目录")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("$HOME")]),e._v("/go\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 4. 用vi打开~./bashrc，配置环境变量")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("vim")]),e._v(" ~/.bashrc\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 5. 增加下面的环境变量，保存退出")]),e._v("\n\t"),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("GOROOT")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/usr/local/go\n    "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("GOPATH")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("$HOME")]),e._v("/go\n    "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[r("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("PATH")])]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("$PATH")]),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$GOROOT")]),e._v("/bin:"),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$GOPATH")]),e._v("/bin\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 6. 使环境变量立即生效, 一些命令二选一")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("source")]),e._v(" ~/.bashrc  \n$ "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v(" ~/.bashrc\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 7. 检测go是否安装好")]),e._v("\n$ go version\n")])])]),r("h3",{attrs:{id:"_1-3-安装node-js"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-安装node-js"}},[e._v("#")]),e._v(" 1.3 安装Node.js")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("官方下载地址")]),e._v(" "),r("div",{staticClass:"language-http extra-class"},[r("pre",{pre:!0,attrs:{class:"language-http"}},[r("code",[r("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("https:")]),e._v("//nodejs.org/en/download/\n")])])]),r("p",[r("img",{attrs:{src:a(395),alt:"1536572107278"}})])]),e._v(" "),r("li",[r("p",[e._v("下载二进制源码包")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("wget")]),e._v(" https://nodejs.org/dist/v8.11.4/node-v8.11.4-linux-x64.tar.xz\n")])])])]),e._v(" "),r("li",[r("p",[e._v("解压并安装")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 指定压缩包解压到/opt目录下")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("tar")]),e._v(" xvf node-v8.11.4-linux-x64.tar.xz -C /opt\n\t- 在/opt目录下得到 node-v8.11.4-linux-x64 目录\n")])])])]),e._v(" "),r("li",[r("p",[e._v("将node.js设置为全局可用")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 打开系统级别的配置文件 /etc/profile")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("vim")]),e._v(" /etc/profile\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 添加如下配置项, 保存退出")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("NODEJS_HOME")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/opt/node-v8.11.4-linux-x64\n    "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("export")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token assign-left variable"}},[r("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("PATH")])]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token environment constant"}},[e._v("$PATH")]),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),r("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$NODEJS_HOME")]),e._v("/bin\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 重新加载配置文件")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v(" /etc/profile\n/etc/profile -"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" 设置环境变量的配置文件\n\t- 对当前系统下所有用户生效\n")])])])]),e._v(" "),r("li",[r("p",[e._v("测试")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("$ node -v\n")])])])])]),e._v(" "),r("h3",{attrs:{id:"_1-4-部署hyperledger-fabric"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-部署hyperledger-fabric"}},[e._v("#")]),e._v(" 1.4 部署hyperledger Fabric")]),e._v(" "),r("blockquote",[r("ol",[r("li",[r("p",[e._v("下载了一些可执行程序")])]),e._v(" "),r("li",[r("p",[e._v("下载了一些实例 (测试案例)")])]),e._v(" "),r("li",[r("p",[e._v("下载了fabric的镜像")]),e._v(" "),r("p",[e._v("/var/lib/docker")])])])]),e._v(" "),r("ol",[r("li",[r("p",[e._v("下载并执行fabric的引导脚本bootstrap.sh")]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 参考资料")]),e._v("\nhttps://hyperledger-fabric.readthedocs.io/en/release-1.4/install.html\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 创建放置的目录，然后进入该目录，用curl下载脚本。")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" ~ "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 这里在家目录下创建放置目录")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" hyperledger-fabric "),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 创建放置目录")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" hyperledger-fabric\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 下载并执行脚本, [ ***语法格式*** ] - ")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 下边是具体的执行命令 - 看我")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 下边是具体的执行命令 - 看我")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 下边是具体的执行命令 -- 重要的事情说三遍, 使用下边不翻墙的命令")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -sSL http://bit.ly/2ysbOFE "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v(" -s "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("fabric"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("fabric-ca"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("thirdparty"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n\t- fabric: fabric的版本\n\t- fabric-ca: fabric-ca的版本\n\t- thirdparty: 第三方库的版本\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 下载并执行脚本, [ ***需要翻墙, 需要翻墙, 需要翻墙, 需要翻墙, 需要翻墙,*** ]")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -sSL http://bit.ly/2ysbOFE "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v(" -s "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.2")]),e._v(".1 "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.2")]),e._v(".1 "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.4")]),e._v(".10\n\t- http://bit.ly/2ysbOFE: 该地址必须翻墙才能访问\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ***不翻墙的方式***")]),e._v("\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -sSL https://raw.githubusercontent.com/hyperledger/fabric/master/scripts/bootstrap.sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v(" -s "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.2")]),e._v(".1 "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.2")]),e._v(".1 "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.4")]),e._v(".10\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 其中参数说明如下：")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("2.0")]),e._v(".0：表示Hyperledger Fabric的版本号\n"),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.4")]),e._v(".4：表示Fabric CA的版本号\n"),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.4")]),e._v(".18：表示第三方引用的版本号\n$ "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" -sSL https://raw.githubusercontent.com/hyperledger/fabric/master/scripts/bootstrap.sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v(" -s "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("2.0")]),e._v(".0 "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.4")]),e._v(".4 "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("0.4")]),e._v(".18\n可使用如下命令查看是否下载成功\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 该脚本启动之后会下载两个压缩包和一些镜像文件, 整个过程会比较长, 耐心等待...")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 温馨提示: 这个过程会让你产生想要砸电脑的冲动, 控制好你的情绪!!!!")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 上述命令刚开始会下载以下两个压缩包, 这两个包下载速度特别慢慢慢慢慢慢慢.......")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# \t1. hyperledger-fabric-linux-amd64-1.2.0.tar.gz")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# \t2. hyperledger-fabric-ca-linux-amd64-1.2.0.tar.gz")]),e._v("\n以上两个压缩包下载下来之后会被解压, 解压目录:\n~/hyperledger-fabric/fabric-samples\n")])])])])]),e._v(" "),r("p",[e._v("可以将事先下载好的两个压缩包放到该目录下, 提高下载速度 (强烈建议), 放好之后再重新执行上边的curl命令")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("\n安装过程中输出的log信息\n\n> Installing hyperledger/fabric-samples repo\n>\n> ===> Cloning hyperledger/fabric-samples repo and checkout v1.2.0\n> 正克隆到 'fabric-samples'...\n> remote: Enumerating objects: 29, done.\n> remote: Counting objects: 100% (29/29), done.\n> remote: Compressing objects: 100% (28/28), done.\n> remote: Total 1821 (delta 5), reused 25 (delta 1), pack-reused 1792\n> 接收对象中: 100% (1821/1821), 646.82 KiB | 156.00 KiB/s, 完成.\n> 处理 delta 中: 100% (877/877), 完成.\n> 注意：正在检出 'v1.2.0'。\n>\n> 您正处于分离头指针状态。您可以查看、做试验性的修改及提交，并且您可以通过另外\n> 的检出分支操作丢弃在这个状态下所做的任何提交。\n>\n> 如果您想要通过创建分支来保留在此状态下所做的提交，您可以通过在检出命令添加\n> 参数 -b 来实现（现在或稍后）。例如：\n>\n>   git checkout -b <新分支名>\n>\n> HEAD 目前位于 ed81d7b [FAB-10811] fabric-ca sample is broken on v1.2\n>\n> Installing Hyperledger Fabric binaries\n>\n> ===> Downloading version 1.2.0 platform specific fabric binaries\n> ===> Downloading:  https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric/hyperledger-fabric/linux-amd64-1.2.0/hyperledger-fabric-linux-amd64-1.2.0.tar.gz\n>   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n> ​                                 Dload  Upload   Total   Spent    Left  Speed\n>   4 39.0M    4 1650k    0     0   7322      0  1:33:08  0:03:50  1:29:18  1642\n> ==> File downloaded. Verifying the md5sum...\n> ==> Extracting hyperledger-fabric-linux-amd64-1.2.0.tar.gz...\n> ==> Done.\n> ===> Downloading version 1.2.0 platform specific fabric-ca-client binary\n> ===> Downloading:  https://nexus.hyperledger.org/content/repositories/releases/org/hyperledger/fabric-ca/hyperledger-fabric-ca/linux-amd64-1.2.0/hyperledger-fabric-ca-linux-amd64-1.2.0.tar.gz\n> ==> Partial binary file found. Resuming download...\n> ==> File downloaded. Verifying the md5sum...\n> ==> Extracting hyperledger-fabric-ca-linux-amd64-1.2.0.tar.gz...\n> ==> Done.\n>\n> Installing Hyperledger Fabric docker images\n>\n> ===> Pulling fabric Images\n> ==> FABRIC IMAGE: peer\n>\n> 1.2.0: Pulling from hyperledger/fabric-peer\n> b234f539f7a1: Pull complete \n> 55172d420b43: Pull complete \n> 5ba5bbeb6b91: Pull complete \n> 43ae2841ad7a: Pull complete \n> f6c9c6de4190: Pull complete \n> c6af77e36488: Pull complete \n> 964f7f4f22f3: Pull complete \n> d4a3f4cfba3d: Pull complete \n> 73782018d902: Pull complete \n> 039eb34e730e: Pull complete \n> Digest: sha256:949b38bad9496d7694b54d30b90b72653804d761a44d721c4dc7a16a5cbcabe8\n> Status: Downloaded newer image for hyperledger/fabric-peer:1.2.0\n> ==> FABRIC IMAGE: orderer\n>\n> 1.2.0: Pulling from hyperledger/fabric-orderer\n> b234f539f7a1: Already exists \n> 55172d420b43: Already exists \n> 5ba5bbeb6b91: Already exists \n> 43ae2841ad7a: Already exists \n> f6c9c6de4190: Already exists \n> c6af77e36488: Already exists \n> 964f7f4f22f3: Already exists \n> d4a3f4cfba3d: Already exists \n> 8d0e11f5a0f7: Pull complete \n> 0bda0f004d88: Pull complete \n> Digest: sha256:a10f6d1d4cbb5a0264634c8b5ec63ff6cbbfc7c9fb369a06cc6dfe504d976259\n> Status: Downloaded newer image for hyperledger/fabric-orderer:1.2.0\n> ==> FABRIC IMAGE: ccenv\n>\n> 1.2.0: Pulling from hyperledger/fabric-ccenv\n> b234f539f7a1: Already exists \n> 55172d420b43: Already exists \n> 5ba5bbeb6b91: Already exists \n> 43ae2841ad7a: Already exists \n> f6c9c6de4190: Already exists \n> c6af77e36488: Already exists \n> 964f7f4f22f3: Already exists \n> 13cd31405e09: Pull complete \n> e03b35c19d96: Pull complete \n> 96c2920985e3: Pull complete \n> e91461be8304: Pull complete \n> 950c3368692b: Pull complete \n> c5de8d20c137: Pull complete \n> 5536b64bc67b: Pull complete \n> Digest: sha256:0a7fb37111cafce79cf89ca8d1af5ca6f721e60a8bd1b2b93521e671e3348af2\n> Status: Downloaded newer image for hyperledger/fabric-ccenv:1.2.0\n> ==> FABRIC IMAGE: tools\n>\n> 1.2.0: Pulling from hyperledger/fabric-tools\n> b234f539f7a1: Already exists \n> 55172d420b43: Already exists \n> 5ba5bbeb6b91: Already exists \n> 43ae2841ad7a: Already exists \n> f6c9c6de4190: Already exists \n> c6af77e36488: Already exists \n> 964f7f4f22f3: Already exists \n> 13cd31405e09: Already exists \n> e03b35c19d96: Already exists \n> 96c2920985e3: Already exists \n> e91461be8304: Already exists \n> 314928def9dd: Pull complete \n> d5b68ae13f8d: Pull complete \n> dde25187799d: Pull complete \n> Digest: sha256:24cca44a2f2ab6325c6ccc1c91a10bd3e0e71764037a85a473f7e9621b3a0f91\n> Status: Downloaded newer image for hyperledger/fabric-tools:1.2.0\n> ===> Pulling fabric ca Image\n> ==> FABRIC CA IMAGE\n>\n> 1.2.0: Pulling from hyperledger/fabric-ca\n> b234f539f7a1: Already exists \n> 55172d420b43: Already exists \n> 5ba5bbeb6b91: Already exists \n> 43ae2841ad7a: Already exists \n> f6c9c6de4190: Already exists \n> c6af77e36488: Already exists \n> 964f7f4f22f3: Already exists \n> f7a6370a6f7f: Pull complete \n> 37cc94e973b2: Pull complete \n> a80e45d2f608: Pull complete \n> 8feb19f73d3a: Pull complete \n> 5f3ea048e0c0: Pull complete \n> Digest: sha256:5fe6d502e52ec2a8d98ee5653e1ba31952098115fb57710ddae86f2c3cc82dad\n> Status: Downloaded newer image for hyperledger/fabric-ca:1.2.0\n> ===> Pulling thirdparty docker images\n> ==> THIRDPARTY DOCKER IMAGE: couchdb\n>\n> 0.4.10: Pulling from hyperledger/fabric-couchdb\n> b234f539f7a1: Already exists \n> 55172d420b43: Already exists \n> 5ba5bbeb6b91: Already exists \n> 43ae2841ad7a: Already exists \n> f6c9c6de4190: Already exists \n> c6af77e36488: Already exists \n> 964f7f4f22f3: Already exists \n> 13cd31405e09: Already exists \n> e03b35c19d96: Already exists \n> 96c2920985e3: Already exists \n> e91461be8304: Already exists \n> 6a752ce8f7fe: Pull complete \n> a49e2cb854b0: Pull complete \n> 493b25e70e6d: Pull complete \n> 2721753a3e7c: Pull complete \n> adede0f2a5f1: Pull complete \n> 9eb593f76305: Pull complete \n> bb49a3450e11: Pull complete \n> 929b9bb5d788: Pull complete \n> Digest: sha256:c65891b6c2374a06aff61dad8cd60e1f7a8dc2b72cc9f6f5c2f853f94509c1b1\n> Status: Downloaded newer image for hyperledger/fabric-couchdb:0.4.10\n> ==> THIRDPARTY DOCKER IMAGE: kafka\n>\n> 0.4.10: Pulling from hyperledger/fabric-kafka\n> b234f539f7a1: Already exists \n> 55172d420b43: Already exists \n> 5ba5bbeb6b91: Already exists \n> 43ae2841ad7a: Already exists \n> f6c9c6de4190: Already exists \n> c6af77e36488: Already exists \n> 964f7f4f22f3: Already exists \n> 13cd31405e09: Already exists \n> e03b35c19d96: Already exists \n> 96c2920985e3: Already exists \n> e91461be8304: Already exists \n> 146aa6695f33: Pull complete \n> 954e41d8cd46: Pull complete \n> 9d750070047f: Pull complete \n> Digest: sha256:3b58cd0f26e7f4d8c49373d6b91e1e465a97321ce106da9c055ed452bb9d7184\n> Status: Downloaded newer image for hyperledger/fabric-kafka:0.4.10\n> ==> THIRDPARTY DOCKER IMAGE: zookeeper\n>\n> 0.4.10: Pulling from hyperledger/fabric-zookeeper\n> b234f539f7a1: Already exists \n> 55172d420b43: Already exists \n> 5ba5bbeb6b91: Already exists \n> 43ae2841ad7a: Already exists \n> f6c9c6de4190: Already exists \n> c6af77e36488: Already exists \n> 964f7f4f22f3: Already exists \n> 13cd31405e09: Already exists \n> e03b35c19d96: Already exists \n> 96c2920985e3: Already exists \n> e91461be8304: Already exists \n> c335e6e59168: Pull complete \n> 016e000b0cc8: Pull complete \n> e716b0c9790c: Pull complete \n> 390f47e71470: Pull complete \n> Digest: sha256:151fe67421663fe860c1aba4b80877a22b6b8fa18cbc97990c309c603cd6f5f1\n> Status: Downloaded newer image for hyperledger/fabric-zookeeper:0.4.10\n\n**通过上述操作拉取的docker镜像为:**\n\n|         镜像文件名称         |                        用途                        |\n| :--------------------------: | :------------------------------------------------: |\n|   hyperledger/fabric-peer    |                  peer模块镜像文件                  |\n|  hyperledger/fabric-orderer  |               orderer节点库镜像文件                |\n|   hyperledger/fabric-ccenv   |         Go语言chaincode运行环境库镜像文件          |\n|   hyperledger/fabric-tools   | 相关工具镜像文件包含了cryptogen, configtxgen等工具 |\n|    hyperledger/fabric-ca     |                   CA模块镜像文件                   |\n|  hyperledger/fabric-couchdb  |               couchdb数据库镜像文件                |\n|   hyperledger/fabric-kafka   |                  kafka库镜像文件                   |\n| hyperledger/fabric-zookeeper |                zookeeper库镜像文件                 |\n\n下载完，可以看到已经下载的docker相关镜像\n\n> ===> List out hyperledger docker images\n>\n> hyperledger/fabric-ca                1.2.0               66cc132bd09c        2 months ago        252MB\n>\n> hyperledger/fabric-ca                latest              66cc132bd09c        2 months ago        252MB\n> hyperledger/fabric-tools            1.2.0               379602873003        2 months ago        1.51GB\n> hyperledger/fabric-tools            latest              379602873003        2 months ago        1.51GB\n> hyperledger/fabric-ccenv           1.2.0               6acf31e2d9a4        2 months ago        1.43GB\n> hyperledger/fabric-ccenv           latest              6acf31e2d9a4        2 months ago        1.43GB\n> hyperledger/fabric-orderer        1.2.0               4baf7789a8ec        2 months ago        152MB\n> hyperledger/fabric-orderer        latest              4baf7789a8ec        2 months ago        152MB\n> hyperledger/fabric-peer             1.2.0               82c262e65984        2 months ago        159MB\n> hyperledger/fabric-peer             latest              82c262e65984        2 months ago        159MB\n> hyperledger/fabric-zookeeper   0.4.10              2b51158f3898        2 months ago        1.44GB\n> hyperledger/fabric-zookeeper    latest              2b51158f3898        2 months ago        1.44GB\n> hyperledger/fabric-kafka      \t  0.4.10              936aef6db0e6        2 months ago        1.45GB\n> hyperledger/fabric-kafka       \t   latest              936aef6db0e6        2 months ago        1.45GB\n> hyperledger/fabric-couchdb      0.4.10              3092eca241fc        2 months ago        1.61GB\n> hyperledger/fabric-couchdb       latest              3092eca241fc        2 months ago        1.61GB\n\n1. 设置全局访问\n\n```shell\n# 进入到 ~/hyperledger-fabric/fabric-samples/bin 目录\n$ cd ~/hyperledger-fabric/fabric-samples/bin\nitcast@ubuntu:~/hyperledger-fabric/fabric-samples/bin$ tree\n    .\n    ├── configtxgen\n    ├── configtxlator\n    ├── cryptogen\n    ├── discover\n    ├── fabric-ca-client\n    ├── get-docker-images.sh\n    ├── idemixgen\n    ├── orderer\n    └── peer\n# 将这些二进制文件拷贝到 /usr/local/bin 目录下\n$ sudo cp * /usr/local/bin\n# 执行完上述操作之后, fabric的这些可执行程序就可以在全局范围内使用了\n")])])]),r("h3",{attrs:{id:"_1-5-first-network-环境测试"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-first-network-环境测试"}},[e._v("#")]),e._v(" 1.5 First-Network 环境测试")]),e._v(" "),r("h4",{attrs:{id:"_1-5-1-生成相应文件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-1-生成相应文件"}},[e._v("#")]),e._v(" 1.5.1 生成相应文件")]),e._v(" "),r("p",[r("strong",[e._v("执行 ./byfn.sh generate 命令生成相应的文件")])]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("$ "),r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" ~/hyperledger-fabric/fabric-samples/first-network/\n$ ./byfn.sh generate\t\n")])])]),r("blockquote",[r("p",[e._v("Generating certs and genesis block for channel 'mychannel' with CLI timeout of '10' seconds and CLI delay of '3' seconds\nContinue? [Y/n] y\nproceeding ...\n/home/zoro/hyperledger-fabric/fabric-samples/first-network/../bin/cryptogen")]),e._v(" "),r("h6",{attrs:{id:""}},[r("a",{staticClass:"header-anchor",attrs:{href:"#"}},[e._v("#")])]),e._v(" "),r("p",[r("font",{attrs:{color:"blue",size:"5"}},[e._v("Generate certificates using cryptogen tool")])],1),e._v(" "),r("h6",{attrs:{id:"-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#-2"}},[e._v("#")])]),e._v(" "),r("ul",[r("li",[r("font",{attrs:{color:"red"}},[e._v("cryptogen generate --config=./crypto-config.yaml")]),e._v("\norg1.example.com\norg2.example.com")],1),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x")])]),e._v(" "),r("p",[e._v("/home/zoro/hyperledger-fabric/fabric-samples/first-network/../bin/configtxgen")]),e._v(" "),r("h6",{attrs:{id:"-3"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#-3"}},[e._v("#")])]),e._v(" "),r("p",[r("font",{attrs:{color:"blue",size:"5"}},[e._v("Generating Orderer Genesis block")])],1),e._v(" "),r("h6",{attrs:{id:"-4"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#-4"}},[e._v("#")])]),e._v(" "),r("ul",[r("li",[r("font",{attrs:{color:"red"}},[e._v("configtxgen "),r("strong",[e._v("-profile")]),e._v(" TwoOrgsOrdererGenesis "),r("strong",[e._v("-outputBlock")]),e._v(" ./channel-artifacts/genesis.block")]),e._v("\n2018-09-23 11:03:32.183 CST [common/tools/configtxgen] main -> WARN 001 Omitting the channel ID for configtxgen is deprecated.  Explicitly passing the channel ID will be required in the future, defaulting to 'testchainid'.\n2018-09-23 11:03:32.183 CST [common/tools/configtxgen] main -> INFO 002 Loading configuration\n2018-09-23 11:03:32.190 CST [common/tools/configtxgen/encoder] NewChannelGroup -> WARN 003 Default policy emission is deprecated, please include policy specificiations for the channel group in configtx.yaml\n2018-09-23 11:03:32.191 CST [common/tools/configtxgen/encoder] NewOrdererGroup -> WARN 004 Default policy emission is deprecated, please include policy specificiations for the orderer group in configtx.yaml\n2018-09-23 11:03:32.191 CST [common/tools/configtxgen/encoder] NewOrdererOrgGroup -> WARN 005 Default policy emission is deprecated, please include policy specificiations for the orderer org group OrdererOrg in configtx.yaml\n2018-09-23 11:03:32.192 CST [msp] getMspConfig -> INFO 006 Loading NodeOUs\n2018-09-23 11:03:32.192 CST [common/tools/configtxgen/encoder] NewOrdererOrgGroup -> WARN 007 Default policy emission is deprecated, please include policy specificiations for the orderer org group Org1MSP in configtx.yaml\n2018-09-23 11:03:32.193 CST [msp] getMspConfig -> INFO 008 Loading NodeOUs\n2018-09-23 11:03:32.193 CST [common/tools/configtxgen/encoder] NewOrdererOrgGroup -> WARN 009 Default policy emission is deprecated, please include policy specificiations for the orderer org group Org2MSP in configtx.yaml\n2018-09-23 11:03:32.193 CST [common/tools/configtxgen] doOutputBlock -> INFO 00a Generating genesis block\n2018-09-23 11:03:32.194 CST [common/tools/configtxgen] doOutputBlock -> INFO 00b Writing genesis block")],1),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x")])]),e._v(" "),r("h6",{attrs:{id:"-5"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#-5"}},[e._v("#")])]),e._v(" "),r("p",[r("font",{attrs:{color:"blue",size:"5"}},[e._v("Generating channel configuration transaction 'channel.tx'")])],1),e._v(" "),r("h6",{attrs:{id:"-6"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#-6"}},[e._v("#")])]),e._v(" "),r("ul",[r("li",[r("font",{attrs:{color:"red"}},[e._v("configtxgen "),r("strong",[e._v("-profile")]),e._v(" TwoOrgsChannel "),r("strong",[e._v("-outputCreateChannelTx")]),e._v(" ./channel-artifacts/channel.tx "),r("strong",[e._v("-channelID")]),e._v(" mychannel")]),e._v("\n2018-09-23 11:03:32.238 CST [common/tools/configtxgen] main -> INFO 001 Loading configuration\n2018-09-23 11:03:32.252 CST [common/tools/configtxgen] doOutputChannelCreateTx -> INFO 002 Generating new channel configtx\n2018-09-23 11:03:32.253 CST [common/tools/configtxgen/encoder] NewApplicationGroup -> WARN 003 Default policy emission is deprecated, please include policy specificiations for the application group in configtx.yaml\n2018-09-23 11:03:32.253 CST [msp] getMspConfig -> INFO 004 Loading NodeOUs\n2018-09-23 11:03:32.254 CST [common/tools/configtxgen/encoder] NewApplicationOrgGroup -> WARN 005 Default policy emission is deprecated, please include policy specificiations for the application org group Org1MSP in configtx.yaml\n2018-09-23 11:03:32.254 CST [msp] getMspConfig -> INFO 006 Loading NodeOUs\n2018-09-23 11:03:32.254 CST [common/tools/configtxgen/encoder] NewApplicationOrgGroup -> WARN 007 Default policy emission is deprecated, please include policy specificiations for the application org group Org2MSP in configtx.yaml\n2018-09-23 11:03:32.257 CST [common/tools/configtxgen] doOutputChannelCreateTx -> INFO 008 Writing new channel tx")],1),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x")])]),e._v(" "),r("h6",{attrs:{id:"-7"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#-7"}},[e._v("#")])]),e._v(" "),r("p",[r("font",{attrs:{color:"blue",size:"5"}},[e._v("Generating anchor peer update for Org1MSP")])],1),e._v(" "),r("h6",{attrs:{id:"-8"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#-8"}},[e._v("#")])]),e._v(" "),r("ul",[r("li",[r("font",{attrs:{color:"red"}},[e._v("configtxgen "),r("strong",[e._v("-profile")]),e._v(" TwoOrgsChannel "),r("strong",[e._v("-outputAnchorPeersUpdate")]),e._v(" ./channel-artifacts/Org1MSPanchors.tx "),r("strong",[e._v("-channelID")]),e._v(" mychannel "),r("strong",[e._v("-asOrg")]),e._v(" Org1MSP")]),e._v("\n2018-09-23 11:03:32.298 CST [common/tools/configtxgen] main -> INFO 001 Loading configuration\n2018-09-23 11:03:32.307 CST [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update\n2018-09-23 11:03:32.307 CST [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 003 Writing anchor peer update")],1),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x")])]),e._v(" "),r("h6",{attrs:{id:"-9"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#-9"}},[e._v("#")])]),e._v(" "),r("p",[r("font",{attrs:{color:"blue",size:"5"}},[e._v("Generating anchor peer update for Org2MSP")])],1),e._v(" "),r("h6",{attrs:{id:"-10"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#-10"}},[e._v("#")])]),e._v(" "),r("ul",[r("li",[r("font",{attrs:{color:"red"}},[e._v("configtxgen "),r("strong",[e._v("-profile")]),e._v(" TwoOrgsChannel "),r("strong",[e._v("-outputAnchorPeersUpdate")]),e._v(" ./channel-artifacts/Org2MSPanchors.tx "),r("strong",[e._v("-channelID")]),e._v(" mychannel "),r("strong",[e._v("-asOrg")]),e._v(" Org2MSP")]),e._v("\n2018-09-23 11:03:32.350 CST [common/tools/configtxgen] main -> INFO 001 Loading configuration\n2018-09-23 11:03:32.362 CST [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 002 Generating anchor peer update\n2018-09-23 11:03:32.363 CST [common/tools/configtxgen] doOutputAnchorPeersUpdate -> INFO 003 Writing anchor peer update")],1),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x")])])]),e._v(" "),r("h4",{attrs:{id:"_1-5-2-启动网路"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-2-启动网路"}},[e._v("#")]),e._v(" 1.5.2 启动网路")]),e._v(" "),r("p",[r("strong",[e._v("执行 ./byfn.sh up 启动网络")])]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# byfn == build your first network")]),e._v("\n$ ./byfn.sh up\n")])])]),r("p",[e._v("当我们看到START的时候，表示启动成功。")]),e._v(" "),r("blockquote",[r("p",[e._v('Starting for channel \'mychannel\' with CLI timeout of \'10\' seconds and CLI delay of \'3\' seconds\nContinue? [Y/n] y\nproceeding ...\nLOCAL_VERSION=1.2.0\nDOCKER_IMAGE_VERSION=1.2.0\nCreating network "net_byfn" with the default driver\nCreating volume "net_peer0.org2.example.com" with default driver\nCreating volume "net_peer1.org2.example.com" with default driver\nCreating volume "net_peer1.org1.example.com" with default driver\nCreating volume "net_peer0.org1.example.com" with default driver\nCreating volume "net_orderer.example.com" with default driver\nCreating peer1.org1.example.com ... done\nCreating peer0.org1.example.com ... done\nCreating peer0.org2.example.com ... done\nCreating orderer.example.com    ... done\nCreating peer1.org2.example.com ... done\nCreating cli                    ... done')]),e._v(" "),r("p",[e._v("​                                                                        "),r("font",{attrs:{color:"red",size:"24"}},[e._v("START")])],1),e._v(" "),r("p",[e._v("Build your first network (BYFN) end-to-end test")]),e._v(" "),r("p",[e._v("Channel name : mychannel\nCreating channel...")]),e._v(" "),r("ul",[r("li",[r("font",{attrs:{color:"red"}},[e._v("peer channel create -o orderer.example.com:7050 -c mychannel -f ./channel-artifacts/channel.tx --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem")])],1),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x\n2018-09-23 03:03:55.350 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized\n2018-09-23 03:03:55.420 UTC [cli/common] readBlock -> INFO 002 Got status: &{NOT_FOUND}\n2018-09-23 03:03:55.422 UTC [channelCmd] InitCmdFactory -> INFO 003 Endorser and orderer connections initialized\n2018-09-23 03:03:55.629 UTC [cli/common] readBlock -> INFO 004 Received block: 0\n===================== Channel 'mychannel' created =====================")])]),e._v(" "),r("p",[e._v("Having all peers join the channel...")]),e._v(" "),r("ul",[r("li",[e._v("peer channel join -b mychannel.block")]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x\n2018-09-23 03:03:55.699 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized\n2018-09-23 03:03:55.807 UTC [channelCmd] executeJoin -> INFO 002 Successfully submitted proposal to join channel\n===================== peer0.org1 joined channel 'mychannel' =====================")]),e._v(" "),r("li",[e._v("peer channel join -b mychannel.block")]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x\n2018-09-23 03:03:58.874 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized\n2018-09-23 03:03:58.976 UTC [channelCmd] executeJoin -> INFO 002 Successfully submitted proposal to join channel\n===================== peer1.org1 joined channel 'mychannel' =====================")]),e._v(" "),r("li",[e._v("peer channel join -b mychannel.block")]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x\n2018-09-23 03:04:02.058 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized\n2018-09-23 03:04:02.169 UTC [channelCmd] executeJoin -> INFO 002 Successfully submitted proposal to join channel\n===================== peer0.org2 joined channel 'mychannel' =====================")]),e._v(" "),r("li",[e._v("peer channel join -b mychannel.block")]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x\n2018-09-23 03:04:05.231 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized\n2018-09-23 03:04:05.339 UTC [channelCmd] executeJoin -> INFO 002 Successfully submitted proposal to join channel\n===================== peer1.org2 joined channel 'mychannel' =====================")])]),e._v(" "),r("p",[e._v("Updating anchor peers for org1...")]),e._v(" "),r("ul",[r("li",[e._v("peer channel update -o orderer.example.com:7050 -c mychannel -f ./channel-artifacts/Org1MSPanchors.tx --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem")]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x\n2018-09-23 03:04:08.406 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized\n2018-09-23 03:04:08.422 UTC [channelCmd] update -> INFO 002 Successfully submitted channel update\n===================== Anchor peers updated for org 'Org1MSP' on channel 'mychannel' =====================")])]),e._v(" "),r("p",[e._v("Updating anchor peers for org2...")]),e._v(" "),r("ul",[r("li",[e._v("peer channel update -o orderer.example.com:7050 -c mychannel -f ./channel-artifacts/Org2MSPanchors.tx --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem")]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x\n2018-09-23 03:04:11.503 UTC [channelCmd] InitCmdFactory -> INFO 001 Endorser and orderer connections initialized\n2018-09-23 03:04:11.519 UTC [channelCmd] update -> INFO 002 Successfully submitted channel update\n===================== Anchor peers updated for org 'Org2MSP' on channel 'mychannel' =====================")])]),e._v(" "),r("p",[e._v("Installing chaincode on peer0.org1...")]),e._v(" "),r("ul",[r("li",[e._v("peer chaincode install -n mycc -v 1.0 -l golang -p github.com/chaincode/chaincode_example02/go/")]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v('set +x\n2018-09-23 03:04:14.610 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc\n2018-09-23 03:04:14.610 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc\n2018-09-23 03:04:15.000 UTC [chaincodeCmd] install -> INFO 003 Installed remotely response:<status:200 payload:"OK" >\n===================== Chaincode is installed on peer0.org1 =====================')])]),e._v(" "),r("p",[e._v("Install chaincode on peer0.org2...")]),e._v(" "),r("ul",[r("li",[e._v("peer chaincode install -n mycc -v 1.0 -l golang -p github.com/chaincode/chaincode_example02/go/")]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v('set +x\n2018-09-23 03:04:15.069 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc\n2018-09-23 03:04:15.069 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc\n2018-09-23 03:04:15.203 UTC [chaincodeCmd] install -> INFO 003 Installed remotely response:<status:200 payload:"OK" >\n===================== Chaincode is installed on peer0.org2 =====================')])]),e._v(" "),r("p",[e._v("Instantiating chaincode on peer0.org2...")]),e._v(" "),r("ul",[r("li",[e._v("peer chaincode instantiate -o orderer.example.com:7050 --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C mychannel -n mycc -l golang -v 1.0 -c '{\"Args\":[\"init\",\"a\",\"100\",\"b\",\"200\"]}' -P 'AND ('''Org1MSP.peer''','''Org2MSP.peer''')'")]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x\n2018-09-23 03:04:15.284 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc\n2018-09-23 03:04:15.284 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc\n===================== Chaincode is instantiated on peer0.org2 on channel 'mychannel' =====================")])]),e._v(" "),r("p",[e._v("Querying chaincode on peer0.org1...\n===================== Querying on peer0.org1 on channel 'mychannel'... =====================\nAttempting to Query peer0.org1 ...3 secs")]),e._v(" "),r("ul",[r("li",[e._v('peer chaincode query -C mychannel -n mycc -c \'{"Args":["query","a"]}\'')]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x")])]),e._v(" "),r("p",[e._v("100\n===================== Query successful on peer0.org1 on channel 'mychannel' =====================\nSending invoke transaction on peer0.org1 peer0.org2...")]),e._v(" "),r("ul",[r("li",[e._v('peer chaincode invoke -o orderer.example.com:7050 --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C mychannel -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses peer0.org2.example.com:7051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt -c \'{"Args":["invoke","a","b","10"]}\'')]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x\n2018-09-23 03:05:17.876 UTC [chaincodeCmd] chaincodeInvokeOrQuery -> INFO 001 Chaincode invoke successful. result: status:200\n===================== Invoke transaction successful on peer0.org1 peer0.org2 on channel 'mychannel' =====================")])]),e._v(" "),r("p",[e._v("Installing chaincode on peer1.org2...")]),e._v(" "),r("ul",[r("li",[e._v("peer chaincode install -n mycc -v 1.0 -l golang -p github.com/chaincode/chaincode_example02/go/")]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v('set +x\n2018-09-23 03:05:17.966 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 001 Using default escc\n2018-09-23 03:05:17.966 UTC [chaincodeCmd] checkChaincodeCmdParams -> INFO 002 Using default vscc\n2018-09-23 03:05:18.340 UTC [chaincodeCmd] install -> INFO 003 Installed remotely response:<status:200 payload:"OK" >\n===================== Chaincode is installed on peer1.org2 =====================')])]),e._v(" "),r("p",[e._v("Querying chaincode on peer1.org2...\n===================== Querying on peer1.org2 on channel 'mychannel'... =====================\nAttempting to Query peer1.org2 ...3 secs")]),e._v(" "),r("ul",[r("li",[e._v('peer chaincode query -C mychannel -n mycc -c \'{"Args":["query","a"]}\'')]),e._v(" "),r("li",[e._v("res=0")]),e._v(" "),r("li",[e._v("set +x")])]),e._v(" "),r("p",[e._v("90\n===================== Query successful on peer1.org2 on channel 'mychannel' =====================")]),e._v(" "),r("p",[e._v("========= All GOOD, BYFN execution completed ===========")]),e._v(" "),r("p",[e._v("​                                                                             "),r("font",{attrs:{color:"red",size:"24"}},[e._v("END")])],1)]),e._v(" "),r("p",[e._v("执行结束，显示END")]),e._v(" "),r("ol",[r("li",[r("p",[r("strong",[e._v("通过docker ps命令可以查看到节点的启动情况。")])]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("$ docker "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("ps")]),e._v("\n")])])])]),e._v(" "),r("li",[r("p",[r("strong",[e._v("如果我们要停止网络，可以执行./byfn.sh down 命令来停止")])]),e._v(" "),r("div",{staticClass:"language-shell extra-class"},[r("pre",{pre:!0,attrs:{class:"language-shell"}},[r("code",[e._v("$ ./byfn.sh down\n")])])]),r("blockquote",[r("p",[e._v("Stopping for channel 'mychannel' with CLI timeout of '10' seconds and CLI delay of '3' seconds\nContinue? [Y/n] y\nproceeding ...\nStopping cli                    ... done\nStopping orderer.example.com    ... done\nStopping peer1.org2.example.com ... done\nStopping peer1.org1.example.com ... done\nStopping peer0.org2.example.com ... done\nStopping peer0.org1.example.com ... done\nRemoving cli                    ... done\nRemoving orderer.example.com    ... done\nRemoving peer1.org2.example.com ... done\nRemoving peer1.org1.example.com ... done\nRemoving peer0.org2.example.com ... done\nRemoving peer0.org1.example.com ... done\nRemoving network net_byfn\nRemoving volume net_peer0.org3.example.com\nWARNING: Volume net_peer0.org3.example.com not found.\nRemoving volume net_peer1.org3.example.com\nWARNING: Volume net_peer1.org3.example.com not found.\nRemoving volume net_orderer.example.com\nRemoving volume net_peer0.org2.example.com\nRemoving volume net_peer0.org1.example.com\nRemoving volume net_peer1.org1.example.com\nRemoving volume net_peer1.org2.example.com\n80510c01c3e8\n3625e4ce1b01\n43b4b0dfb14f\nUntagged: dev-peer1.org2.example.com-mycc-1.0-26c2ef32838554aac4f7ad6f100aca865e87959c9a126e86d764c8d01f8346ab:latest\nDeleted: sha256:3c7cf25f6520e39afe9ca0770821bcf8892c398ffa8fafaa4d39d4b18bf9a7af\nDeleted: sha256:ac116d2c1fbb503f766149a2acf422b754d59ba4be58902981d03b2969ef21c1\nDeleted: sha256:3e07d57882218fc26936d29deefba9e3bb0230d63b5e82d727ddbc92c59d942d\nDeleted: sha256:9c88b5b791167d2d37be1fc39886e5efa00d522aad7df03869b8eb30aa564b5f\nUntagged: dev-peer0.org1.example.com-mycc-1.0-384f11f484b9302df90b453200cfb25174305fce8f53f4e94d45ee3b6cab0ce9:latest\nDeleted: sha256:16229f944e6c2e665587638a47c80d9594693aede0d25d736d7225370efc67ae\nDeleted: sha256:6a5c627fbc23a646b17a493a6b7df67a2535501b8d77915aab6ac2c1ba97b1b3\nDeleted: sha256:4d0d3e96c80a3e0ee4c3553a125c99bbaffe6f1b487348f87ffb3059d6eb7f2e\nDeleted: sha256:a9600d47e71d3abb5f5afcbf56b6b21955e1bbe7fcb92040f1349667cf712bc0\nUntagged: dev-peer0.org2.example.com-mycc-1.0-15b571b3ce849066b7ec74497da3b27e54e0df1345daff3951b94245ce09c42b:latest\nDeleted: sha256:5f7c63593550d018ab28312c3d040b27a53f2d1e844ddd7d50a2fcf63454594b\nDeleted: sha256:a00c5883309d6a80aaf22f8b704b594c6129150c5048fd00d742077f212b28f7\nDeleted: sha256:71fae53aba930c88450ff286a5e54bceece45ea7aee465a8f2806aa967ab2b21\nDeleted: sha256:08fe44e007fd3d5377b44cca32e8f78d2249b0a1d9ce9312c68636fdacda2edc")])])])])])}),[],!1,null,null,null);n.default=t.exports}}]);