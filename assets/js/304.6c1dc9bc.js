(window.webpackJsonp=window.webpackJsonp||[]).push([[304],{882:function(e,t,n){"use strict";n.r(t);var a=n(44),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"ginæ­å»ºblog-api-s-ï¼ˆä¸€ï¼‰"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ginæ­å»ºblog-api-s-ï¼ˆä¸€ï¼‰"}},[e._v("#")]),e._v(" Ginæ­å»ºBlog API's ï¼ˆä¸€ï¼‰")]),e._v(" "),n("p",[e._v("é¡¹ç›®åœ°å€ï¼šhttps://github.com/EDDYCJY/go-gin-example")]),e._v(" "),n("h2",{attrs:{id:"æ€è€ƒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ€è€ƒ"}},[e._v("#")]),e._v(" æ€è€ƒ")]),e._v(" "),n("p",[e._v("é¦–å…ˆï¼Œåœ¨ä¸€ä¸ªåˆå§‹é¡¹ç›®å¼€å§‹å‰ï¼Œå¤§å®¶éƒ½è¦æ€è€ƒä¸€ä¸‹")]),e._v(" "),n("ul",[n("li",[n("p",[e._v("ç¨‹åºçš„æ–‡æœ¬é…ç½®å†™åœ¨ä»£ç ä¸­ï¼Œå¥½å—ï¼Ÿ")])]),e._v(" "),n("li",[n("p",[e._v("API çš„é”™è¯¯ç ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œåˆé€‚å—ï¼Ÿ")])]),e._v(" "),n("li",[n("p",[e._v("dbå¥æŸ„è°éƒ½å»"),n("code",[e._v("Open")]),e._v("ï¼Œæ²¡æœ‰ç»Ÿä¸€ç®¡ç†ï¼Œå¥½å—ï¼Ÿ")])]),e._v(" "),n("li",[n("p",[e._v("è·å–åˆ†é¡µç­‰å…¬å…±å‚æ•°ï¼Œè°éƒ½è‡ªå·±å†™ä¸€å¥—é€»è¾‘ï¼Œå¥½å—ï¼Ÿ")])])]),e._v(" "),n("p",[e._v("æ˜¾ç„¶åœ¨è¾ƒæ­£è§„çš„é¡¹ç›®ä¸­ï¼Œè¿™äº›é—®é¢˜çš„ç­”æ¡ˆéƒ½æ˜¯"),n("strong",[e._v("ä¸å¯ä»¥")]),e._v("ï¼Œä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æŒ‘é€‰ä¸€æ¬¾è¯»å†™é…ç½®æ–‡ä»¶çš„åº“ï¼Œç›®å‰æ¯”è¾ƒç«çš„æœ‰ "),n("a",{attrs:{href:"https://github.com/spf13/viper",target:"_blank",rel:"noopener noreferrer"}},[e._v("viper"),n("OutboundLink")],1),e._v("ï¼Œæœ‰å…´è¶£ä½ æœªæ¥å¯ä»¥ç®€å•äº†è§£ä¸€ä¸‹ï¼Œæ²¡å…´è¶£çš„è¯ç­‰ä»¥åæ¥è§¦åˆ°å†è¯´ã€‚")]),e._v(" "),n("p",[e._v("ä½†æ˜¯æœ¬ç³»åˆ—é€‰ç”¨ "),n("a",{attrs:{href:"https://github.com/go-ini/ini",target:"_blank",rel:"noopener noreferrer"}},[e._v("go-ini/ini"),n("OutboundLink")],1),e._v(" ï¼Œå®ƒçš„ "),n("a",{attrs:{href:"https://ini.unknwon.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ä¸­æ–‡æ–‡æ¡£"),n("OutboundLink")],1),e._v("ã€‚å¤§å®¶æ˜¯å¿…é¡»éœ€è¦è¦ç®€å•é˜…è¯»å®ƒçš„æ–‡æ¡£ï¼Œå†æ¥ç€å®Œæˆåé¢çš„å†…å®¹ã€‚")]),e._v(" "),n("h2",{attrs:{id:"æœ¬æ–‡ç›®æ ‡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœ¬æ–‡ç›®æ ‡"}},[e._v("#")]),e._v(" æœ¬æ–‡ç›®æ ‡")]),e._v(" "),n("ul",[n("li",[e._v("ç¼–å†™ä¸€ä¸ªç®€å•çš„APIé”™è¯¯ç åŒ…ã€‚")]),e._v(" "),n("li",[e._v("å®Œæˆä¸€ä¸ª Demo ç¤ºä¾‹ã€‚")]),e._v(" "),n("li",[e._v("è®²è§£ Demo æ‰€æ¶‰åŠçš„çŸ¥è¯†ç‚¹ã€‚")])]),e._v(" "),n("h2",{attrs:{id:"ä»‹ç»å’Œåˆå§‹åŒ–é¡¹ç›®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä»‹ç»å’Œåˆå§‹åŒ–é¡¹ç›®"}},[e._v("#")]),e._v(" ä»‹ç»å’Œåˆå§‹åŒ–é¡¹ç›®")]),e._v(" "),n("h3",{attrs:{id:"åˆå§‹åŒ–é¡¹ç›®ç›®å½•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åˆå§‹åŒ–é¡¹ç›®ç›®å½•"}},[e._v("#")]),e._v(" åˆå§‹åŒ–é¡¹ç›®ç›®å½•")]),e._v(" "),n("p",[e._v("åœ¨å‰ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬åˆå§‹åŒ–äº†ä¸€ä¸ª "),n("code",[e._v("go-gin-example")]),e._v(" é¡¹ç›®ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç»§ç»­æ–°å¢å¦‚ä¸‹ç›®å½•ç»“æ„ï¼š")]),e._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[e._v("go-gin-example/\nâ”œâ”€â”€ conf\nâ”œâ”€â”€ middleware\nâ”œâ”€â”€ models\nâ”œâ”€â”€ pkg\nâ”œâ”€â”€ routers\nâ””â”€â”€ runtime\n")])])]),n("ul",[n("li",[e._v("confï¼šç”¨äºå­˜å‚¨é…ç½®æ–‡ä»¶")]),e._v(" "),n("li",[e._v("middlewareï¼šåº”ç”¨ä¸­é—´ä»¶")]),e._v(" "),n("li",[e._v("modelsï¼šåº”ç”¨æ•°æ®åº“æ¨¡å‹")]),e._v(" "),n("li",[e._v("pkgï¼šç¬¬ä¸‰æ–¹åŒ…")]),e._v(" "),n("li",[e._v("routers è·¯ç”±é€»è¾‘å¤„ç†")]),e._v(" "),n("li",[e._v("runtimeï¼šåº”ç”¨è¿è¡Œæ—¶æ•°æ®")])]),e._v(" "),n("h3",{attrs:{id:"æ·»åŠ -go-modules-replace"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ -go-modules-replace"}},[e._v("#")]),e._v(" æ·»åŠ  Go Modules Replace")]),e._v(" "),n("p",[e._v("æ‰“å¼€ "),n("code",[e._v("go.mod")]),e._v(" æ–‡ä»¶ï¼Œæ–°å¢ "),n("code",[e._v("replace")]),e._v(" é…ç½®é¡¹ï¼Œå¦‚ä¸‹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("module github.com/EDDYCJY/go-gin-example\n\ngo 1.13\n\nrequire (...)\n\nreplace (\n\t\tgithub.com/EDDYCJY/go-gin-example/pkg/setting => ~/go-application/go-gin-example/pkg/setting\n\t\tgithub.com/EDDYCJY/go-gin-example/conf    \t  => ~/go-application/go-gin-example/pkg/conf\n\t\tgithub.com/EDDYCJY/go-gin-example/middleware  => ~/go-application/go-gin-example/middleware\n\t\tgithub.com/EDDYCJY/go-gin-example/models \t  => ~/go-application/go-gin-example/models\n\t\tgithub.com/EDDYCJY/go-gin-example/routers \t  => ~/go-application/go-gin-example/routers\n)\n")])])]),n("p",[e._v("å¯èƒ½ä½ ä¼šä¸ç†è§£ä¸ºä»€ä¹ˆè¦ç‰¹æ„è·‘æ¥åŠ  "),n("code",[e._v("replace")]),e._v(" é…ç½®é¡¹ï¼Œé¦–å…ˆä½ è¦çœ‹åˆ°æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å®Œæ•´çš„å¤–éƒ¨æ¨¡å—å¼•ç”¨è·¯å¾„ï¼ˆ"),n("code",[e._v("github.com/EDDYCJY/go-gin-example/xxx")]),e._v("ï¼‰ï¼Œè€Œè¿™ä¸ªæ¨¡å—è¿˜æ²¡æ¨é€åˆ°è¿œç¨‹ï¼Œæ˜¯æ²¡æœ‰åŠæ³•ä¸‹è½½ä¸‹æ¥çš„ï¼Œå› æ­¤éœ€è¦ç”¨ "),n("code",[e._v("replace")]),e._v(" å°†å…¶æŒ‡å®šè¯»å–æœ¬åœ°çš„æ¨¡å—è·¯å¾„ï¼Œè¿™æ ·å­å°±å¯ä»¥è§£å†³æœ¬åœ°æ¨¡å—è¯»å–çš„é—®é¢˜ã€‚")]),e._v(" "),n("p",[n("strong",[e._v("æ³¨ï¼šåç»­æ¯æ–°å¢ä¸€ä¸ªæœ¬åœ°åº”ç”¨ç›®å½•ï¼Œä½ éƒ½éœ€è¦ä¸»åŠ¨å» go.mod æ–‡ä»¶é‡Œæ–°å¢ä¸€æ¡ replaceï¼ˆæˆ‘ä¸ä¼šæé†’ä½ ï¼‰ï¼Œå¦‚æœä½ æ¼äº†ï¼Œé‚£ä¹ˆç¼–è¯‘æ—¶ä¼šå‡ºç°æŠ¥é”™ï¼Œæ‰¾ä¸åˆ°é‚£ä¸ªæ¨¡å—ã€‚")])]),e._v(" "),n("h3",{attrs:{id:"åˆå§‹é¡¹ç›®æ•°æ®åº“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åˆå§‹é¡¹ç›®æ•°æ®åº“"}},[e._v("#")]),e._v(" åˆå§‹é¡¹ç›®æ•°æ®åº“")]),e._v(" "),n("p",[e._v("æ–°å»º "),n("code",[e._v("blog")]),e._v(" æ•°æ®åº“ï¼Œç¼–ç ä¸º"),n("code",[e._v("utf8_general_ci")]),e._v("ï¼Œåœ¨ "),n("code",[e._v("blog")]),e._v(" æ•°æ®åº“ä¸‹ï¼Œæ–°å»ºä»¥ä¸‹è¡¨")]),e._v(" "),n("p",[n("strong",[e._v("1ã€ æ ‡ç­¾è¡¨")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("CREATE TABLE `blog_tag` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `name` varchar(100) DEFAULT '' COMMENT 'æ ‡ç­¾åç§°',\n  `created_on` int(10) unsigned DEFAULT '0' COMMENT 'åˆ›å»ºæ—¶é—´',\n  `created_by` varchar(100) DEFAULT '' COMMENT 'åˆ›å»ºäºº',\n  `modified_on` int(10) unsigned DEFAULT '0' COMMENT 'ä¿®æ”¹æ—¶é—´',\n  `modified_by` varchar(100) DEFAULT '' COMMENT 'ä¿®æ”¹äºº',\n  `deleted_on` int(10) unsigned DEFAULT '0',\n  `state` tinyint(3) unsigned DEFAULT '1' COMMENT 'çŠ¶æ€ 0ä¸ºç¦ç”¨ã€1ä¸ºå¯ç”¨',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='æ–‡ç« æ ‡ç­¾ç®¡ç†';\n")])])]),n("p",[n("strong",[e._v("2ã€ æ–‡ç« è¡¨")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("CREATE TABLE `blog_article` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `tag_id` int(10) unsigned DEFAULT '0' COMMENT 'æ ‡ç­¾ID',\n  `title` varchar(100) DEFAULT '' COMMENT 'æ–‡ç« æ ‡é¢˜',\n  `desc` varchar(255) DEFAULT '' COMMENT 'ç®€è¿°',\n  `content` text,\n  `created_on` int(11) DEFAULT NULL,\n  `created_by` varchar(100) DEFAULT '' COMMENT 'åˆ›å»ºäºº',\n  `modified_on` int(10) unsigned DEFAULT '0' COMMENT 'ä¿®æ”¹æ—¶é—´',\n  `modified_by` varchar(255) DEFAULT '' COMMENT 'ä¿®æ”¹äºº',\n  `deleted_on` int(10) unsigned DEFAULT '0',\n  `state` tinyint(3) unsigned DEFAULT '1' COMMENT 'çŠ¶æ€ 0ä¸ºç¦ç”¨1ä¸ºå¯ç”¨',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='æ–‡ç« ç®¡ç†';\n")])])]),n("p",[n("strong",[e._v("3ã€ è®¤è¯è¡¨")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("CREATE TABLE `blog_auth` (\n  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,\n  `username` varchar(50) DEFAULT '' COMMENT 'è´¦å·',\n  `password` varchar(50) DEFAULT '' COMMENT 'å¯†ç ',\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\nINSERT INTO `blog`.`blog_auth` (`id`, `username`, `password`) VALUES (null, 'test', 'test123456');\n\n")])])]),n("h2",{attrs:{id:"ç¼–å†™é¡¹ç›®é…ç½®åŒ…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™é¡¹ç›®é…ç½®åŒ…"}},[e._v("#")]),e._v(" ç¼–å†™é¡¹ç›®é…ç½®åŒ…")]),e._v(" "),n("p",[e._v("åœ¨ "),n("code",[e._v("go-gin-example")]),e._v(" åº”ç”¨ç›®å½•ä¸‹ï¼Œæ‹‰å– "),n("code",[e._v("go-ini/ini")]),e._v(" çš„ä¾èµ–åŒ…ï¼Œå¦‚ä¸‹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ go get -u github.com/go-ini/ini\ngo: finding github.com/go-ini/ini v1.48.0\ngo: downloading github.com/go-ini/ini v1.48.0\ngo: extracting github.com/go-ini/ini v1.48.0\n")])])]),n("p",[e._v("æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç¼–å†™åŸºç¡€çš„åº”ç”¨é…ç½®æ–‡ä»¶ï¼Œåœ¨ "),n("code",[e._v("go-gin-example")]),e._v(" çš„"),n("code",[e._v("conf")]),e._v("ç›®å½•ä¸‹æ–°å»º"),n("code",[e._v("app.ini")]),e._v("æ–‡ä»¶ï¼Œå†™å…¥å†…å®¹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("#debug or release\nRUN_MODE = debug\n\n[app]\nPAGE_SIZE = 10\nJWT_SECRET = 23347$040412\n\n[server]\nHTTP_PORT = 8000\nREAD_TIMEOUT = 60\nWRITE_TIMEOUT = 60\n\n[database]\nTYPE = mysql\nUSER = æ•°æ®åº“è´¦å·\nPASSWORD = æ•°æ®åº“å¯†ç \n#127.0.0.1:3306\nHOST = æ•°æ®åº“IP:æ•°æ®åº“ç«¯å£å·\nNAME = blog\nTABLE_PREFIX = blog_\n")])])]),n("p",[e._v("å»ºç«‹è°ƒç”¨é…ç½®çš„"),n("code",[e._v("setting")]),e._v("æ¨¡å—ï¼Œåœ¨"),n("code",[e._v("go-gin-example")]),e._v("çš„"),n("code",[e._v("pkg")]),e._v("ç›®å½•ä¸‹æ–°å»º"),n("code",[e._v("setting")]),e._v("ç›®å½•ï¼ˆæ³¨æ„æ–°å¢ replace é…ç½®ï¼‰ï¼Œæ–°å»º "),n("code",[e._v("setting.go")]),e._v(" æ–‡ä»¶ï¼Œå†™å…¥å†…å®¹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('package setting\n\nimport (\n\t"log"\n\t"time"\n\n\t"github.com/go-ini/ini"\n)\n\nvar (\n\tCfg *ini.File\n\n\tRunMode string\n\t\n\tHTTPPort int\n\tReadTimeout time.Duration\n\tWriteTimeout time.Duration\n\n\tPageSize int\n\tJwtSecret string\n)\n\nfunc init() {\n\tvar err error\n\tCfg, err = ini.Load("conf/app.ini")\n\tif err != nil {\n\t\tlog.Fatalf("Fail to parse \'conf/app.ini\': %v", err)\n\t}\n\n\tLoadBase()\n\tLoadServer()\n\tLoadApp()\n}\n\nfunc LoadBase() {\n\tRunMode = Cfg.Section("").Key("RUN_MODE").MustString("debug")\n}\n\nfunc LoadServer() {\n\tsec, err := Cfg.GetSection("server")\n\tif err != nil {\n\t\tlog.Fatalf("Fail to get section \'server\': %v", err)\n\t}\n\n\tHTTPPort = sec.Key("HTTP_PORT").MustInt(8000)\n\tReadTimeout = time.Duration(sec.Key("READ_TIMEOUT").MustInt(60)) * time.Second\n\tWriteTimeout =  time.Duration(sec.Key("WRITE_TIMEOUT").MustInt(60)) * time.Second\t\n}\n\nfunc LoadApp() {\n\tsec, err := Cfg.GetSection("app")\n\tif err != nil {\n\t\tlog.Fatalf("Fail to get section \'app\': %v", err)\n\t}\n\n\tJwtSecret = sec.Key("JWT_SECRET").MustString("!@)*#)!@U#@*!@!)")\n\tPageSize = sec.Key("PAGE_SIZE").MustInt(10)\n}\n')])])]),n("p",[e._v("å½“å‰çš„ç›®å½•ç»“æ„ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("go-gin-example\nâ”œâ”€â”€ conf\nâ”‚Â Â  â””â”€â”€ app.ini\nâ”œâ”€â”€ go.mod\nâ”œâ”€â”€ go.sum\nâ”œâ”€â”€ middleware\nâ”œâ”€â”€ models\nâ”œâ”€â”€ pkg\nâ”‚Â Â  â””â”€â”€ setting.go\nâ”œâ”€â”€ routers\nâ””â”€â”€ runtime\n")])])]),n("h2",{attrs:{id:"ç¼–å†™apié”™è¯¯ç åŒ…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™apié”™è¯¯ç åŒ…"}},[e._v("#")]),e._v(" ç¼–å†™APIé”™è¯¯ç åŒ…")]),e._v(" "),n("p",[e._v("å»ºç«‹é”™è¯¯ç çš„"),n("code",[e._v("e")]),e._v("æ¨¡å—ï¼Œåœ¨"),n("code",[e._v("go-gin-example")]),e._v("çš„"),n("code",[e._v("pkg")]),e._v("ç›®å½•ä¸‹æ–°å»º"),n("code",[e._v("e")]),e._v("ç›®å½•ï¼ˆæ³¨æ„æ–°å¢ replace é…ç½®ï¼‰ï¼Œæ–°å»º"),n("code",[e._v("code.go")]),e._v("å’Œ"),n("code",[e._v("msg.go")]),e._v("æ–‡ä»¶ï¼Œå†™å…¥å†…å®¹ï¼š")]),e._v(" "),n("p",[n("strong",[e._v("1ã€ code.goï¼š")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("package e\n\nconst (\n\tSUCCESS = 200\n\tERROR = 500\n\tINVALID_PARAMS = 400\n\n\tERROR_EXIST_TAG = 10001\n\tERROR_NOT_EXIST_TAG = 10002\n\tERROR_NOT_EXIST_ARTICLE = 10003\n\n\tERROR_AUTH_CHECK_TOKEN_FAIL = 20001\n\tERROR_AUTH_CHECK_TOKEN_TIMEOUT = 20002\n\tERROR_AUTH_TOKEN = 20003\n\tERROR_AUTH = 20004\n)\n")])])]),n("p",[n("strong",[e._v("2ã€ msg.goï¼š")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('package e\n\nvar MsgFlags = map[int]string {\n\tSUCCESS : "ok",\n\tERROR : "fail",\n\tINVALID_PARAMS : "è¯·æ±‚å‚æ•°é”™è¯¯",\n\tERROR_EXIST_TAG : "å·²å­˜åœ¨è¯¥æ ‡ç­¾åç§°",\n\tERROR_NOT_EXIST_TAG : "è¯¥æ ‡ç­¾ä¸å­˜åœ¨",\n\tERROR_NOT_EXIST_ARTICLE : "è¯¥æ–‡ç« ä¸å­˜åœ¨",\n\tERROR_AUTH_CHECK_TOKEN_FAIL : "Tokené‰´æƒå¤±è´¥",\n\tERROR_AUTH_CHECK_TOKEN_TIMEOUT : "Tokenå·²è¶…æ—¶",\n\tERROR_AUTH_TOKEN : "Tokenç”Ÿæˆå¤±è´¥",\n\tERROR_AUTH : "Tokené”™è¯¯",\n}\n\nfunc GetMsg(code int) string {\n\tmsg, ok := MsgFlags[code]\n\tif ok {\n\t\treturn msg\n\t}\n\n\treturn MsgFlags[ERROR]\n}\n')])])]),n("h2",{attrs:{id:"ç¼–å†™å·¥å…·åŒ…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™å·¥å…·åŒ…"}},[e._v("#")]),e._v(" ç¼–å†™å·¥å…·åŒ…")]),e._v(" "),n("p",[e._v("åœ¨"),n("code",[e._v("go-gin-example")]),e._v("çš„"),n("code",[e._v("pkg")]),e._v("ç›®å½•ä¸‹æ–°å»º"),n("code",[e._v("util")]),e._v("ç›®å½•ï¼ˆæ³¨æ„æ–°å¢ replace é…ç½®ï¼‰ï¼Œå¹¶æ‹‰å–"),n("code",[e._v("com")]),e._v("çš„ä¾èµ–åŒ…ï¼Œå¦‚ä¸‹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("go get -u github.com/unknwon/com\n")])])]),n("h3",{attrs:{id:"ç¼–å†™åˆ†é¡µé¡µç çš„è·å–æ–¹æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™åˆ†é¡µé¡µç çš„è·å–æ–¹æ³•"}},[e._v("#")]),e._v(" ç¼–å†™åˆ†é¡µé¡µç çš„è·å–æ–¹æ³•")]),e._v(" "),n("p",[e._v("åœ¨"),n("code",[e._v("util")]),e._v("ç›®å½•ä¸‹æ–°å»º"),n("code",[e._v("pagination.go")]),e._v("ï¼Œå†™å…¥å†…å®¹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('package util\n\nimport (\n\t"github.com/gin-gonic/gin"\n\t"github.com/unknwon/com"\n\n\t"github.com/EDDYCJY/go-gin-example/pkg/setting"\n)\n\nfunc GetPage(c *gin.Context) int {\n\tresult := 0\n\tpage, _ := com.StrTo(c.Query("page")).Int()\n    if page > 0 {\n        result = (page - 1) * setting.PageSize\n    }\n\n    return result\n}\n')])])]),n("h2",{attrs:{id:"ç¼–å†™models-init"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™models-init"}},[e._v("#")]),e._v(" ç¼–å†™models init")]),e._v(" "),n("p",[e._v("æ‹‰å–"),n("code",[e._v("gorm")]),e._v("çš„ä¾èµ–åŒ…ï¼Œå¦‚ä¸‹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("go get -u github.com/jinzhu/gorm\n")])])]),n("p",[e._v("æ‹‰å–"),n("code",[e._v("mysql")]),e._v("é©±åŠ¨çš„ä¾èµ–åŒ…ï¼Œå¦‚ä¸‹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("go get -u github.com/go-sql-driver/mysql\n")])])]),n("p",[e._v("å®Œæˆåï¼Œåœ¨"),n("code",[e._v("go-gin-example")]),e._v("çš„"),n("code",[e._v("models")]),e._v("ç›®å½•ä¸‹æ–°å»º"),n("code",[e._v("models.go")]),e._v("ï¼Œç”¨äº"),n("code",[e._v("models")]),e._v("çš„åˆå§‹åŒ–ä½¿ç”¨")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('package models\n\nimport (\n\t"log"\n\t"fmt"\n\n\t"github.com/jinzhu/gorm"\n\t_ "github.com/jinzhu/gorm/dialects/mysql"\n\n\t"github.com/EDDYCJY/go-gin-example/pkg/setting"\n)\n\nvar db *gorm.DB\n\ntype Model struct {\n\tID int `gorm:"primary_key" json:"id"`\n\tCreatedOn int `json:"created_on"`\n\tModifiedOn int `json:"modified_on"`\n}\n\nfunc init() {\n\tvar (\n\t\terr error\n\t\tdbType, dbName, user, password, host, tablePrefix string\n\t)\n\n\tsec, err := setting.Cfg.GetSection("database")\n\tif err != nil {\n\t\tlog.Fatal(2, "Fail to get section \'database\': %v", err)\n\t}\n\n\tdbType = sec.Key("TYPE").String()\n\tdbName = sec.Key("NAME").String()\n\tuser = sec.Key("USER").String()\n\tpassword = sec.Key("PASSWORD").String()\n\thost = sec.Key("HOST").String()\n\ttablePrefix = sec.Key("TABLE_PREFIX").String()\n\n\tdb, err = gorm.Open(dbType, fmt.Sprintf("%s:%s@tcp(%s)/%s?charset=utf8&parseTime=True&loc=Local", \n\t\tuser, \n\t\tpassword, \n\t\thost, \n\t\tdbName))\n\n\tif err != nil {\n\t\tlog.Println(err)\n\t}\n\n\tgorm.DefaultTableNameHandler = func (db *gorm.DB, defaultTableName string) string  {\n\t    return tablePrefix + defaultTableName;\n\t}\n\n\tdb.SingularTable(true)\n\tdb.LogMode(true)\n\tdb.DB().SetMaxIdleConns(10)\n\tdb.DB().SetMaxOpenConns(100)\n}\n\nfunc CloseDB() {\n\tdefer db.Close()\n}\n')])])]),n("h2",{attrs:{id:"ç¼–å†™é¡¹ç›®å¯åŠ¨ã€è·¯ç”±æ–‡ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™é¡¹ç›®å¯åŠ¨ã€è·¯ç”±æ–‡ä»¶"}},[e._v("#")]),e._v(" ç¼–å†™é¡¹ç›®å¯åŠ¨ã€è·¯ç”±æ–‡ä»¶")]),e._v(" "),n("p",[e._v("æœ€åŸºç¡€çš„å‡†å¤‡å·¥ä½œå®Œæˆå•¦ï¼Œè®©æˆ‘ä»¬å¼€å§‹ç¼–å†™Demoå§ï¼")]),e._v(" "),n("h3",{attrs:{id:"ç¼–å†™demo"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™demo"}},[e._v("#")]),e._v(" ç¼–å†™Demo")]),e._v(" "),n("p",[e._v("åœ¨"),n("code",[e._v("go-gin-example")]),e._v("ä¸‹å»ºç«‹"),n("code",[e._v("main.go")]),e._v("ä½œä¸ºå¯åŠ¨æ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯"),n("code",[e._v("main")]),e._v("åŒ…ï¼‰ï¼Œæˆ‘ä»¬å…ˆå†™ä¸ª"),n("strong",[e._v("Demo")]),e._v("ï¼Œå¸®åŠ©å¤§å®¶ç†è§£ï¼Œå†™å…¥æ–‡ä»¶å†…å®¹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('package main\n\nimport (\n    "fmt"\n\t  "net/http"\n\n    "github.com/gin-gonic/gin"\n\n\t  "github.com/EDDYCJY/go-gin-example/pkg/setting"\n)\n\nfunc main() {\n\trouter := gin.Default()\n    router.GET("/test", func(c *gin.Context) {\n\t\tc.JSON(200, gin.H{\n\t\t\t"message": "test",\n\t\t})\n\t})\n\n\ts := &http.Server{\n\t\tAddr:           fmt.Sprintf(":%d", setting.HTTPPort),\n\t\tHandler:        router,\n\t\tReadTimeout:    setting.ReadTimeout,\n\t\tWriteTimeout:   setting.WriteTimeout,\n\t\tMaxHeaderBytes: 1 << 20,\n\t}\n\n\ts.ListenAndServe()\n}\n')])])]),n("p",[e._v("æ‰§è¡Œ"),n("code",[e._v("go run main.go")]),e._v("ï¼ŒæŸ¥çœ‹å‘½ä»¤è¡Œæ˜¯å¦æ˜¾ç¤º")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.\n\n[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.\n - using env:\texport GIN_MODE=release\n - using code:\tgin.SetMode(gin.ReleaseMode)\n\n[GIN-debug] GET    /test                     --\x3e main.main.func1 (3 handlers)\n')])])]),n("p",[e._v("åœ¨æœ¬æœºæ‰§è¡Œ"),n("code",[e._v("curl 127.0.0.1:8000/test")]),e._v("ï¼Œæ£€æŸ¥æ˜¯å¦è¿”å›"),n("code",[e._v('{"message":"test"}')]),e._v("ã€‚")]),e._v(" "),n("h3",{attrs:{id:"çŸ¥è¯†ç‚¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#çŸ¥è¯†ç‚¹"}},[e._v("#")]),e._v(" çŸ¥è¯†ç‚¹")]),e._v(" "),n("p",[n("strong",[e._v("é‚£ä¹ˆï¼Œæˆ‘ä»¬æ¥å»¶ä¼¸ä¸€ä¸‹Demoæ‰€æ¶‰åŠçš„çŸ¥è¯†ç‚¹ï¼")])]),e._v(" "),n("h5",{attrs:{id:"æ ‡å‡†åº“"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ ‡å‡†åº“"}},[e._v("#")]),e._v(" æ ‡å‡†åº“")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://golang.org/pkg/fmt/",target:"_blank",rel:"noopener noreferrer"}},[e._v("fmt"),n("OutboundLink")],1),e._v("ï¼šå®ç°äº†ç±»ä¼¼Cè¯­è¨€printfå’Œscanfçš„æ ¼å¼åŒ–I/Oã€‚æ ¼å¼åŒ–åŠ¨ä½œï¼ˆ'verb'ï¼‰æºè‡ªCè¯­è¨€ä½†æ›´ç®€å•")]),e._v(" "),n("li",[n("a",{attrs:{href:"https://golang.org/pkg/net/http/",target:"_blank",rel:"noopener noreferrer"}},[e._v("net/http"),n("OutboundLink")],1),e._v("ï¼šæä¾›äº†HTTPå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å®ç°")])]),e._v(" "),n("h5",{attrs:{id:"gin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gin"}},[e._v("#")]),e._v(" "),n("strong",[e._v("Gin")])]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://gowalker.org/github.com/gin-gonic/gin#Default",target:"_blank",rel:"noopener noreferrer"}},[e._v("gin.Default()"),n("OutboundLink")],1),e._v("ï¼šè¿”å›Ginçš„"),n("code",[e._v("type Engine struct{...}")]),e._v("ï¼Œé‡Œé¢åŒ…å«"),n("code",[e._v("RouterGroup")]),e._v("ï¼Œç›¸å½“äºåˆ›å»ºä¸€ä¸ªè·¯ç”±"),n("code",[e._v("Handlers")]),e._v("ï¼Œå¯ä»¥åæœŸç»‘å®šå„ç±»çš„è·¯ç”±è§„åˆ™å’Œå‡½æ•°ã€ä¸­é—´ä»¶ç­‰")]),e._v(" "),n("li",[n("a",{attrs:{href:"https://gowalker.org/github.com/gin-gonic/gin#IRoutes",target:"_blank",rel:"noopener noreferrer"}},[e._v("router.GET(...){...}"),n("OutboundLink")],1),e._v("ï¼šåˆ›å»ºä¸åŒçš„HTTPæ–¹æ³•ç»‘å®šåˆ°"),n("code",[e._v("Handlers")]),e._v("ä¸­ï¼Œä¹Ÿæ”¯æŒPOSTã€PUTã€DELETEã€PATCHã€OPTIONSã€HEAD ç­‰å¸¸ç”¨çš„Restfulæ–¹æ³•")]),e._v(" "),n("li",[n("a",{attrs:{href:"https://gowalker.org/github.com/gin-gonic/gin#H",target:"_blank",rel:"noopener noreferrer"}},[e._v("gin.H{...}"),n("OutboundLink")],1),e._v("ï¼šå°±æ˜¯ä¸€ä¸ª"),n("code",[e._v("map[string]interface{}")])]),e._v(" "),n("li",[n("a",{attrs:{href:"https://gowalker.org/github.com/gin-gonic/gin#Context",target:"_blank",rel:"noopener noreferrer"}},[e._v("gin.Context"),n("OutboundLink")],1),e._v("ï¼š"),n("code",[e._v("Context")]),e._v("æ˜¯"),n("code",[e._v("gin")]),e._v("ä¸­çš„ä¸Šä¸‹æ–‡ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸­é—´ä»¶ä¹‹é—´ä¼ é€’å˜é‡ã€ç®¡ç†æµã€éªŒè¯JSONè¯·æ±‚ã€å“åº”JSONè¯·æ±‚ç­‰ï¼Œåœ¨"),n("code",[e._v("gin")]),e._v("ä¸­åŒ…å«å¤§é‡"),n("code",[e._v("Context")]),e._v("çš„æ–¹æ³•ï¼Œä¾‹å¦‚æˆ‘ä»¬å¸¸ç”¨çš„"),n("code",[e._v("DefaultQuery")]),e._v("ã€"),n("code",[e._v("Query")]),e._v("ã€"),n("code",[e._v("DefaultPostForm")]),e._v("ã€"),n("code",[e._v("PostForm")]),e._v("ç­‰ç­‰")])]),e._v(" "),n("h5",{attrs:{id:"http-server-å’Œ-listenandserveï¼Ÿ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-server-å’Œ-listenandserveï¼Ÿ"}},[e._v("#")]),e._v(" &http.Server å’Œ ListenAndServeï¼Ÿ")]),e._v(" "),n("p",[e._v("1ã€http.Serverï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("type Server struct {\n    Addr    string\n    Handler Handler\n    TLSConfig *tls.Config\n    ReadTimeout time.Duration\n    ReadHeaderTimeout time.Duration\n    WriteTimeout time.Duration\n    IdleTimeout time.Duration\n    MaxHeaderBytes int\n    ConnState func(net.Conn, ConnState)\n    ErrorLog *log.Logger\n}\n")])])]),n("ul",[n("li",[e._v("Addrï¼šç›‘å¬çš„TCPåœ°å€ï¼Œæ ¼å¼ä¸º"),n("code",[e._v(":8000")])]),e._v(" "),n("li",[e._v("Handlerï¼šhttpå¥æŸ„ï¼Œå®è´¨ä¸º"),n("code",[e._v("ServeHTTP")]),e._v("ï¼Œç”¨äºå¤„ç†ç¨‹åºå“åº”HTTPè¯·æ±‚")]),e._v(" "),n("li",[e._v("TLSConfigï¼šå®‰å…¨ä¼ è¾“å±‚åè®®ï¼ˆTLSï¼‰çš„é…ç½®")]),e._v(" "),n("li",[e._v("ReadTimeoutï¼šå…è®¸è¯»å–çš„æœ€å¤§æ—¶é—´")]),e._v(" "),n("li",[e._v("ReadHeaderTimeoutï¼šå…è®¸è¯»å–è¯·æ±‚å¤´çš„æœ€å¤§æ—¶é—´")]),e._v(" "),n("li",[e._v("WriteTimeoutï¼šå…è®¸å†™å…¥çš„æœ€å¤§æ—¶é—´")]),e._v(" "),n("li",[e._v("IdleTimeoutï¼šç­‰å¾…çš„æœ€å¤§æ—¶é—´")]),e._v(" "),n("li",[e._v("MaxHeaderBytesï¼šè¯·æ±‚å¤´çš„æœ€å¤§å­—èŠ‚æ•°")]),e._v(" "),n("li",[e._v("ConnStateï¼šæŒ‡å®šä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°ï¼Œå½“å®¢æˆ·ç«¯è¿æ¥å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨")]),e._v(" "),n("li",[e._v("ErrorLogï¼šæŒ‡å®šä¸€ä¸ªå¯é€‰çš„æ—¥å¿—è®°å½•å™¨ï¼Œç”¨äºæ¥æ”¶ç¨‹åºçš„æ„å¤–è¡Œä¸ºå’Œåº•å±‚ç³»ç»Ÿé”™è¯¯ï¼›å¦‚æœæœªè®¾ç½®æˆ–ä¸º"),n("code",[e._v("nil")]),e._v("åˆ™é»˜è®¤ä»¥æ—¥å¿—åŒ…çš„æ ‡å‡†æ—¥å¿—è®°å½•å™¨å®Œæˆï¼ˆä¹Ÿå°±æ˜¯åœ¨æ§åˆ¶å°è¾“å‡ºï¼‰")])]),e._v(" "),n("p",[e._v("2ã€ ListenAndServeï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('func (srv *Server) ListenAndServe() error {\n    addr := srv.Addr\n    if addr == "" {\n        addr = ":http"\n    }\n    ln, err := net.Listen("tcp", addr)\n    if err != nil {\n        return err\n    }\n    return srv.Serve(tcpKeepAliveListener{ln.(*net.TCPListener)})\n}\n')])])]),n("p",[e._v("å¼€å§‹ç›‘å¬æœåŠ¡ï¼Œç›‘å¬TCPç½‘ç»œåœ°å€ï¼ŒAddrå’Œè°ƒç”¨åº”ç”¨ç¨‹åºå¤„ç†è¿æ¥ä¸Šçš„è¯·æ±‚ã€‚")]),e._v(" "),n("p",[e._v("æˆ‘ä»¬åœ¨æºç ä¸­çœ‹åˆ°"),n("code",[e._v("Addr")]),e._v("æ˜¯è°ƒç”¨æˆ‘ä»¬åœ¨"),n("code",[e._v("&http.Server")]),e._v("ä¸­è®¾ç½®çš„å‚æ•°ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è®¾ç½®æ—¶è¦ç”¨"),n("code",[e._v("&")]),e._v("ï¼Œæˆ‘ä»¬è¦æ”¹å˜å‚æ•°çš„å€¼ï¼Œå› ä¸ºæˆ‘ä»¬"),n("code",[e._v("ListenAndServe")]),e._v("å’Œå…¶ä»–ä¸€äº›æ–¹æ³•éœ€è¦ç”¨åˆ°"),n("code",[e._v("&http.Server")]),e._v("ä¸­çš„å‚æ•°ï¼Œä»–ä»¬æ˜¯ç›¸äº’å½±å“çš„ã€‚")]),e._v(" "),n("p",[e._v("3ã€ "),n("code",[e._v("http.ListenAndServe")]),e._v("å’Œ "),n("a",{attrs:{href:"https://segmentfault.com/a/1190000013297625#articleHeader5",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¿è½½ä¸€"),n("OutboundLink")],1),e._v(" çš„"),n("code",[e._v("r.Run()")]),e._v("æœ‰åŒºåˆ«å—ï¼Ÿ")]),e._v(" "),n("p",[e._v("æˆ‘ä»¬çœ‹çœ‹"),n("code",[e._v("r.Run")]),e._v("çš„å®ç°ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('func (engine *Engine) Run(addr ...string) (err error) {\n    defer func() { debugPrintError(err) }()\n\n    address := resolveAddress(addr)\n    debugPrint("Listening and serving HTTP on %s\\n", address)\n    err = http.ListenAndServe(address, engine)\n    return\n}\n')])])]),n("p",[e._v("é€šè¿‡åˆ†ææºç ï¼Œå¾—çŸ¥"),n("strong",[e._v("æœ¬è´¨ä¸Šæ²¡æœ‰åŒºåˆ«")]),e._v("ï¼ŒåŒæ—¶ä¹Ÿå¾—çŸ¥äº†å¯åŠ¨"),n("code",[e._v("gin")]),e._v("æ—¶çš„ç›‘å¬debugä¿¡æ¯åœ¨è¿™é‡Œè¾“å‡ºã€‚")]),e._v(" "),n("p",[e._v("4ã€ ä¸ºä»€ä¹ˆDemoé‡Œä¼šæœ‰"),n("code",[e._v("WARNING")]),e._v("ï¼Ÿ")]),e._v(" "),n("p",[e._v("é¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹"),n("code",[e._v("Default()")]),e._v("çš„å®ç°")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("// Default returns an Engine instance with the Logger and Recovery middleware already attached.\nfunc Default() *Engine {\n\tdebugPrintWARNINGDefault()\n\tengine := New()\n\tengine.Use(Logger(), Recovery())\n\treturn engine\n}\n")])])]),n("p",[e._v("å¤§å®¶å¯ä»¥çœ‹åˆ°é»˜è®¤æƒ…å†µä¸‹ï¼Œå·²ç»é™„åŠ äº†æ—¥å¿—ã€æ¢å¤ä¸­é—´ä»¶çš„å¼•æ“å®ä¾‹ã€‚å¹¶ä¸”åœ¨å¼€å¤´è°ƒç”¨äº†"),n("code",[e._v("debugPrintWARNINGDefault()")]),e._v("ï¼Œè€Œå®ƒçš„å®ç°å°±æ˜¯è¾“å‡ºè¯¥è¡Œæ—¥å¿—")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("func debugPrintWARNINGDefault() {\n\tdebugPrint(`[WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.\n`)\n}\n")])])]),n("p",[e._v("è€Œå¦å¤–ä¸€ä¸ª"),n("code",[e._v('Running in "debug" mode. Switch to "release" mode in production.')]),e._v("ï¼Œæ˜¯è¿è¡Œæ¨¡å¼åŸå› ï¼Œå¹¶ä¸éš¾ç†è§£ï¼Œå·²åœ¨é…ç½®æ–‡ä»¶çš„ç®¡æ§ä¸‹ ğŸ˜ƒï¼Œè¿ç»´äººå‘˜éšæ—¶å°±å¯ä»¥ä¿®æ”¹å®ƒçš„é…ç½®ã€‚")]),e._v(" "),n("p",[e._v("5ã€ Demoçš„"),n("code",[e._v("router.GET")]),e._v("ç­‰è·¯ç”±è§„åˆ™å¯ä»¥ä¸å†™åœ¨"),n("code",[e._v("main")]),e._v("åŒ…ä¸­å—ï¼Ÿ")]),e._v(" "),n("p",[e._v("æˆ‘ä»¬å‘ç°"),n("code",[e._v("router.GET")]),e._v("ç­‰è·¯ç”±è§„åˆ™ï¼Œåœ¨Demoä¸­è¢«ç¼–å†™åœ¨äº†"),n("code",[e._v("main")]),e._v("åŒ…ä¸­ï¼Œæ„Ÿè§‰å¾ˆå¥‡æ€ªï¼Œæˆ‘ä»¬å»æŠ½ç¦»è¿™éƒ¨åˆ†é€»è¾‘ï¼")]),e._v(" "),n("p",[e._v("åœ¨"),n("code",[e._v("go-gin-example")]),e._v("ä¸‹"),n("code",[e._v("routers")]),e._v("ç›®å½•æ–°å»º"),n("code",[e._v("router.go")]),e._v("æ–‡ä»¶ï¼Œå†™å…¥å†…å®¹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('package routers\n\nimport (\n    "github.com/gin-gonic/gin"\n    \n    "github.com/EDDYCJY/go-gin-example/pkg/setting"\n)\n\nfunc InitRouter() *gin.Engine {\n    r := gin.New()\n\n    r.Use(gin.Logger())\n\n    r.Use(gin.Recovery())\n\n    gin.SetMode(setting.RunMode)\n\n    r.GET("/test", func(c *gin.Context) {\n        c.JSON(200, gin.H{\n            "message": "test",\n        })\n    })\n\n    return r\n}\n')])])]),n("p",[e._v("ä¿®æ”¹"),n("code",[e._v("main.go")]),e._v("çš„æ–‡ä»¶å†…å®¹ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('package main\n\nimport (\n\t"fmt"\n\t"net/http"\n\n\t"github.com/EDDYCJY/go-gin-example/routers"\n\t"github.com/EDDYCJY/go-gin-example/pkg/setting"\n)\n\nfunc main() {\n\trouter := routers.InitRouter()\n\n\ts := &http.Server{\n\t\tAddr:           fmt.Sprintf(":%d", setting.HTTPPort),\n\t\tHandler:        router,\n\t\tReadTimeout:    setting.ReadTimeout,\n\t\tWriteTimeout:   setting.WriteTimeout,\n\t\tMaxHeaderBytes: 1 << 20,\n\t}\n\n\ts.ListenAndServe()\n}\n')])])]),n("p",[e._v("å½“å‰ç›®å½•ç»“æ„ï¼š")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("go-gin-example/\nâ”œâ”€â”€ conf\nâ”‚Â Â  â””â”€â”€ app.ini\nâ”œâ”€â”€ main.go\nâ”œâ”€â”€ middleware\nâ”œâ”€â”€ models\nâ”‚Â Â  â””â”€â”€ models.go\nâ”œâ”€â”€ pkg\nâ”‚Â Â  â”œâ”€â”€ e\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ code.go\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ msg.go\nâ”‚Â Â  â”œâ”€â”€ setting\nâ”‚Â Â  â”‚Â Â  â””â”€â”€ setting.go\nâ”‚Â Â  â””â”€â”€ util\nâ”‚Â Â      â””â”€â”€ pagination.go\nâ”œâ”€â”€ routers\nâ”‚Â Â  â””â”€â”€ router.go\nâ”œâ”€â”€ runtime\n")])])]),n("p",[e._v("é‡å¯æœåŠ¡ï¼Œæ‰§è¡Œ "),n("code",[e._v("curl 127.0.0.1:8000/test")]),e._v("æŸ¥çœ‹æ˜¯å¦æ­£ç¡®è¿”å›ã€‚")]),e._v(" "),n("p",[e._v("ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†ä»¥æˆ‘ä»¬çš„ Demo ä¸ºèµ·ç‚¹è¿›è¡Œä¿®æ”¹ï¼Œå¼€å§‹ç¼–ç ï¼")]),e._v(" "),n("h2",{attrs:{id:"å‚è€ƒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒ"}},[e._v("#")]),e._v(" å‚è€ƒ")]),e._v(" "),n("h3",{attrs:{id:"æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç "}},[e._v("#")]),e._v(" æœ¬ç³»åˆ—ç¤ºä¾‹ä»£ç ")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/EDDYCJY/go-gin-example",target:"_blank",rel:"noopener noreferrer"}},[e._v("go-gin-example"),n("OutboundLink")],1)])]),e._v(" "),n("h2",{attrs:{id:"å…³äº"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å…³äº"}},[e._v("#")]),e._v(" å…³äº")]),e._v(" "),n("h3",{attrs:{id:"ä¿®æ”¹è®°å½•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¿®æ”¹è®°å½•"}},[e._v("#")]),e._v(" ä¿®æ”¹è®°å½•")]),e._v(" "),n("ul",[n("li",[e._v("ç¬¬ä¸€ç‰ˆï¼š2018å¹´02æœˆ16æ—¥å‘å¸ƒæ–‡ç« ")]),e._v(" "),n("li",[e._v("ç¬¬äºŒç‰ˆï¼š2019å¹´10æœˆ01æ—¥ä¿®æ”¹æ–‡ç« ")])]),e._v(" "),n("h2",{attrs:{id:"ï¼Ÿ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ï¼Ÿ"}},[e._v("#")]),e._v(" ï¼Ÿ")]),e._v(" "),n("p",[e._v("å¦‚æœæœ‰ä»»ä½•ç–‘é—®æˆ–é”™è¯¯ï¼Œæ¬¢è¿åœ¨ "),n("a",{attrs:{href:"https://github.com/EDDYCJY/blog",target:"_blank",rel:"noopener noreferrer"}},[e._v("issues"),n("OutboundLink")],1),e._v(" è¿›è¡Œæé—®æˆ–ç»™äºˆä¿®æ­£æ„è§ï¼Œå¦‚æœå–œæ¬¢æˆ–å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ Starï¼Œå¯¹ä½œè€…æ˜¯ä¸€ç§é¼“åŠ±å’Œæ¨è¿›ã€‚")]),e._v(" "),n("h3",{attrs:{id:"æˆ‘çš„å…¬ä¼—å·"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æˆ‘çš„å…¬ä¼—å·"}},[e._v("#")]),e._v(" æˆ‘çš„å…¬ä¼—å·")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://image.eddycjy.com/8d0b0c3a11e74efd5fdfd7910257e70b.jpg",alt:"image"}})])])}),[],!1,null,null,null);t.default=r.exports}}]);