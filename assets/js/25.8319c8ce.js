(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1045:function(t,a,s){"use strict";s.r(a);var n=s(44),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"day09课上笔记"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#day09课上笔记"}},[t._v("#")]),t._v(" day09课上笔记")]),t._v(" "),n("h1",{attrs:{id:"课程安排"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#课程安排"}},[t._v("#")]),t._v(" 课程安排:")]),t._v(" "),n("p",[t._v("日志收集项目:9.7\\9.21\\9.28")]),t._v(" "),n("p",[t._v("gin框架和微服务:10.19开始 大概4天")]),t._v(" "),n("p",[t._v("Docker和k8s:大概4天.")]),t._v(" "),n("p",[t._v("理论上2019.12.7结课")]),t._v(" "),n("p",[t._v("今年过年早,1.24就除夕了.")]),t._v(" "),n("h1",{attrs:{id:"今日分享"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#今日分享"}},[t._v("#")]),t._v(" 今日分享")]),t._v(" "),n("p",[t._v("注释\\日志\\单元测试")]),t._v(" "),n("p",[t._v("要做就做专业的,从一开始就规范起来.")]),t._v(" "),n("p",[t._v("《无声告白》")]),t._v(" "),n("h1",{attrs:{id:"内容回顾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内容回顾"}},[t._v("#")]),t._v(" 内容回顾")]),t._v(" "),n("h2",{attrs:{id:"互斥锁"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#互斥锁"}},[t._v("#")]),t._v(" 互斥锁")]),t._v(" "),n("p",[n("code",[t._v("sync.Mutex")])]),t._v(" "),n("p",[t._v("是一个结构体.是值类型.给函数传参数的时候要传指针.")]),t._v(" "),n("h3",{attrs:{id:"两个方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#两个方法"}},[t._v("#")]),t._v(" 两个方法")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" lock sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Mutex\nlock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Lock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加锁")]),t._v("\nlock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Unlock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解锁")]),t._v("\n")])])]),n("h3",{attrs:{id:"为什么要用锁"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为什么要用锁"}},[t._v("#")]),t._v(" 为什么要用锁?")]),t._v(" "),n("p",[t._v("防止同一时刻多个goroutine操作同一个资源.")]),t._v(" "),n("h2",{attrs:{id:"读写互斥锁"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#读写互斥锁"}},[t._v("#")]),t._v(" 读写互斥锁")]),t._v(" "),n("h3",{attrs:{id:"应用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),n("p",[t._v("适用于读多写少的场景下,才能提高程序的执行效率.")]),t._v(" "),n("h3",{attrs:{id:"特点"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[t._v("#")]),t._v(" 特点")]),t._v(" "),n("ol",[n("li",[t._v("读的goroutine来了获取的是"),n("strong",[t._v("读锁")]),t._v(",后续的goroutine能读不能写")]),t._v(" "),n("li",[t._v("写的goroutine来了获取的是"),n("strong",[t._v("写锁")]),t._v(",后续的goroutine不管是读还是写都要等待获取锁")])]),t._v(" "),n("h3",{attrs:{id:"使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" rwLock sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RWMutex\nrwLock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("RLock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取读锁")]),t._v("\nrwLock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("RUnlock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 释放读写")]),t._v("\n\nrwLock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Lock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取写锁")]),t._v("\nrwLock"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Unlock")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 释放写锁")]),t._v("\n")])])]),n("h2",{attrs:{id:"等待组"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#等待组"}},[t._v("#")]),t._v(" 等待组")]),t._v(" "),n("p",[n("code",[t._v("sync.Waitgroup")])]),t._v(" "),n("p",[t._v("用来等groutine执行完再继续")]),t._v(" "),n("p",[t._v("是一个结构体.是值类型.给函数传参数的时候要传指针.")]),t._v(" "),n("h3",{attrs:{id:"使用-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-2"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" wg sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("WaitGroup\n\nwg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 起几个goroutine就加几个计数")]),t._v("\nwg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Done")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在goroutine对应的函数中,函数要结束的时候表示goroutine完成,计数器-1")]),t._v("\nwg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Wait")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 阻塞,等待所有的goroutine都结束")]),t._v("\n")])])]),n("h2",{attrs:{id:"sync-once"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sync-once"}},[t._v("#")]),t._v(" Sync.Once")]),t._v(" "),n("h3",{attrs:{id:"使用场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用场景"}},[t._v("#")]),t._v(" 使用场景")]),t._v(" "),n("p",[t._v("某些函数只需要执行一次的时候,就可以使用"),n("code",[t._v("sync.Once")])]),t._v(" "),n("p",[t._v("比如 blog加载图片那个例子")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" once sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Once\n\nonce"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Do")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 接受一个没有参数也没有返回值的函数,如有需要可以使用闭包")]),t._v("\n")])])]),n("h3",{attrs:{id:"sync-map"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sync-map"}},[t._v("#")]),t._v(" sync.Map")]),t._v(" "),n("h3",{attrs:{id:"使用场景-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用场景-2"}},[t._v("#")]),t._v(" 使用场景")]),t._v(" "),n("p",[t._v("并发操作一个map的时候,内置的map不是并发安全的.")]),t._v(" "),n("h3",{attrs:{id:"使用-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-3"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),n("p",[t._v("是一个开箱即用(不需要make初始化)的并发安全的map,")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" syncMap sync"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Map\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Map[key] = value // 原生map")]),t._v("\nsyncMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Store")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsyncMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Load")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsyncMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("LoadOrStore")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsyncMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Delete")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsyncMap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Range")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"原子操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#原子操作"}},[t._v("#")]),t._v(" 原子操作")]),t._v(" "),n("p",[t._v("Go语言内置了一些针对内置的基本数据类型的一些并发安全的操作")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\natomic"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("AddInt64")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"网络编程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络编程"}},[t._v("#")]),t._v(" 网络编程")]),t._v(" "),n("h3",{attrs:{id:"互联网的协议"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#互联网的协议"}},[t._v("#")]),t._v(" 互联网的协议")]),t._v(" "),n("p",[t._v("OSI七层模型")]),t._v(" "),n("p",[t._v("HTTP:超文本传输协议.\n"),n("strong",[t._v("裸体的人")])]),t._v(" "),n("p",[t._v("规定了:浏览器和网站服务器之间通信的规则.")]),t._v(" "),n("p",[t._v("HTML:超文本标记语言")]),t._v(" "),n("p",[t._v("学的就是标记的符号,标签")]),t._v(" "),n("p",[t._v("CSS:层叠样式表")]),t._v(" "),n("p",[n("strong",[t._v("让人穿上衣服/化妆")])]),t._v(" "),n("p",[t._v("规定了HTML中标签的具体样式(颜色\\背景\\大小\\位置\\浮动...)")]),t._v(" "),n("p",[t._v("JavaScript:一种跑在浏览器上的编程语言.")]),t._v(" "),n("p",[n("strong",[t._v("让人动起来")])]),t._v(" "),n("h2",{attrs:{id:"http-client"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-client"}},[t._v("#")]),t._v(" HTTP Client")]),t._v(" "),n("p",[t._v("GET请求带参数")]),t._v(" "),n("p",[t._v("共用client")]),t._v(" "),n("p",[t._v("disableKeepAlive的client")]),t._v(" "),n("h1",{attrs:{id:"今日内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#今日内容"}},[t._v("#")]),t._v(" 今日内容")]),t._v(" "),n("h2",{attrs:{id:"单元测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#单元测试"}},[t._v("#")]),t._v(" 单元测试")]),t._v(" "),n("p",[t._v("开发自己给自己的代码写测试。")]),t._v(" "),n("p",[t._v("测试函数覆盖率：100%")]),t._v(" "),n("p",[t._v("测试覆盖率：60%")]),t._v(" "),n("p",[t._v("测试文件要以"),n("code",[t._v("**_test.go")]),t._v("结尾")]),t._v(" "),n("p",[t._v("单元测试函数要以")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("TestXxx")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("t "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("testing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("T"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"性能基准测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#性能基准测试"}},[t._v("#")]),t._v(" 性能基准测试")]),t._v(" "),n("p",[t._v("性能基准测试")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// BenchmarkSplit 基准测试")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("BenchmarkSplit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("testing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("B"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("N"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Split")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a:b:c"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('":"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("性能比较函数")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 性能比较测试")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("benchmarkFib")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("testing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("B"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" n "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("N"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fib")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("BenchmarkFib1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("testing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("B"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("benchmarkFib")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"flag"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#flag"}},[t._v("#")]),t._v(" flag")]),t._v(" "),n("p",[t._v("命令行标志位参数的使用, "),n("a",{attrs:{href:"https://www.liwenzhou.com/posts/Go/go_flag/",target:"_blank",rel:"noopener noreferrer"}},[t._v("博客地址"),n("OutboundLink")],1)]),t._v(" "),n("h3",{attrs:{id:"支持的参数类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#支持的参数类型"}},[t._v("#")]),t._v(" 支持的参数类型")]),t._v(" "),n("p",[n("img",{attrs:{src:s(537),alt:"1566645940813"}})]),t._v(" "),n("h3",{attrs:{id:"两种方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#两种方式"}},[t._v("#")]),t._v(" 两种方式")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("name "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("String")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"默认值"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"帮助信息"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意返回的name是指针类型")]),t._v("\n")])])]),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\nflag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("StringVar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"默认值"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"帮助信息"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意传指针")]),t._v("\n")])])]),n("h3",{attrs:{id:"必须flag-parse"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#必须flag-parse"}},[t._v("#")]),t._v(" 必须flag.Parse()")]),t._v(" "),n("p",[t._v("必须调用"),n("code",[t._v("flag.Parse()")]),t._v("参数才能从命令行解析到具体的参数.")]),t._v(" "),n("h3",{attrs:{id:"其他参数相关"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#其他参数相关"}},[t._v("#")]),t._v(" 其他参数相关")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[t._v("flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Args")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("////返回命令行参数后的其他参数，以[]string类型")]),t._v("\nflag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("NArg")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回命令行参数后的其他参数个数")]),t._v("\nflag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("NFlag")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回使用的命令行参数个数")]),t._v("\n")])])]),n("h2",{attrs:{id:"pprof调试工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pprof调试工具"}},[t._v("#")]),t._v(" pprof调试工具")]),t._v(" "),n("h3",{attrs:{id:"cpu维度的profile数据："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cpu维度的profile数据："}},[t._v("#")]),t._v(" CPU维度的profile数据：")]),t._v(" "),n("p",[n("img",{attrs:{src:s(538),alt:"1566645407152"}})]),t._v(" "),n("h3",{attrs:{id:"内存维度的profile数据："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内存维度的profile数据："}},[t._v("#")]),t._v(" 内存维度的profile数据：")]),t._v(" "),n("p",[n("img",{attrs:{src:s(539),alt:"1566645445854"}})]),t._v(" "),n("h3",{attrs:{id:"进行分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进行分析"}},[t._v("#")]),t._v(" 进行分析")]),t._v(" "),n("div",{staticClass:"language-go extra-class"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" tool pprof profile输出的文件\n")])])]),n("p",[t._v("常用命令:")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pprof"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("top")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" // 查看前3占用CPU高的函数\n")])])]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pprof"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" list 函数名 // 查看函数名详细数据\n")])])]),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pprof"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" web // 使用浏览器查看svg图,需要先安装 graphviz 工具\n")])])]),n("p",[t._v("火焰图")]),t._v(" "),n("h1",{attrs:{id:"每周任务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#每周任务"}},[t._v("#")]),t._v(" 每周任务")]),t._v(" "),n("ol",[n("li",[t._v("下课回去的路上用手机的备忘录概括(总结)一下当天的内容.\n"),n("ol",[n("li",[t._v("先列梗概(目录/大纲)")]),t._v(" "),n("li",[t._v("再去逐一(一个一个的)填充重点内容")]),t._v(" "),n("li",[t._v("写完往微信的小组群里一发,自豪感就油然而生.")])])]),t._v(" "),n("li",[t._v("小组微信群组团讨论作业需求和写作业")]),t._v(" "),n("li",[t._v("编写一个回文检测函数，并为其编写单元测试和基准测试，根据测试的结果逐步对其进行优化。（回文：一个字符串正序和逆序一样，如“Madam,I’mAdam”、“油灯少灯油”等。）")]),t._v(" "),n("li",[t._v("下周来之前把MySQL、Redis 环境都准备好!")])])])}),[],!1,null,null,null);a.default=r.exports},537:function(t,a,s){t.exports=s.p+"assets/img/1566645940813.bd1559e8.png"},538:function(t,a,s){t.exports=s.p+"assets/img/1566645407152.457b3dd2.png"},539:function(t,a,s){t.exports=s.p+"assets/img/1566645445854.26e0f41c.png"}}]);