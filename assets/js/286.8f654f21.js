(window.webpackJsonp=window.webpackJsonp||[]).push([[286],{864:function(e,t,a){"use strict";a.r(t);var r=a(44),o=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"_1-4-ä½¿ç”¨-gomock-è¿›è¡Œå•å…ƒæµ‹è¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-ä½¿ç”¨-gomock-è¿›è¡Œå•å…ƒæµ‹è¯•"}},[e._v("#")]),e._v(" 1.4 ä½¿ç”¨ Gomock è¿›è¡Œå•å…ƒæµ‹è¯•")]),e._v(" "),a("p",[e._v("åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œéœ€è¦è¿›è¡Œå•å…ƒæµ‹è¯•çš„æ—¶å€™ã€‚å´å¾€å¾€å‘ç°æœ‰ä¸€å¤§å †ä¾èµ–é¡¹ã€‚è¿™æ—¶å€™å°±æ˜¯ "),a("a",{attrs:{href:"https://github.com/golang/mock",target:"_blank",rel:"noopener noreferrer"}},[e._v("Gomock"),a("OutboundLink")],1),e._v(" å¤§æ˜¾èº«æ‰‹çš„æ—¶å€™äº†")]),e._v(" "),a("p",[e._v("Gomock æ˜¯ Go è¯­è¨€çš„ä¸€ä¸ª mock æ¡†æ¶ï¼Œå®˜æ–¹çš„é‚£ç§ ğŸ¤ª")]),e._v(" "),a("h2",{attrs:{id:"å®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…"}},[e._v("#")]),e._v(" å®‰è£…")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ go get -u github.com/golang/mock/gomock\n$ go install github.com/golang/mock/mockgen\n")])])]),a("ol",[a("li",[a("p",[e._v("ç¬¬ä¸€æ­¥ï¼šæˆ‘ä»¬å°†å®‰è£… gomock ç¬¬ä¸‰æ–¹åº“å’Œ mock ä»£ç çš„ç”Ÿæˆå·¥å…· mockgenã€‚è€Œåè€…å¯ä»¥å¤§å¤§çš„èŠ‚çœæˆ‘ä»¬çš„å·¥ä½œé‡ã€‚åªéœ€è¦äº†è§£å…¶ä½¿ç”¨æ–¹å¼å°±å¯ä»¥")])]),e._v(" "),a("li",[a("p",[e._v("ç¬¬äºŒæ­¥ï¼šè¾“å…¥ "),a("code",[e._v("mockgen")]),e._v(" éªŒè¯ä»£ç ç”Ÿæˆå·¥å…·æ˜¯å¦å®‰è£…æ­£ç¡®ã€‚è‹¥æ— æ³•æ­£å¸¸å“åº”ï¼Œè¯·æ£€æŸ¥ "),a("code",[e._v("bin")]),e._v(" ç›®å½•ä¸‹æ˜¯å¦åŒ…å«è¯¥äºŒè¿›åˆ¶æ–‡ä»¶")])])]),e._v(" "),a("h3",{attrs:{id:"ç”¨æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨æ³•"}},[e._v("#")]),e._v(" ç”¨æ³•")]),e._v(" "),a("p",[e._v("åœ¨ "),a("code",[e._v("mockgen")]),e._v(" å‘½ä»¤ä¸­ï¼Œæ”¯æŒä¸¤ç§ç”Ÿæˆæ¨¡å¼ï¼š")]),e._v(" "),a("ol",[a("li",[e._v("sourceï¼šä»æºæ–‡ä»¶ç”Ÿæˆ mock æ¥å£ï¼ˆé€šè¿‡ -source å¯ç”¨ï¼‰")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("mockgen -source=foo.go [other options]\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("reflectï¼šé€šè¿‡ä½¿ç”¨åå°„ç¨‹åºæ¥ç”Ÿæˆ mock æ¥å£ã€‚å®ƒé€šè¿‡ä¼ é€’ä¸¤ä¸ªéæ ‡å¿—å‚æ•°æ¥å¯ç”¨ï¼šå¯¼å…¥è·¯å¾„å’Œé€—å·åˆ†éš”çš„æ¥å£åˆ—è¡¨")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("mockgen database/sql/driver Conn,Driver\n")])])]),a("p",[e._v("ä»æœ¬è´¨ä¸Šæ¥è®²ï¼Œä¸¤ç§æ–¹å¼ç”Ÿæˆçš„ mock ä»£ç å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚å› æ­¤é€‰æ‹©åˆé€‚çš„å°±å¯ä»¥äº†")]),e._v(" "),a("h2",{attrs:{id:"å†™æµ‹è¯•ç”¨ä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å†™æµ‹è¯•ç”¨ä¾‹"}},[e._v("#")]),e._v(" å†™æµ‹è¯•ç”¨ä¾‹")]),e._v(" "),a("p",[e._v("åœ¨æœ¬æ–‡å°†æ¨¡æ‹Ÿä¸€ä¸ªç®€å• Demo æ¥ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œç†Ÿæ‚‰æ•´ä½“çš„æµ‹è¯•æµç¨‹")]),e._v(" "),a("h3",{attrs:{id:"æ­¥éª¤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤"}},[e._v("#")]),e._v(" æ­¥éª¤")]),e._v(" "),a("ol",[a("li",[e._v("æƒ³æ¸…æ¥šæ•´ä½“é€»è¾‘")]),e._v(" "),a("li",[e._v("å®šä¹‰æƒ³è¦ï¼ˆæ¨¡æ‹Ÿï¼‰ä¾èµ–é¡¹çš„ interfaceï¼ˆæ¥å£ï¼‰")]),e._v(" "),a("li",[e._v("ä½¿ç”¨ "),a("code",[e._v("mockgen")]),e._v(" å‘½ä»¤å¯¹æ‰€éœ€ mock çš„ interface ç”Ÿæˆ mock æ–‡ä»¶")]),e._v(" "),a("li",[e._v("ç¼–å†™å•å…ƒæµ‹è¯•çš„é€»è¾‘ï¼Œåœ¨æµ‹è¯•ä¸­ä½¿ç”¨ mock")]),e._v(" "),a("li",[e._v("è¿›è¡Œå•å…ƒæµ‹è¯•çš„éªŒè¯")])]),e._v(" "),a("h3",{attrs:{id:"ç›®å½•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç›®å½•"}},[e._v("#")]),e._v(" ç›®å½•")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("â”œâ”€â”€ mock\nâ”œâ”€â”€ person\nâ”‚Â Â  â””â”€â”€ male.go\nâ””â”€â”€ user\n    â”œâ”€â”€ user.go\n    â””â”€â”€ user_test.go\n")])])]),a("h3",{attrs:{id:"ç¼–å†™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç¼–å†™"}},[e._v("#")]),e._v(" ç¼–å†™")]),e._v(" "),a("h4",{attrs:{id:"interface-æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#interface-æ–¹æ³•"}},[e._v("#")]),e._v(" interface æ–¹æ³•")]),e._v(" "),a("p",[e._v("æ‰“å¼€ person/male.go æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("package person\n\ntype Male interface {\n\tGet(id int64) error\n}\n")])])]),a("h4",{attrs:{id:"è°ƒç”¨æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒç”¨æ–¹æ³•"}},[e._v("#")]),e._v(" è°ƒç”¨æ–¹æ³•")]),e._v(" "),a("p",[e._v("æ‰“å¼€ user/user.go æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('package user\n\nimport "github.com/EDDYCJY/mockd/person"\n\ntype User struct {\n\tPerson person.Male\n}\n\nfunc NewUser(p person.Male) *User {\n\treturn &User{Person: p}\n}\n\nfunc (u *User) GetUserInfo(id int64) error {\n\treturn u.Person.Get(id)\n}\n')])])]),a("h4",{attrs:{id:"ç”Ÿæˆ-mock-æ–‡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿæˆ-mock-æ–‡ä»¶"}},[e._v("#")]),e._v(" ç”Ÿæˆ mock æ–‡ä»¶")]),e._v(" "),a("p",[e._v("å›åˆ° "),a("code",[e._v("mockd/")]),e._v(" çš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ mockgen -source=./person/male.go -destination=./mock/male_mock.go -package=mock\n")])])]),a("p",[e._v("åœ¨æ‰§è¡Œå®Œæ¯•åï¼Œå¯ä»¥å‘ç° "),a("code",[e._v("mock/")]),e._v(" ç›®å½•ä¸‹å¤šå‡ºäº† male_mock.go æ–‡ä»¶ï¼Œè¿™å°±æ˜¯ mock æ–‡ä»¶ã€‚é‚£ä¹ˆå‘½ä»¤ä¸­çš„æŒ‡ä»¤åˆåˆ†åˆ«æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå¦‚ä¸‹ï¼š")]),e._v(" "),a("ul",[a("li",[e._v("-sourceï¼šè®¾ç½®éœ€è¦æ¨¡æ‹Ÿï¼ˆmockï¼‰çš„æ¥å£æ–‡ä»¶")]),e._v(" "),a("li",[e._v("-destinationï¼šè®¾ç½® mock æ–‡ä»¶è¾“å‡ºçš„åœ°æ–¹ï¼Œè‹¥ä¸è®¾ç½®åˆ™æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºä¸­")]),e._v(" "),a("li",[e._v("-packageï¼šè®¾ç½® mock æ–‡ä»¶çš„åŒ…åï¼Œè‹¥ä¸è®¾ç½®åˆ™ä¸º "),a("code",[e._v("mock_")]),e._v(" å‰ç¼€åŠ ä¸Šæ–‡ä»¶åï¼ˆå¦‚æœ¬æ–‡çš„åŒ…åä¼šä¸º mock_personï¼‰")])]),e._v(" "),a("p",[e._v("æƒ³äº†è§£æ›´å¤šçš„æŒ‡ä»¤ç¬¦ï¼Œå¯å‚è§ "),a("a",{attrs:{href:"https://github.com/golang/mock#running-mockgen",target:"_blank",rel:"noopener noreferrer"}},[e._v("å®˜æ–¹æ–‡æ¡£"),a("OutboundLink")],1)]),e._v(" "),a("h5",{attrs:{id:"è¾“å‡ºçš„-mock-æ–‡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è¾“å‡ºçš„-mock-æ–‡ä»¶"}},[e._v("#")]),e._v(" è¾“å‡ºçš„ mock æ–‡ä»¶")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('// Code generated by MockGen. DO NOT EDIT.\n// Source: ./person/male.go\n\n// Package mock is a generated GoMock package.\npackage mock\n\nimport (\n\tgomock "github.com/golang/mock/gomock"\n\treflect "reflect"\n)\n\n// MockMale is a mock of Male interface\ntype MockMale struct {\n\tctrl     *gomock.Controller\n\trecorder *MockMaleMockRecorder\n}\n\n// MockMaleMockRecorder is the mock recorder for MockMale\ntype MockMaleMockRecorder struct {\n\tmock *MockMale\n}\n\n// NewMockMale creates a new mock instance\nfunc NewMockMale(ctrl *gomock.Controller) *MockMale {\n\tmock := &MockMale{ctrl: ctrl}\n\tmock.recorder = &MockMaleMockRecorder{mock}\n\treturn mock\n}\n\n// EXPECT returns an object that allows the caller to indicate expected use\nfunc (m *MockMale) EXPECT() *MockMaleMockRecorder {\n\treturn m.recorder\n}\n\n// Get mocks base method\nfunc (m *MockMale) Get(id int64) error {\n\tret := m.ctrl.Call(m, "Get", id)\n\tret0, _ := ret[0].(error)\n\treturn ret0\n}\n\n// Get indicates an expected call of Get\nfunc (mr *MockMaleMockRecorder) Get(id interface{}) *gomock.Call {\n\treturn mr.mock.ctrl.RecordCallWithMethodType(mr.mock, "Get", reflect.TypeOf((*MockMale)(nil).Get), id)\n}\n')])])]),a("h4",{attrs:{id:"æµ‹è¯•ç”¨ä¾‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•ç”¨ä¾‹"}},[e._v("#")]),e._v(" æµ‹è¯•ç”¨ä¾‹")]),e._v(" "),a("p",[e._v("æ‰“å¼€ user/user_test.go æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('package user\n\nimport (\n\t"testing"\n\n\t"github.com/EDDYCJY/mockd/mock"\n\n\t"github.com/golang/mock/gomock"\n)\n\nfunc TestUser_GetUserInfo(t *testing.T) {\n\tctl := gomock.NewController(t)\n\tdefer ctl.Finish()\n\n\tvar id int64 = 1\n\tmockMale := mock.NewMockMale(ctl)\n\tgomock.InOrder(\n\t\tmockMale.EXPECT().Get(id).Return(nil),\n\t)\n\n\tuser := NewUser(mockMale)\n\terr := user.GetUserInfo(id)\n\tif err != nil {\n\t\tt.Errorf("user.GetUserInfo err: %v", err)\n\t}\n}\n')])])]),a("ol",[a("li",[a("p",[e._v("gomock.NewControllerï¼šè¿”å› "),a("code",[e._v("gomock.Controller")]),e._v("ï¼Œå®ƒä»£è¡¨ mock ç”Ÿæ€ç³»ç»Ÿä¸­çš„é¡¶çº§æ§ä»¶ã€‚å®šä¹‰äº† mock å¯¹è±¡çš„èŒƒå›´ã€ç”Ÿå‘½å‘¨æœŸå’ŒæœŸå¾…å€¼ã€‚å¦å¤–å®ƒåœ¨å¤šä¸ª goroutine ä¸­æ˜¯å®‰å…¨çš„")])]),e._v(" "),a("li",[a("p",[e._v("mock.NewMockMaleï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ mock å®ä¾‹")])]),e._v(" "),a("li",[a("p",[e._v("gomock.InOrderï¼šå£°æ˜ç»™å®šçš„è°ƒç”¨åº”æŒ‰é¡ºåºè¿›è¡Œï¼ˆæ˜¯å¯¹ gomock.After çš„äºŒæ¬¡å°è£…ï¼‰")])]),e._v(" "),a("li",[a("p",[e._v("mockMale.EXPECT().Get(id).Return(nil)ï¼šè¿™é‡Œæœ‰ä¸‰ä¸ªæ­¥éª¤ï¼Œ"),a("code",[e._v("EXPECT()")]),e._v("è¿”å›ä¸€ä¸ªå…è®¸è°ƒç”¨è€…è®¾ç½®"),a("strong",[e._v("æœŸæœ›")]),e._v("å’Œ"),a("strong",[e._v("è¿”å›å€¼")]),e._v("çš„å¯¹è±¡ã€‚"),a("code",[e._v("Get(id)")]),e._v(" æ˜¯è®¾ç½®å…¥å‚å¹¶è°ƒç”¨ mock å®ä¾‹ä¸­çš„æ–¹æ³•ã€‚"),a("code",[e._v("Return(nil)")]),e._v(" æ˜¯è®¾ç½®å…ˆå‰è°ƒç”¨çš„æ–¹æ³•å‡ºå‚ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è®¾ç½®å…¥å‚å¹¶è°ƒç”¨ï¼Œæœ€åè®¾ç½®è¿”å›å€¼")])]),e._v(" "),a("li",[a("p",[e._v("NewUser(mockMale)ï¼šåˆ›å»º User å®ä¾‹ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨è¿™é‡Œ"),a("strong",[e._v("æ³¨å…¥äº† mock å¯¹è±¡")]),e._v("ï¼Œå› æ­¤å®é™…åœ¨éšåçš„ "),a("code",[e._v("user.GetUserInfo(id)")]),e._v(" è°ƒç”¨ï¼ˆå…¥å‚ï¼šid ä¸º 1ï¼‰ä¸­ã€‚å®ƒè°ƒç”¨çš„æ˜¯æˆ‘ä»¬äº‹å…ˆæ¨¡æ‹Ÿå¥½çš„ mock æ–¹æ³•")])]),e._v(" "),a("li",[a("p",[e._v("ctl.Finish()ï¼šè¿›è¡Œ mock ç”¨ä¾‹çš„æœŸæœ›å€¼æ–­è¨€ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨ "),a("code",[e._v("defer")]),e._v(" å»¶è¿Ÿæ‰§è¡Œï¼Œä»¥é˜²æ­¢æˆ‘ä»¬å¿˜è®°è¿™ä¸€æ“ä½œ")])])]),e._v(" "),a("h3",{attrs:{id:"æµ‹è¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•"}},[e._v("#")]),e._v(" æµ‹è¯•")]),e._v(" "),a("p",[e._v("å›åˆ° "),a("code",[e._v("mockd/")]),e._v(" çš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ go test ./user\nok  \tgithub.com/EDDYCJY/mockd/user\n")])])]),a("p",[e._v("çœ‹åˆ°è¿™æ ·çš„ç»“æœï¼Œå°±å¤§åŠŸå‘Šæˆå•¦ï¼ä½ å¯ä»¥è‡ªå·±è°ƒæ•´ä¸€ä¸‹ "),a("code",[e._v("Return()")]),e._v(" çš„è¿”å›å€¼ï¼Œä»¥æ­¤å¾—åˆ°ä¸ä¸€æ ·çš„æµ‹è¯•ç»“æœå“¦ ğŸ˜„")]),e._v(" "),a("h2",{attrs:{id:"æŸ¥çœ‹æµ‹è¯•æƒ…å†µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æŸ¥çœ‹æµ‹è¯•æƒ…å†µ"}},[e._v("#")]),e._v(" æŸ¥çœ‹æµ‹è¯•æƒ…å†µ")]),e._v(" "),a("h3",{attrs:{id:"æµ‹è¯•è¦†ç›–ç‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æµ‹è¯•è¦†ç›–ç‡"}},[e._v("#")]),e._v(" æµ‹è¯•è¦†ç›–ç‡")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ go test -cover ./user\nok  \tgithub.com/EDDYCJY/mockd/user\t(cached)\tcoverage: 100.0% of statements\n")])])]),a("p",[e._v("å¯é€šè¿‡è®¾ç½® "),a("code",[e._v("-cover")]),e._v(" æ ‡å¿—ç¬¦æ¥å¼€å¯è¦†ç›–ç‡çš„ç»Ÿè®¡ï¼Œå±•ç¤ºå†…å®¹ä¸º "),a("code",[e._v("coverage: 100.0%")]),e._v("ã€‚")]),e._v(" "),a("h3",{attrs:{id:"å¯è§†åŒ–ç•Œé¢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¯è§†åŒ–ç•Œé¢"}},[e._v("#")]),e._v(" å¯è§†åŒ–ç•Œé¢")]),e._v(" "),a("ol",[a("li",[e._v("ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡çš„ profile æ–‡ä»¶")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ go test ./... -coverprofile=cover.out\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[e._v("åˆ©ç”¨ profile æ–‡ä»¶ç”Ÿæˆå¯è§†åŒ–ç•Œé¢")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ go tool cover -html=cover.out\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[e._v("æŸ¥çœ‹å¯è§†åŒ–ç•Œé¢ï¼Œåˆ†æè¦†ç›–æƒ…å†µ")])]),e._v(" "),a("p",[a("img",{attrs:{src:"https://i.imgur.com/YSZrofR.jpg",alt:"image"}})]),e._v(" "),a("h2",{attrs:{id:"æ›´å¤š"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ›´å¤š"}},[e._v("#")]),e._v(" æ›´å¤š")]),e._v(" "),a("h3",{attrs:{id:"ä¸€ã€å¸¸ç”¨-mock-æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€å¸¸ç”¨-mock-æ–¹æ³•"}},[e._v("#")]),e._v(" ä¸€ã€å¸¸ç”¨ mock æ–¹æ³•")]),e._v(" "),a("h4",{attrs:{id:"è°ƒç”¨æ–¹æ³•-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è°ƒç”¨æ–¹æ³•-2"}},[e._v("#")]),e._v(" è°ƒç”¨æ–¹æ³•")]),e._v(" "),a("ul",[a("li",[e._v("Call.Do()ï¼šå£°æ˜åœ¨åŒ¹é…æ—¶è¦è¿è¡Œçš„æ“ä½œ")]),e._v(" "),a("li",[e._v("Call.DoAndReturn()ï¼šå£°æ˜åœ¨åŒ¹é…è°ƒç”¨æ—¶è¦è¿è¡Œçš„æ“ä½œï¼Œå¹¶ä¸”æ¨¡æ‹Ÿè¿”å›è¯¥å‡½æ•°çš„è¿”å›å€¼")]),e._v(" "),a("li",[e._v("Call.MaxTimes()ï¼šè®¾ç½®æœ€å¤§çš„è°ƒç”¨æ¬¡æ•°ä¸º n æ¬¡")]),e._v(" "),a("li",[e._v("Call.MinTimes()ï¼šè®¾ç½®æœ€å°çš„è°ƒç”¨æ¬¡æ•°ä¸º n æ¬¡")]),e._v(" "),a("li",[e._v("Call.AnyTimes()ï¼šå…è®¸è°ƒç”¨æ¬¡æ•°ä¸º 0 æ¬¡æˆ–æ›´å¤šæ¬¡")]),e._v(" "),a("li",[e._v("Call.Times()ï¼šè®¾ç½®è°ƒç”¨æ¬¡æ•°ä¸º n æ¬¡")])]),e._v(" "),a("h4",{attrs:{id:"å‚æ•°åŒ¹é…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å‚æ•°åŒ¹é…"}},[e._v("#")]),e._v(" å‚æ•°åŒ¹é…")]),e._v(" "),a("ul",[a("li",[e._v("gomock.Any()ï¼šåŒ¹é…ä»»æ„å€¼")]),e._v(" "),a("li",[e._v("gomock.Eq()ï¼šé€šè¿‡åå°„åŒ¹é…åˆ°æŒ‡å®šçš„ç±»å‹å€¼ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨è®¾ç½®")]),e._v(" "),a("li",[e._v("gomock.Nil()ï¼šè¿”å› nil")])]),e._v(" "),a("p",[e._v("å»ºè®®æ›´å¤šçš„æ–¹æ³•å¯å‚è§ "),a("a",{attrs:{href:"https://godoc.org/github.com/golang/mock/gomock#pkg-index",target:"_blank",rel:"noopener noreferrer"}},[e._v("å®˜æ–¹æ–‡æ¡£"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"äºŒã€ç”Ÿæˆå¤šä¸ª-mock-æ–‡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€ç”Ÿæˆå¤šä¸ª-mock-æ–‡ä»¶"}},[e._v("#")]),e._v(" äºŒã€ç”Ÿæˆå¤šä¸ª mock æ–‡ä»¶")]),e._v(" "),a("p",[e._v("ä½ å¯èƒ½ä¼šæƒ³ä¸€æ¡æ¡å‘½ä»¤ç”Ÿæˆ mock æ–‡ä»¶ï¼Œå²‚ä¸å¾—å´©æºƒï¼Ÿ")]),e._v(" "),a("p",[e._v("å½“ç„¶ï¼Œå®˜æ–¹æä¾›äº†æ›´æ–¹ä¾¿çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ "),a("code",[e._v("go:generate")]),e._v(" æ¥å®Œæˆæ‰¹é‡å¤„ç†çš„åŠŸèƒ½")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("go generate [-run regexp] [-n] [-v] [-x] [build flags] [file.go... | packages]\n")])])]),a("h4",{attrs:{id:"ä¿®æ”¹-interface-æ–¹æ³•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¿®æ”¹-interface-æ–¹æ³•"}},[e._v("#")]),e._v(" ä¿®æ”¹ interface æ–¹æ³•")]),e._v(" "),a("p",[e._v("æ‰“å¼€ person/male.go æ–‡ä»¶ï¼Œä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼š")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("package person\n\n//go:generate mockgen -destination=../mock/male_mock.go -package=mock github.com/EDDYCJY/mockd/person Male\n\ntype Male interface {\n\tGet(id int64) error\n}\n")])])]),a("p",[e._v("æˆ‘ä»¬å…³æ³¨åˆ° "),a("code",[e._v("go:generate")]),e._v(" è¿™æ¡è¯­å¥ï¼Œå¯åˆ†ä¸ºä»¥ä¸‹éƒ¨åˆ†ï¼š")]),e._v(" "),a("ol",[a("li",[e._v("å£°æ˜ "),a("code",[e._v("//go:generate")]),e._v(" ï¼ˆæ³¨æ„ä¸è¦ç•™ç©ºæ ¼ï¼‰")]),e._v(" "),a("li",[e._v("ä½¿ç”¨ "),a("code",[e._v("mockgen")]),e._v(" å‘½ä»¤")]),e._v(" "),a("li",[e._v("å®šä¹‰ "),a("code",[e._v("-destination")])]),e._v(" "),a("li",[e._v("å®šä¹‰ "),a("code",[e._v("-package")])]),e._v(" "),a("li",[e._v("å®šä¹‰ "),a("code",[e._v("source")]),e._v("ï¼Œæ­¤å¤„ä¸º person çš„åŒ…è·¯å¾„")]),e._v(" "),a("li",[e._v("å®šä¹‰ "),a("code",[e._v("interfaces")]),e._v("ï¼Œæ­¤å¤„ä¸º "),a("code",[e._v("Male")])])]),e._v(" "),a("h4",{attrs:{id:"é‡æ–°ç”Ÿæˆ-mock-æ–‡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#é‡æ–°ç”Ÿæˆ-mock-æ–‡ä»¶"}},[e._v("#")]),e._v(" é‡æ–°ç”Ÿæˆ mock æ–‡ä»¶")]),e._v(" "),a("p",[e._v("å›åˆ° "),a("code",[e._v("mockd/")]),e._v(" çš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ go generate ./...\n")])])]),a("p",[e._v("å†æ£€æŸ¥ "),a("code",[e._v("mock/")]),e._v(" å‘ç°ä¹Ÿå·²ç»æ­£ç¡®ç”Ÿæˆäº†ï¼Œåœ¨å¤šä¸ªæ–‡ä»¶æ—¶æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢ ğŸ¤©")]),e._v(" "),a("h2",{attrs:{id:"æ€»ç»“"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[e._v("#")]),e._v(" æ€»ç»“")]),e._v(" "),a("p",[e._v("åœ¨å•å…ƒæµ‹è¯•è¿™ä¸€ç¯ï¼Œgomock ç»™æˆ‘ä»¬æä¾›äº†æå¤§çš„ä¾¿åˆ©ã€‚èƒ½å¤Ÿ mock æ‰è®¸è®¸å¤šå¤šçš„ä¾èµ–é¡¹")]),e._v(" "),a("p",[e._v("å…¶ä¸­è¿˜æœ‰å¾ˆå¤šçš„ä½¿ç”¨æ–¹å¼å’ŒåŠŸèƒ½ã€‚ä½ å¯ä»¥ mark ä½åè¯¦ç»†é˜…è¯»ä¸‹å®˜æ–¹æ–‡æ¡£ï¼Œè®°å¿†ä¼šæ›´æ·±åˆ»")])])}),[],!1,null,null,null);t.default=o.exports}}]);