(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{671:function(s,t,e){"use strict";e.r(t);var a=e(44),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"服务器登录配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务器登录配置"}},[s._v("#")]),s._v(" 服务器登录配置")]),s._v(" "),e("p",[s._v("当你刚拥有一个服务器后，首先需要登录服务器，本节主要有以下三个实践操作：")]),s._v(" "),e("ol",[e("li",[s._v("快速登录: 配置客户端 ssh-config")]),s._v(" "),e("li",[s._v("免密登录: 配置 public key")]),s._v(" "),e("li",[s._v("禁用密码：配置服务器 ssh-config")])]),s._v(" "),e("blockquote",[e("p",[s._v("你对流程熟悉后，只需要一分钟便可以操作完成")])]),s._v(" "),e("ul",[e("li",[s._v("原文地址: "),e("a",{attrs:{href:"https://blog.zhequtao.com/op/init",target:"_blank",rel:"noopener noreferrer"}},[s._v("云服务器初始登录配置"),e("OutboundLink")],1)]),s._v(" "),e("li",[s._v("系列文章: "),e("a",{attrs:{href:"https://blog.zhequtao.com/op",target:"_blank",rel:"noopener noreferrer"}},[s._v("服务器运维笔记"),e("OutboundLink")],1)])]),s._v(" "),e("h1",{attrs:{id:"服务器登录配置-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#服务器登录配置-2"}},[s._v("#")]),s._v(" 服务器登录配置")]),s._v(" "),e("h2",{attrs:{id:"快速登录：ssh-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速登录：ssh-config"}},[s._v("#")]),s._v(" 快速登录：ssh-config")]),s._v(" "),e("p",[s._v("在本地客户端环境 (MAC) 上配置 ssh-config，使其更方便地访问云服务器")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("/etc/ssh/ssh_config")])]),s._v(" "),e("li",[e("code",[s._v("~/.ssh/config")])])]),s._v(" "),e("p",[s._v("以下是快速登录我两个服务器 "),e("code",[s._v("shanyue")]),s._v(" 和 "),e("code",[s._v("shuifeng")]),s._v(" 的配置")]),s._v(" "),e("div",{staticClass:"language-config extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 修改 ssh 配置文件 ~/.ssh/config\nHost shanyue\n    HostName 59.110.216.155\n    # HostName 172.17.68.39 私网IP\n    User root\nHost shuifeng\n    HostName <PUBLIC_IP>\n    # HostName 172.17.68.40 私网IP\n    User root\n")])])]),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置成功之后直接 ssh Host 名称就可以")]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" shanyue\nThe authenticity of "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'59.110.216.155 (59.110.216.155)'")]),s._v(" can"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'t be established.\nECDSA key fingerprint is SHA256:WXULVpZcrX6kENrR5GH0mqRi49Djj22UXba0dRXCVKo.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("59.110")]),s._v(".216.155' "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ECDSA"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" to the list of known hosts.\n\nWelcome to Alibaba Cloud Elastic Compute Service "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@shanyue ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@shanyue ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@shanyue ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])])]),e("h2",{attrs:{id:"免密登录：public-key-与-ssh-copy-id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#免密登录：public-key-与-ssh-copy-id"}},[s._v("#")]),s._v(" 免密登录：public-key 与 ssh-copy-id")]),s._v(" "),e("p",[e("strong",[s._v("如何实现远程服务器的免密登录?")])]),s._v(" "),e("p",[s._v("两个文件: 本地环境的 "),e("code",[s._v("~/.ssh/id_rsa.pub")]),s._v(" 与 远程服务器的 "),e("code",[s._v("~/.ssh/authorized_keys")]),s._v("\n一个动作：把本地文件中的内容复制粘贴到远程服务器中")]),s._v(" "),e("blockquote",[e("p",[s._v("如果 ~/.ssh/id_rsa.pub 文件不存在，请参考下一章节使用 ssh-keygen 生成 ssh keys: "),e("a",{attrs:{href:"https://blog.zhequtao.com/op/ssh-setting",target:"_blank",rel:"noopener noreferrer"}},[s._v("ssh key 及 git 配置"),e("OutboundLink")],1)])]),s._v(" "),e("p",[e("strong",[s._v("即把自己的公钥放在远程服务器")])]),s._v(" "),e("blockquote",[e("p",[s._v("如果不存在文件 "),e("code",[s._v("~/.ssh/id_rsa.pub")]),s._v("，则参考下一节使用 "),e("code",[s._v("ssh keygen")]),s._v(" 生成")])]),s._v(" "),e("p",[s._v("简单来说，就是 "),e("code",[s._v("Ctrl-C")]),s._v(" 与 "),e("code",[s._v("Ctrl-V")]),s._v(" 操作，不过具体实施起来较为琐碎。"),e("strong",[s._v("更为重要的是对于新人还有一个门槛：vim 的使用")])]),s._v(" "),e("p",[s._v("此时就需要一个解决生产力的命令行工具应运而生: "),e("code",[s._v("ssh-copy-id")])]),s._v(" "),e("div",{staticClass:"language-ssh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 在本地环境进行操作\n\n# 会提示你输入密码，成功之后可以直接 ssh 进去\n$ ssh-copy-id shanyue\n\n")])])]),e("h2",{attrs:{id:"禁用密码登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#禁用密码登录"}},[s._v("#")]),s._v(" 禁用密码登录")]),s._v(" "),e("p",[s._v("修改云服务器的 ssh 配置文件："),e("code",[s._v("/etc/ssh/ssh_config")]),s._v("。"),e("code",[s._v("PasswordAuthentication")]),s._v(" 设置为 "),e("code",[s._v("no")]),s._v("，禁用密码登录")]),s._v(" "),e("div",{staticClass:"language-config extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 禁用密码登录\nHost *\n  PasswordAuthentication no\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);